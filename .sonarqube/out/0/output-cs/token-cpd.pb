Ãa
FD:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\ADMINAssessmentsController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class &
ADMINAssessmentsController +
:, -

Controller. 8
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public &
ADMINAssessmentsController )
() *
AppDbContext* 6
context7 >
)> ?
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
appDbContext 
= 
_context '
.' (

Assessment( 2
.2 3
Include3 :
(: ;
a; <
=>= ?
a@ A
.A B
SyllabusB J
)J K
;K L
return 
View 
( 
await 
appDbContext *
.* +
ToListAsync+ 6
(6 7
)7 8
)8 9
;9 :
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{ 	
if   
(   
id   
==   
null   
||   
_context   &
.  & '

Assessment  ' 1
==  2 4
null  5 9
)  9 :
{!! 
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
var%% 

assessment%% 
=%% 
await%% "
_context%%# +
.%%+ ,

Assessment%%, 6
.&& 
Include&& 
(&& 
a&& 
=>&& 
a&& 
.&&  
Syllabus&&  (
)&&( )
.'' 
FirstOrDefaultAsync'' $
(''$ %
m''% &
=>''' )
m''* +
.''+ ,
AssessmentId'', 8
==''9 ;
id''< >
)''> ?
;''? @
if(( 
((( 

assessment(( 
==(( 
null(( "
)((" #
{)) 
return** 
NotFound** 
(**  
)**  !
;**! "
}++ 
return-- 
View-- 
(-- 

assessment-- "
)--" #
;--# $
}.. 	
public11 
IActionResult11 
Create11 #
(11# $
)11$ %
{22 	
ViewData33 
[33 
$str33 !
]33! "
=33# $
new33% (

SelectList33) 3
(333 4
_context334 <
.33< =
Syllabus33= E
,33E F
$str33G S
,33S T
$str33U a
)33a b
;33b c
return44 
View44 
(44 
)44 
;44 
}55 	
[:: 	
HttpPost::	 
]:: 
[;; 	$
ValidateAntiForgeryToken;;	 !
];;! "
public<< 
async<< 
Task<< 
<<< 
IActionResult<< '
><<' (
Create<<) /
(<</ 0
[<<0 1
Bind<<1 5
(<<5 6
$str	<<6 ¬
)
<<¬ √
]
<<√ ƒ

Assessment
<<≈ œ

assessment
<<– ⁄
)
<<⁄ €
{== 	
if>> 
(>> 

ModelState>> 
.>> 
IsValid>> "
)>>" #
{?? 
_context@@ 
.@@ 
Add@@ 
(@@ 

assessment@@ '
)@@' (
;@@( )
awaitAA 
_contextAA 
.AA 
SaveChangesAsyncAA /
(AA/ 0
)AA0 1
;AA1 2
returnBB 
RedirectToActionBB '
(BB' (
nameofBB( .
(BB. /
IndexBB/ 4
)BB4 5
)BB5 6
;BB6 7
}CC 
ViewDataDD 
[DD 
$strDD !
]DD! "
=DD# $
newDD% (

SelectListDD) 3
(DD3 4
_contextDD4 <
.DD< =
SyllabusDD= E
,DDE F
$strDDG S
,DDS T
$strDDU a
,DDa b

assessmentDDc m
.DDm n

SyllabusIdDDn x
)DDx y
;DDy z
returnEE 
ViewEE 
(EE 

assessmentEE "
)EE" #
;EE# $
}FF 	
publicII 
asyncII 
TaskII 
<II 
IActionResultII '
>II' (
EditII) -
(II- .
intII. 1
?II1 2
idII3 5
)II5 6
{JJ 	
ifKK 
(KK 
idKK 
==KK 
nullKK 
||KK 
_contextKK &
.KK& '

AssessmentKK' 1
==KK2 4
nullKK5 9
)KK9 :
{LL 
returnMM 
NotFoundMM 
(MM  
)MM  !
;MM! "
}NN 
varPP 

assessmentPP 
=PP 
awaitPP "
_contextPP# +
.PP+ ,

AssessmentPP, 6
.PP6 7
	FindAsyncPP7 @
(PP@ A
idPPA C
)PPC D
;PPD E
ifQQ 
(QQ 

assessmentQQ 
==QQ 
nullQQ "
)QQ" #
{RR 
returnSS 
NotFoundSS 
(SS  
)SS  !
;SS! "
}TT 
ViewDataUU 
[UU 
$strUU !
]UU! "
=UU# $
newUU% (

SelectListUU) 3
(UU3 4
_contextUU4 <
.UU< =
SyllabusUU= E
,UUE F
$strUUG S
,UUS T
$strUUU a
,UUa b

assessmentUUc m
.UUm n

SyllabusIdUUn x
)UUx y
;UUy z
returnVV 
ViewVV 
(VV 

assessmentVV "
)VV" #
;VV# $
}WW 	
[\\ 	
HttpPost\\	 
]\\ 
[]] 	$
ValidateAntiForgeryToken]]	 !
]]]! "
public^^ 
async^^ 
Task^^ 
<^^ 
IActionResult^^ '
>^^' (
Edit^^) -
(^^- .
int^^. 1
id^^2 4
,^^4 5
[^^6 7
Bind^^7 ;
(^^; <
$str	^^< »
)
^^» …
]
^^…  

Assessment
^^À ’

assessment
^^÷ ‡
)
^^‡ ·
{__ 	
if`` 
(`` 
id`` 
!=`` 

assessment``  
.``  !
AssessmentId``! -
)``- .
{aa 
returnbb 
NotFoundbb 
(bb  
)bb  !
;bb! "
}cc 
ifee 
(ee 

ModelStateee 
.ee 
IsValidee "
)ee" #
{ff 
trygg 
{hh 
_contextii 
.ii 
Updateii #
(ii# $

assessmentii$ .
)ii. /
;ii/ 0
awaitjj 
_contextjj "
.jj" #
SaveChangesAsyncjj# 3
(jj3 4
)jj4 5
;jj5 6
}kk 
catchll 
(ll (
DbUpdateConcurrencyExceptionll 3
)ll3 4
{mm 
ifnn 
(nn 
!nn 
AssessmentExistsnn )
(nn) *

assessmentnn* 4
.nn4 5
AssessmentIdnn5 A
)nnA B
)nnB C
{oo 
returnpp 
NotFoundpp '
(pp' (
)pp( )
;pp) *
}qq 
elserr 
{ss 
throwtt 
;tt 
}uu 
}vv 
returnww 
RedirectToActionww '
(ww' (
nameofww( .
(ww. /
Indexww/ 4
)ww4 5
)ww5 6
;ww6 7
}xx 
ViewDatayy 
[yy 
$stryy !
]yy! "
=yy# $
newyy% (

SelectListyy) 3
(yy3 4
_contextyy4 <
.yy< =
Syllabusyy= E
,yyE F
$stryyG S
,yyS T
$stryyU a
,yya b

assessmentyyc m
.yym n

SyllabusIdyyn x
)yyx y
;yyy z
returnzz 
Viewzz 
(zz 

assessmentzz "
)zz" #
;zz# $
}{{ 	
public~~ 
async~~ 
Task~~ 
<~~ 
IActionResult~~ '
>~~' (
Delete~~) /
(~~/ 0
int~~0 3
?~~3 4
id~~5 7
)~~7 8
{ 	
if
ÄÄ 
(
ÄÄ 
id
ÄÄ 
==
ÄÄ 
null
ÄÄ 
||
ÄÄ 
_context
ÄÄ &
.
ÄÄ& '

Assessment
ÄÄ' 1
==
ÄÄ2 4
null
ÄÄ5 9
)
ÄÄ9 :
{
ÅÅ 
return
ÇÇ 
NotFound
ÇÇ 
(
ÇÇ  
)
ÇÇ  !
;
ÇÇ! "
}
ÉÉ 
var
ÖÖ 

assessment
ÖÖ 
=
ÖÖ 
await
ÖÖ "
_context
ÖÖ# +
.
ÖÖ+ ,

Assessment
ÖÖ, 6
.
ÜÜ 
Include
ÜÜ 
(
ÜÜ 
a
ÜÜ 
=>
ÜÜ 
a
ÜÜ 
.
ÜÜ  
Syllabus
ÜÜ  (
)
ÜÜ( )
.
áá !
FirstOrDefaultAsync
áá $
(
áá$ %
m
áá% &
=>
áá' )
m
áá* +
.
áá+ ,
AssessmentId
áá, 8
==
áá9 ;
id
áá< >
)
áá> ?
;
áá? @
if
àà 
(
àà 

assessment
àà 
==
àà 
null
àà "
)
àà" #
{
ââ 
return
ää 
NotFound
ää 
(
ää  
)
ää  !
;
ää! "
}
ãã 
return
çç 
View
çç 
(
çç 

assessment
çç "
)
çç" #
;
çç# $
}
éé 	
[
ëë 	
HttpPost
ëë	 
,
ëë 

ActionName
ëë 
(
ëë 
$str
ëë &
)
ëë& '
]
ëë' (
[
íí 	&
ValidateAntiForgeryToken
íí	 !
]
íí! "
public
ìì 
async
ìì 
Task
ìì 
<
ìì 
IActionResult
ìì '
>
ìì' (
DeleteConfirmed
ìì) 8
(
ìì8 9
int
ìì9 <
id
ìì= ?
)
ìì? @
{
îî 	
if
ïï 
(
ïï 
_context
ïï 
.
ïï 

Assessment
ïï #
==
ïï$ &
null
ïï' +
)
ïï+ ,
{
ññ 
return
óó 
Problem
óó 
(
óó 
$str
óó O
)
óóO P
;
óóP Q
}
òò 
var
ôô 

assessment
ôô 
=
ôô 
await
ôô "
_context
ôô# +
.
ôô+ ,

Assessment
ôô, 6
.
ôô6 7
	FindAsync
ôô7 @
(
ôô@ A
id
ôôA C
)
ôôC D
;
ôôD E
if
öö 
(
öö 

assessment
öö 
!=
öö 
null
öö "
)
öö" #
{
õõ 
_context
úú 
.
úú 

Assessment
úú #
.
úú# $
Remove
úú$ *
(
úú* +

assessment
úú+ 5
)
úú5 6
;
úú6 7
}
ùù 
await
üü 
_context
üü 
.
üü 
SaveChangesAsync
üü +
(
üü+ ,
)
üü, -
;
üü- .
return
†† 
RedirectToAction
†† #
(
††# $
nameof
††$ *
(
††* +
Index
††+ 0
)
††0 1
)
††1 2
;
††2 3
}
°° 	
private
££ 
bool
££ 
AssessmentExists
££ %
(
££% &
int
££& )
id
££* ,
)
££, -
{
§§ 	
return
••
 
(
•• 
_context
•• 
.
•• 

Assessment
•• %
?
••% &
.
••& '
Any
••' *
(
••* +
e
••+ ,
=>
••- /
e
••0 1
.
••1 2
AssessmentId
••2 >
==
••? A
id
••B D
)
••D E
)
••E F
.
••F G
GetValueOrDefault
••G X
(
••X Y
)
••Y Z
;
••Z [
}
¶¶ 	
}
ßß 
}®® àæ
@D:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\ADMINComboController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class  
ADMINComboController %
:& '

Controller( 2
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public  
ADMINComboController #
(# $
AppDbContext$ 0
context1 8
)8 9
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
int/ 2
?2 3
id4 6
)6 7
{ 	

Curriculum 
curri 
= 
_context '
.' (

Curriculum( 2
.2 3
FirstOrDefault3 A
(A B
pB C
=>D F
pG H
.H I
CurriculumIdI U
==V X
idY [
)[ \
;\ ]
ViewBag 
. 

Curriculum 
=  
curri! &
;& '
var 
	listCombo 
= 
_context $
.$ %
Combo% *
.* +
Include+ 2
(2 3
p3 4
=>5 7
p8 9
.9 :

Curriculum: D
)D E
.E F
WhereF K
(K L
proL O
=>P R
proS V
.V W
CurriculumIdW c
==d f
idg i
)i j
.j k
ToListk q
(q r
)r s
;s t
return 
View 
( 
	listCombo !
)! "
;" #
} 	
public   
async   
Task   
<   
IActionResult   '
>  ' (
Details  ) 0
(  0 1
int  1 4
?  4 5
id  6 8
)  8 9
{!! 	
Combo"" 
combsub"" 
="" 
_context"" $
.""$ %
Combo""% *
.""* +
FirstOrDefault""+ 9
(""9 :
p"": ;
=>""< >
p""? @
.""@ A
ComboId""A H
==""I K
id""L N
)""N O
;""O P
ViewBag## 
.## 
Combosub## 
=## 
combsub## &
;##& '
var$$ 
listSubject$$ 
=$$ 
_context$$ &
.$$& '
Combo_Subject$$' 4
.$$4 5
Include$$5 <
($$< =
a$$= >
=>$$? A
a$$B C
.$$C D
Subject$$D K
)$$K L
.$$L M
Include$$M T
($$T U
b$$U V
=>$$W Y
b$$Z [
.$$[ \
Combo$$\ a
)$$a b
.$$b c
Where$$c h
($$h i
pro$$i l
=>$$m o
pro$$p s
.$$s t
ComboId$$t {
==$$| ~
id	$$ Å
)
$$Å Ç
.
$$Ç É
ToList
$$É â
(
$$â ä
)
$$ä ã
;
$$ã å
return%% 
View%% 
(%% 
listSubject%% #
)%%# $
;%%$ %
}&& 	
public)) 
IActionResult)) 
Create)) #
())# $
string))$ *
id))+ -
)))- .
{** 	
ViewData++ 
[++ 
$str++ #
]++# $
=++% &
id++' )
;++) *
return,, 
View,, 
(,, 
),, 
;,, 
}-- 	
[22 	
HttpPost22	 
]22 
[33 	$
ValidateAntiForgeryToken33	 !
]33! "
public44 
async44 
Task44 
<44 
IActionResult44 '
>44' (
Create44) /
(44/ 0
[440 1
Bind441 5
(445 6
$str446 m
)44m n
]44n o
Combo44p u
combo44v {
)44{ |
{55 	
if66 
(66 

ModelState66 
.66 
IsValid66 "
)66" #
{77 
Combo88 
checkId88 
=88 
_context88  (
.88( )
Combo88) .
.88. /
Include88/ 6
(886 7
p887 8
=>889 ;
p88< =
.88= >

Curriculum88> H
)88H I
.88I J
FirstOrDefault88J X
(88X Y
p88Y Z
=>88[ ]
p88^ _
.88_ `
ComboNameEn88` k
.88k l
Equals88l r
(88r s
combo88s x
.88x y
ComboNameEn	88y Ñ
.
88Ñ Ö
Trim
88Ö â
(
88â ä
)
88ä ã
)
88ã å
)
88å ç
;
88ç é
if99 
(99 
checkId99 
==99 
null99 #
)99# $
{:: 
_context;; 
.;; 
Add;;  
(;;  !
combo;;! &
);;& '
;;;' (
await<< 
_context<< "
.<<" #
SaveChangesAsync<<# 3
(<<3 4
)<<4 5
;<<5 6
return>> 
new>> 
RedirectResult>> -
(>>- .
url>>. 1
:>>1 2
$str>>3 G
+>>H I
combo>>J O
.>>O P
CurriculumId>>P \
,>>\ ]
	permanent>>^ g
:>>g h
true>>i m
,>>m n
preserveMethod>>o }
:>>} ~
true	>> É
)
>>É Ñ
;
>>Ñ Ö
}?? 
else@@ 
{AA 
TempDataBB 
[BB 
$strBB $
]BB$ %
=BB& '
$strBB( N
;BBN O
}CC 
}DD 
ViewDataEE 
[EE 
$strEE #
]EE# $
=EE% &
comboEE' ,
.EE, -
CurriculumIdEE- 9
;EE9 :
returnFF 
ViewFF 
(FF 
comboFF 
)FF 
;FF 
}GG 	
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
IActionResultJJ '
>JJ' (
EditJJ) -
(JJ- .
intJJ. 1
?JJ1 2
idJJ3 5
)JJ5 6
{KK 	
ifLL 
(LL 
idLL 
==LL 
nullLL 
||LL 
_contextLL &
.LL& '
ComboLL' ,
==LL- /
nullLL0 4
)LL4 5
{MM 
returnNN 
NotFoundNN 
(NN  
)NN  !
;NN! "
}OO 
varQQ 
comboQQ 
=QQ 
awaitQQ 
_contextQQ &
.QQ& '
ComboQQ' ,
.QQ, -
	FindAsyncQQ- 6
(QQ6 7
idQQ7 9
)QQ9 :
;QQ: ;
ifRR 
(RR 
comboRR 
==RR 
nullRR 
)RR 
{SS 
returnTT 
NotFoundTT 
(TT  
)TT  !
;TT! "
}UU 
ViewDataVV 
[VV 
$strVV #
]VV# $
=VV% &
comboVV' ,
.VV, -
CurriculumIdVV- 9
;VV9 :
returnWW 
ViewWW 
(WW 
comboWW 
)WW 
;WW 
}XX 	
[]] 	
HttpPost]]	 
]]] 
[^^ 	$
ValidateAntiForgeryToken^^	 !
]^^! "
public__ 
async__ 
Task__ 
<__ 
IActionResult__ '
>__' (
Edit__) -
(__- .
[__/ 0
Bind__0 4
(__4 5
$str__5 l
)__l m
]__m n
Combo__o t
combo__u z
)__z {
{`` 	
ifbb 
(bb 

ModelStatebb 
.bb 
IsValidbb "
)bb" #
{cc 
trydd 
{ee 
_contextff 
.ff 
Updateff #
(ff# $
comboff$ )
)ff) *
;ff* +
awaitgg 
_contextgg "
.gg" #
SaveChangesAsyncgg# 3
(gg3 4
)gg4 5
;gg5 6
}hh 
catchii 
(ii (
DbUpdateConcurrencyExceptionii 3
)ii3 4
{jj 
ifkk 
(kk 
!kk 
ComboExistskk $
(kk$ %
combokk% *
.kk* +
ComboIdkk+ 2
)kk2 3
)kk3 4
{ll 
returnmm 
NotFoundmm '
(mm' (
)mm( )
;mm) *
}nn 
elseoo 
{pp 
throwqq 
;qq 
}rr 
}ss 
returntt 
newtt 
RedirectResulttt )
(tt) *
urltt* -
:tt- .
$strtt/ C
+ttD E
combottF K
.ttK L
CurriculumIdttL X
,ttX Y
	permanentttZ c
:ttc d
truette i
,tti j
preserveMethodttk y
:tty z
truett{ 
)	tt Ä
;
ttÄ Å
}uu 
ViewDatavv 
[vv 
$strvv #
]vv# $
=vv% &
newvv' *

SelectListvv+ 5
(vv5 6
_contextvv6 >
.vv> ?

Curriculumvv? I
,vvI J
$strvvK Y
,vvY Z
$strvv[ k
,vvk l
combovvm r
.vvr s
CurriculumIdvvs 
)	vv Ä
;
vvÄ Å
returnww 
Viewww 
(ww 
comboww 
)ww 
;ww 
}xx 	
public{{ 
async{{ 
Task{{ 
<{{ 
IActionResult{{ '
>{{' (
Delete{{) /
({{/ 0
int{{0 3
?{{3 4
id{{5 7
){{7 8
{|| 	
if}} 
(}} 
id}} 
==}} 
null}} 
||}} 
_context}} &
.}}& '
Combo}}' ,
==}}- /
null}}0 4
)}}4 5
{~~ 
return 
NotFound 
(  
)  !
;! "
}
ÄÄ 
var
ÅÅ 
combo
ÅÅ 
=
ÅÅ 
await
ÅÅ 
_context
ÅÅ &
.
ÅÅ& '
Combo
ÅÅ' ,
.
ÇÇ 
Include
ÇÇ 
(
ÇÇ 
c
ÇÇ 
=>
ÇÇ 
c
ÇÇ 
.
ÇÇ  

Curriculum
ÇÇ  *
)
ÇÇ* +
.
ÉÉ !
FirstOrDefaultAsync
ÉÉ $
(
ÉÉ$ %
m
ÉÉ% &
=>
ÉÉ' )
m
ÉÉ* +
.
ÉÉ+ ,
ComboId
ÉÉ, 3
==
ÉÉ4 6
id
ÉÉ7 9
)
ÉÉ9 :
;
ÉÉ: ;
if
ÑÑ 
(
ÑÑ 
combo
ÑÑ 
==
ÑÑ 
null
ÑÑ 
)
ÑÑ 
{
ÖÖ 
return
ÜÜ 
NotFound
ÜÜ 
(
ÜÜ  
)
ÜÜ  !
;
ÜÜ! "
}
áá 
return
ââ 
View
ââ 
(
ââ 
combo
ââ 
)
ââ 
;
ââ 
}
ää 	
[
çç 	
HttpPost
çç	 
,
çç 

ActionName
çç 
(
çç 
$str
çç &
)
çç& '
]
çç' (
[
éé 	&
ValidateAntiForgeryToken
éé	 !
]
éé! "
public
èè 
async
èè 
Task
èè 
<
èè 
IActionResult
èè '
>
èè' (
DeleteConfirmed
èè) 8
(
èè8 9
int
èè9 <
id
èè= ?
)
èè? @
{
êê 	
if
ëë 
(
ëë 
_context
ëë 
.
ëë 
Combo
ëë 
==
ëë !
null
ëë" &
)
ëë& '
{
íí 
return
ìì 
Problem
ìì 
(
ìì 
$str
ìì J
)
ììJ K
;
ììK L
}
îî 
var
ïï 
combo
ïï 
=
ïï 
await
ïï 
_context
ïï &
.
ïï& '
Combo
ïï' ,
.
ïï, -
	FindAsync
ïï- 6
(
ïï6 7
id
ïï7 9
)
ïï9 :
;
ïï: ;
var
ññ 
comboS
ññ 
=
ññ 
_context
ññ !
.
ññ! "
Combo_Subject
ññ" /
.
ññ/ 0
Where
ññ0 5
(
ññ5 6
p
ññ6 7
=>
ññ8 :
p
ññ; <
.
ññ< =
ComboId
ññ= D
==
ññE G
id
ññH J
)
ññJ K
.
ññK L
ToList
ññL R
(
ññR S
)
ññS T
;
ññT U
_context
óó 
.
óó 
Combo_Subject
óó #
.
óó# $
RemoveRange
óó$ /
(
óó/ 0
comboS
óó0 6
)
óó6 7
;
óó7 8
if
òò 
(
òò 
combo
òò 
!=
òò 
null
òò 
)
òò 
{
ôô 
_context
öö 
.
öö 
Combo
öö 
.
öö 
Remove
öö %
(
öö% &
combo
öö& +
)
öö+ ,
;
öö, -
await
õõ 
_context
õõ 
.
õõ 
SaveChangesAsync
õõ /
(
õõ/ 0
)
õõ0 1
;
õõ1 2
}
úú 
return
ùù 
new
ùù 
RedirectResult
ùù %
(
ùù% &
url
ùù& )
:
ùù) *
$str
ùù+ ?
+
ùù@ A
combo
ùùB G
.
ùùG H
CurriculumId
ùùH T
,
ùùT U
	permanent
ùùV _
:
ùù_ `
true
ùùa e
,
ùùe f
preserveMethod
ùùg u
:
ùùu v
true
ùùw {
)
ùù{ |
;
ùù| }
}
ûû 	
public
üü 
IActionResult
üü 

AddSubject
üü '
(
üü' (
)
üü( )
{
†† 	
ViewData
°° 
[
°° 
$str
°° 
]
°° 
=
°°  !
new
°°" %

SelectList
°°& 0
(
°°0 1
_context
°°1 9
.
°°9 :
Combo
°°: ?
,
°°? @
$str
°°A J
,
°°J K
$str
°°L U
)
°°U V
;
°°V W
ViewData
¢¢ 
[
¢¢ 
$str
¢¢ "
]
¢¢" #
=
¢¢$ %
new
¢¢& )

SelectList
¢¢* 4
(
¢¢4 5
_context
¢¢5 =
.
¢¢= >
Subject
¢¢> E
,
¢¢E F
$str
¢¢G T
,
¢¢T U
$str
¢¢V c
)
¢¢c d
;
¢¢d e
return
££ 
View
££ 
(
££ 
)
££ 
;
££ 
}
§§ 	
[
©© 	
HttpPost
©©	 
]
©© 
[
™™ 	&
ValidateAntiForgeryToken
™™	 !
]
™™! "
public
´´ 
async
´´ 
Task
´´ 
<
´´ 
IActionResult
´´ '
>
´´' (

AddSubject
´´) 3
(
´´3 4
[
´´4 5
Bind
´´5 9
(
´´9 :
$str
´´: R
)
´´R S
]
´´S T
ComboSubject
´´U a
comboSubject
´´b n
)
´´n o
{
¨¨ 	
string
≠≠ 
add
≠≠ 
=
≠≠ 
Request
≠≠  
.
≠≠  !
Form
≠≠! %
[
≠≠% &
$str
≠≠& +
]
≠≠+ ,
;
≠≠, -
int
ÆÆ 
comboId
ÆÆ 
=
ÆÆ 
Convert
ÆÆ !
.
ÆÆ! "
ToInt32
ÆÆ" )
(
ÆÆ) *
Request
ÆÆ* 1
.
ÆÆ1 2
Form
ÆÆ2 6
[
ÆÆ6 7
$str
ÆÆ7 @
]
ÆÆ@ A
)
ÆÆA B
;
ÆÆB C
if
ØØ 
(
ØØ 
add
ØØ 
!=
ØØ 
null
ØØ 
&&
ØØ 
!
ØØ  
add
ØØ  #
.
ØØ# $
Trim
ØØ$ (
(
ØØ( )
)
ØØ) *
.
ØØ* +
Equals
ØØ+ 1
(
ØØ1 2
$str
ØØ2 4
)
ØØ4 5
)
ØØ5 6
{
∞∞ 
Subject
±± 
sj
±± 
=
±± 
_context
±± %
.
±±% &
Subject
±±& -
.
±±- .
Include
±±. 5
(
±±5 6
p
±±6 7
=>
±±8 :
p
±±; <
.
±±< =
Status
±±= C
)
±±C D
.
±±D E
FirstOrDefault
±±E S
(
±±S T
pro
±±T W
=>
±±X Z
pro
±±[ ^
.
±±^ _
SubjectCode
±±_ j
.
±±j k
Equals
±±k q
(
±±q r
add
±±r u
.
±±u v
Trim
±±v z
(
±±z {
)
±±{ |
)
±±| }
)
±±} ~
;
±±~ 
if
≤≤ 
(
≤≤ 
sj
≤≤ 
!=
≤≤ 
null
≤≤ 
)
≤≤ 
{
≥≥ 
var
µµ 
check
µµ 
=
µµ 
_context
µµ  (
.
µµ( )
Combo_Subject
µµ) 6
.
µµ6 7
Where
µµ7 <
(
µµ< =
p
µµ= >
=>
µµ? A
p
µµB C
.
µµC D
ComboId
µµD K
==
µµL N
comboId
µµO V
)
µµV W
.
µµW X
ToList
µµX ^
(
µµ^ _
)
µµ_ `
;
µµ` a
ComboSubject
∂∂  
check_element
∂∂! .
=
∂∂/ 0
(
∂∂1 2
from
∂∂2 6
element
∂∂7 >
in
∂∂? A
check
∂∂B G
where
∑∑7 <
element
∑∑= D
.
∑∑D E
SubjectCode
∑∑E P
.
∑∑P Q
Trim
∑∑Q U
(
∑∑U V
)
∑∑V W
.
∑∑W X
Equals
∑∑X ^
(
∑∑^ _
sj
∑∑_ a
.
∑∑a b
SubjectCode
∑∑b m
.
∑∑m n
Trim
∑∑n r
(
∑∑r s
)
∑∑s t
)
∑∑t u
select
∏∏7 =
element
∏∏> E
)
∏∏E F
.
∏∏F G
FirstOrDefault
∏∏G U
(
∏∏U V
)
∏∏V W
;
∏∏W X
if
ππ 
(
ππ 
check_element
ππ %
==
ππ& (
null
ππ) -
)
ππ- .
{
∫∫ 
ComboSubject
ªª $
cu_sub
ªª% +
=
ªª, -
new
ªª. 1
ComboSubject
ªª2 >
(
ªª> ?
)
ªª? @
;
ªª@ A
cu_sub
ºº 
.
ºº 
SubjectCode
ºº *
=
ºº+ ,
sj
ºº- /
.
ºº/ 0
SubjectCode
ºº0 ;
;
ºº; <
cu_sub
ΩΩ 
.
ΩΩ 
ComboId
ΩΩ &
=
ΩΩ' (
comboId
ΩΩ) 0
;
ΩΩ0 1
_context
ææ  
.
ææ  !
Combo_Subject
ææ! .
.
ææ. /
Add
ææ/ 2
(
ææ2 3
cu_sub
ææ3 9
)
ææ9 :
;
ææ: ;
_context
øø  
.
øø  !
SaveChanges
øø! ,
(
øø, -
)
øø- .
;
øø. /
}
¿¿ 
else
¡¡ 
{
¬¬ 
return
√√ 
new
√√ "
RedirectResult
√√# 1
(
√√1 2
url
√√2 5
:
√√5 6
$str
√√7 M
+
√√N O
comboId
√√P W
,
√√W X
	permanent
√√Y b
:
√√b c
true
√√d h
,
√√h i
preserveMethod
√√j x
:
√√x y
true
√√z ~
)
√√~ 
;√√ Ä
}
ƒƒ 
}
≈≈ 
else
∆∆ 
{
«« 
return
»» 
new
»» 
RedirectResult
»» -
(
»»- .
url
»». 1
:
»»1 2
$str
»»3 I
+
»»J K
comboId
»»L S
,
»»S T
	permanent
»»U ^
:
»»^ _
true
»»` d
,
»»d e
preserveMethod
»»f t
:
»»t u
true
»»v z
)
»»z {
;
»»{ |
}
…… 
}
   
return
ÀÀ 
new
ÀÀ 
RedirectResult
ÀÀ %
(
ÀÀ% &
url
ÀÀ& )
:
ÀÀ) *
$str
ÀÀ+ A
+
ÀÀB C
comboId
ÀÀD K
,
ÀÀK L
	permanent
ÀÀM V
:
ÀÀV W
true
ÀÀX \
,
ÀÀ\ ]
preserveMethod
ÀÀ^ l
:
ÀÀl m
true
ÀÀn r
)
ÀÀr s
;
ÀÀs t
}
ÃÃ 	
public
ÉÉ 
async
ÉÉ 
Task
ÉÉ 
<
ÉÉ 
IActionResult
ÉÉ '
>
ÉÉ' (
DeleteSubject
ÉÉ) 6
(
ÉÉ6 7
int
ÉÉ7 :
?
ÉÉ: ;
id
ÉÉ< >
)
ÉÉ> ?
{
ÑÑ 	
if
ÖÖ 
(
ÖÖ 
id
ÖÖ 
==
ÖÖ 
null
ÖÖ 
||
ÖÖ 
_context
ÖÖ &
.
ÖÖ& '
Combo_Subject
ÖÖ' 4
==
ÖÖ5 7
null
ÖÖ8 <
)
ÖÖ< =
{
ÜÜ 
return
áá 
NotFound
áá 
(
áá  
)
áá  !
;
áá! "
}
àà 
var
ää 
comboSubject
ää 
=
ää 
await
ää $
_context
ää% -
.
ää- .
Combo_Subject
ää. ;
.
ãã 
Include
ãã 
(
ãã 
c
ãã 
=>
ãã 
c
ãã 
.
ãã  
Combo
ãã  %
)
ãã% &
.
åå 
Include
åå 
(
åå 
c
åå 
=>
åå 
c
åå 
.
åå  
Subject
åå  '
)
åå' (
.
çç !
FirstOrDefaultAsync
çç $
(
çç$ %
m
çç% &
=>
çç' )
m
çç* +
.
çç+ ,
id
çç, .
==
çç/ 1
id
çç2 4
)
çç4 5
;
çç5 6
if
éé 
(
éé 
comboSubject
éé 
==
éé 
null
éé  $
)
éé$ %
{
èè 
return
êê 
NotFound
êê 
(
êê  
)
êê  !
;
êê! "
}
ëë 
return
ìì 
View
ìì 
(
ìì 
comboSubject
ìì $
)
ìì$ %
;
ìì% &
}
îî 	
[
óó 	
HttpPost
óó	 
,
óó 

ActionName
óó 
(
óó 
$str
óó -
)
óó- .
]
óó. /
[
òò 	&
ValidateAntiForgeryToken
òò	 !
]
òò! "
public
ôô 
async
ôô 
Task
ôô 
<
ôô 
IActionResult
ôô '
>
ôô' ($
DeleteSubjectConfirmed
ôô) ?
(
ôô? @
int
ôô@ C
id
ôôD F
)
ôôF G
{
öö 	
if
õõ 
(
õõ 
_context
õõ 
.
õõ 
Combo_Subject
õõ &
==
õõ' )
null
õõ* .
)
õõ. /
{
úú 
return
ùù 
Problem
ùù 
(
ùù 
$str
ùù R
)
ùùR S
;
ùùS T
}
ûû 
var
üü 
comboSubject
üü 
=
üü 
await
üü $
_context
üü% -
.
üü- .
Combo_Subject
üü. ;
.
üü; <
	FindAsync
üü< E
(
üüE F
id
üüF H
)
üüH I
;
üüI J
if
†† 
(
†† 
comboSubject
†† 
!=
†† 
null
††  $
)
††$ %
{
°° 
_context
¢¢ 
.
¢¢ 
Combo_Subject
¢¢ &
.
¢¢& '
Remove
¢¢' -
(
¢¢- .
comboSubject
¢¢. :
)
¢¢: ;
;
¢¢; <
}
££ 
await
•• 
_context
•• 
.
•• 
SaveChangesAsync
•• +
(
••+ ,
)
••, -
;
••- .
return
¶¶ 
new
¶¶ 
RedirectResult
¶¶ %
(
¶¶% &
url
¶¶& )
:
¶¶) *
$str
¶¶+ A
+
¶¶B C
comboSubject
¶¶D P
.
¶¶P Q
id
¶¶Q S
,
¶¶S T
	permanent
¶¶U ^
:
¶¶^ _
true
¶¶` d
,
¶¶d e
preserveMethod
¶¶f t
:
¶¶t u
true
¶¶v z
)
¶¶z {
;
¶¶{ |
}
ßß 	
private
®® 
bool
®® 
ComboExists
®®  
(
®®  !
int
®®! $
id
®®% '
)
®®' (
{
©© 	
return
™™
 
(
™™ 
_context
™™ 
.
™™ 
Combo
™™  
?
™™  !
.
™™! "
Any
™™" %
(
™™% &
e
™™& '
=>
™™( *
e
™™+ ,
.
™™, -
ComboId
™™- 4
==
™™5 7
id
™™8 :
)
™™: ;
)
™™; <
.
™™< =
GetValueOrDefault
™™= N
(
™™N O
)
™™O P
;
™™P Q
}
´´ 	
}
¨¨ 
}≠≠ ºp
HD:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\ADMINComboSubjectsController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class (
ADMINComboSubjectsController -
:. /

Controller0 :
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public (
ADMINComboSubjectsController +
(+ ,
AppDbContext, 8
context9 @
)@ A
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
appDbContext 
= 
_context '
.' (
Combo_Subject( 5
.5 6
Include6 =
(= >
c> ?
=>@ B
cC D
.D E
ComboE J
)J K
.K L
IncludeL S
(S T
cT U
=>V X
cY Z
.Z [
Subject[ b
)b c
;c d
return 
View 
( 
await 
appDbContext *
.* +
ToListAsync+ 6
(6 7
)7 8
)8 9
;9 :
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{ 	
if   
(   
id   
==   
null   
||   
_context   &
.  & '
Combo_Subject  ' 4
==  5 7
null  8 <
)  < =
{!! 
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
var%% 
comboSubject%% 
=%% 
await%% $
_context%%% -
.%%- .
Combo_Subject%%. ;
.&& 
Include&& 
(&& 
c&& 
=>&& 
c&& 
.&&  
Combo&&  %
)&&% &
.'' 
Include'' 
('' 
c'' 
=>'' 
c'' 
.''  
Subject''  '
)''' (
.(( 
FirstOrDefaultAsync(( $
((($ %
m((% &
=>((' )
m((* +
.((+ ,
id((, .
==((/ 1
id((2 4
)((4 5
;((5 6
if)) 
()) 
comboSubject)) 
==)) 
null))  $
)))$ %
{** 
return++ 
NotFound++ 
(++  
)++  !
;++! "
},, 
return.. 
View.. 
(.. 
comboSubject.. $
)..$ %
;..% &
}// 	
public22 
IActionResult22 
Create22 #
(22# $
)22$ %
{33 	
ViewData44 
[44 
$str44 
]44 
=44  !
new44" %

SelectList44& 0
(440 1
_context441 9
.449 :
Combo44: ?
,44? @
$str44A J
,44J K
$str44L U
)44U V
;44V W
ViewData55 
[55 
$str55 "
]55" #
=55$ %
new55& )

SelectList55* 4
(554 5
_context555 =
.55= >
Subject55> E
,55E F
$str55G T
,55T U
$str55V c
)55c d
;55d e
return66 
View66 
(66 
)66 
;66 
}77 	
[<< 	
HttpPost<<	 
]<< 
[== 	$
ValidateAntiForgeryToken==	 !
]==! "
public>> 
async>> 
Task>> 
<>> 
IActionResult>> '
>>>' (
Create>>) /
(>>/ 0
[>>0 1
Bind>>1 5
(>>5 6
$str>>6 N
)>>N O
]>>O P
ComboSubject>>Q ]
comboSubject>>^ j
)>>j k
{?? 	
if@@ 
(@@ 

ModelState@@ 
.@@ 
IsValid@@ "
)@@" #
{AA 
_contextBB 
.BB 
AddBB 
(BB 
comboSubjectBB )
)BB) *
;BB* +
awaitCC 
_contextCC 
.CC 
SaveChangesAsyncCC /
(CC/ 0
)CC0 1
;CC1 2
returnDD 
RedirectToActionDD '
(DD' (
nameofDD( .
(DD. /
IndexDD/ 4
)DD4 5
)DD5 6
;DD6 7
}EE 
ViewDataFF 
[FF 
$strFF 
]FF 
=FF  !
newFF" %

SelectListFF& 0
(FF0 1
_contextFF1 9
.FF9 :
ComboFF: ?
,FF? @
$strFFA J
,FFJ K
$strFFL U
,FFU V
comboSubjectFFW c
.FFc d
ComboIdFFd k
)FFk l
;FFl m
ViewDataGG 
[GG 
$strGG "
]GG" #
=GG$ %
newGG& )

SelectListGG* 4
(GG4 5
_contextGG5 =
.GG= >
SubjectGG> E
,GGE F
$strGGG T
,GGT U
$strGGV c
,GGc d
comboSubjectGGe q
.GGq r
SubjectCodeGGr }
)GG} ~
;GG~ 
returnHH 
ViewHH 
(HH 
comboSubjectHH $
)HH$ %
;HH% &
}II 	
publicLL 
asyncLL 
TaskLL 
<LL 
IActionResultLL '
>LL' (
EditLL) -
(LL- .
intLL. 1
?LL1 2
idLL3 5
)LL5 6
{MM 	
ifNN 
(NN 
idNN 
==NN 
nullNN 
||NN 
_contextNN &
.NN& '
Combo_SubjectNN' 4
==NN5 7
nullNN8 <
)NN< =
{OO 
returnPP 
NotFoundPP 
(PP  
)PP  !
;PP! "
}QQ 
varSS 
comboSubjectSS 
=SS 
awaitSS $
_contextSS% -
.SS- .
Combo_SubjectSS. ;
.SS; <
	FindAsyncSS< E
(SSE F
idSSF H
)SSH I
;SSI J
ifTT 
(TT 
comboSubjectTT 
==TT 
nullTT  $
)TT$ %
{UU 
returnVV 
NotFoundVV 
(VV  
)VV  !
;VV! "
}WW 
ViewDataXX 
[XX 
$strXX 
]XX 
=XX  !
newXX" %

SelectListXX& 0
(XX0 1
_contextXX1 9
.XX9 :
ComboXX: ?
,XX? @
$strXXA J
,XXJ K
$strXXL U
,XXU V
comboSubjectXXW c
.XXc d
ComboIdXXd k
)XXk l
;XXl m
ViewDataYY 
[YY 
$strYY "
]YY" #
=YY$ %
newYY& )

SelectListYY* 4
(YY4 5
_contextYY5 =
.YY= >
SubjectYY> E
,YYE F
$strYYG T
,YYT U
$strYYV c
,YYc d
comboSubjectYYe q
.YYq r
SubjectCodeYYr }
)YY} ~
;YY~ 
returnZZ 
ViewZZ 
(ZZ 
comboSubjectZZ $
)ZZ$ %
;ZZ% &
}[[ 	
[`` 	
HttpPost``	 
]`` 
[aa 	$
ValidateAntiForgeryTokenaa	 !
]aa! "
publicbb 
asyncbb 
Taskbb 
<bb 
IActionResultbb '
>bb' (
Editbb) -
(bb- .
intbb. 1
idbb2 4
,bb4 5
[bb6 7
Bindbb7 ;
(bb; <
$strbb< T
)bbT U
]bbU V
ComboSubjectbbW c
comboSubjectbbd p
)bbp q
{cc 	
ifdd 
(dd 
iddd 
!=dd 
comboSubjectdd "
.dd" #
iddd# %
)dd% &
{ee 
returnff 
NotFoundff 
(ff  
)ff  !
;ff! "
}gg 
ifii 
(ii 

ModelStateii 
.ii 
IsValidii "
)ii" #
{jj 
trykk 
{ll 
_contextmm 
.mm 
Updatemm #
(mm# $
comboSubjectmm$ 0
)mm0 1
;mm1 2
awaitnn 
_contextnn "
.nn" #
SaveChangesAsyncnn# 3
(nn3 4
)nn4 5
;nn5 6
}oo 
catchpp 
(pp (
DbUpdateConcurrencyExceptionpp 3
)pp3 4
{qq 
ifrr 
(rr 
!rr 
ComboSubjectExistsrr +
(rr+ ,
comboSubjectrr, 8
.rr8 9
idrr9 ;
)rr; <
)rr< =
{ss 
returntt 
NotFoundtt '
(tt' (
)tt( )
;tt) *
}uu 
elsevv 
{ww 
throwxx 
;xx 
}yy 
}zz 
return{{ 
RedirectToAction{{ '
({{' (
nameof{{( .
({{. /
Index{{/ 4
){{4 5
){{5 6
;{{6 7
}|| 
ViewData}} 
[}} 
$str}} 
]}} 
=}}  !
new}}" %

SelectList}}& 0
(}}0 1
_context}}1 9
.}}9 :
Combo}}: ?
,}}? @
$str}}A J
,}}J K
$str}}L U
,}}U V
comboSubject}}W c
.}}c d
ComboId}}d k
)}}k l
;}}l m
ViewData~~ 
[~~ 
$str~~ "
]~~" #
=~~$ %
new~~& )

SelectList~~* 4
(~~4 5
_context~~5 =
.~~= >
Subject~~> E
,~~E F
$str~~G T
,~~T U
$str~~V c
,~~c d
comboSubject~~e q
.~~q r
SubjectCode~~r }
)~~} ~
;~~~ 
return 
View 
( 
comboSubject $
)$ %
;% &
}
ÄÄ 	
public
ÉÉ 
async
ÉÉ 
Task
ÉÉ 
<
ÉÉ 
IActionResult
ÉÉ '
>
ÉÉ' (
Delete
ÉÉ) /
(
ÉÉ/ 0
int
ÉÉ0 3
?
ÉÉ3 4
id
ÉÉ5 7
)
ÉÉ7 8
{
ÑÑ 	
if
ÖÖ 
(
ÖÖ 
id
ÖÖ 
==
ÖÖ 
null
ÖÖ 
||
ÖÖ 
_context
ÖÖ &
.
ÖÖ& '
Combo_Subject
ÖÖ' 4
==
ÖÖ5 7
null
ÖÖ8 <
)
ÖÖ< =
{
ÜÜ 
return
áá 
NotFound
áá 
(
áá  
)
áá  !
;
áá! "
}
àà 
var
ää 
comboSubject
ää 
=
ää 
await
ää $
_context
ää% -
.
ää- .
Combo_Subject
ää. ;
.
ãã 
Include
ãã 
(
ãã 
c
ãã 
=>
ãã 
c
ãã 
.
ãã  
Combo
ãã  %
)
ãã% &
.
åå 
Include
åå 
(
åå 
c
åå 
=>
åå 
c
åå 
.
åå  
Subject
åå  '
)
åå' (
.
çç !
FirstOrDefaultAsync
çç $
(
çç$ %
m
çç% &
=>
çç' )
m
çç* +
.
çç+ ,
id
çç, .
==
çç/ 1
id
çç2 4
)
çç4 5
;
çç5 6
if
éé 
(
éé 
comboSubject
éé 
==
éé 
null
éé  $
)
éé$ %
{
èè 
return
êê 
NotFound
êê 
(
êê  
)
êê  !
;
êê! "
}
ëë 
return
ìì 
View
ìì 
(
ìì 
comboSubject
ìì $
)
ìì$ %
;
ìì% &
}
îî 	
[
óó 	
HttpPost
óó	 
,
óó 

ActionName
óó 
(
óó 
$str
óó &
)
óó& '
]
óó' (
[
òò 	&
ValidateAntiForgeryToken
òò	 !
]
òò! "
public
ôô 
async
ôô 
Task
ôô 
<
ôô 
IActionResult
ôô '
>
ôô' (
DeleteConfirmed
ôô) 8
(
ôô8 9
int
ôô9 <
id
ôô= ?
)
ôô? @
{
öö 	
if
õõ 
(
õõ 
_context
õõ 
.
õõ 
Combo_Subject
õõ &
==
õõ' )
null
õõ* .
)
õõ. /
{
úú 
return
ùù 
Problem
ùù 
(
ùù 
$str
ùù R
)
ùùR S
;
ùùS T
}
ûû 
var
üü 
comboSubject
üü 
=
üü 
await
üü $
_context
üü% -
.
üü- .
Combo_Subject
üü. ;
.
üü; <
	FindAsync
üü< E
(
üüE F
id
üüF H
)
üüH I
;
üüI J
if
†† 
(
†† 
comboSubject
†† 
!=
†† 
null
††  $
)
††$ %
{
°° 
_context
¢¢ 
.
¢¢ 
Combo_Subject
¢¢ &
.
¢¢& '
Remove
¢¢' -
(
¢¢- .
comboSubject
¢¢. :
)
¢¢: ;
;
¢¢; <
}
££ 
await
•• 
_context
•• 
.
•• 
SaveChangesAsync
•• +
(
••+ ,
)
••, -
;
••- .
return
¶¶ 
RedirectToAction
¶¶ #
(
¶¶# $
nameof
¶¶$ *
(
¶¶* +
Index
¶¶+ 0
)
¶¶0 1
)
¶¶1 2
;
¶¶2 3
}
ßß 	
private
©© 
bool
©©  
ComboSubjectExists
©© '
(
©©' (
int
©©( +
id
©©, .
)
©©. /
{
™™ 	
return
´´
 
(
´´ 
_context
´´ 
.
´´ 
Combo_Subject
´´ (
?
´´( )
.
´´) *
Any
´´* -
(
´´- .
e
´´. /
=>
´´0 2
e
´´3 4
.
´´4 5
id
´´5 7
==
´´8 :
id
´´; =
)
´´= >
)
´´> ?
.
´´? @
GetValueOrDefault
´´@ Q
(
´´Q R
)
´´R S
;
´´S T
}
¨¨ 	
}
≠≠ 
}ÆÆ ò1
;D:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\ADMINController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class 
ADMINController  
:! "

Controller# -
{		 
private

 
readonly

 
AppDbContext

 %
_context

& .
;

. /
private 
readonly  
IHttpContextAccessor -
	_Accessor. 7
;7 8
public 
ADMINController 
( 
AppDbContext +
context, 3
,3 4 
IHttpContextAccessor5 I
accessorJ R
)R S
{ 	
_context 
= 
context 
; 
	_Accessor 
= 
accessor  
;  !
} 	
public 
IActionResult 
	Dashboard &
(& '
)' (
{ 	
return 
View 
( 
) 
; 
} 	
public 
IActionResult 
Infor "
(" #
)# $
{ 	
string 
userName 
= 
	_Accessor %
.% &
HttpContext& 1
.1 2
Session2 9
.9 :
	GetString: C
(C D
$strD N
)N O
;O P
var 
Account 
= 
_context "
." #
Account# *
.* +
Include+ 2
(2 3
p3 4
=>5 7
p8 9
.9 :
Role: >
)> ?
.? @
FirstOrDefault@ N
(N O
proO R
=>S U
proV Y
.Y Z
UserNameZ b
.b c
Equalsc i
(i j
userNamej r
)r s
)s t
;t u
return 
View 
( 
Account 
)  
;  !
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Infor) .
(. /
Account/ 6
account7 >
)> ?
{ 	
var 
accountChange 
= 
new  #
Account$ +
(+ ,
), -
;- .
accountChange   
=   
_context   $
.  $ %
Account  % ,
.  , -
Include  - 4
(  4 5
p  5 6
=>  7 9
p  : ;
.  ; <
Role  < @
)  @ A
.  A B
FirstOrDefault  B P
(  P Q
pro  Q T
=>  U W
pro  X [
.  [ \
UserName  \ d
.  d e
Equals  e k
(  k l
account  l s
.  s t
UserName  t |
)  | }
)  } ~
;  ~ 
accountChange!! 
.!! 
UserName!! "
=!!" #
account!!# *
.!!* +
UserName!!+ 3
;!!3 4
accountChange"" 
."" 
Fullname"" "
=""" #
account""# *
.""* +
Fullname""+ 3
;""3 4
accountChange## 
.## 
Address## !
=##! "
account##" )
.##) *
Address##* 1
;##1 2
accountChange$$ 
.$$ 
Phone$$ 
=$$  
account$$  '
.$$' (
Phone$$( -
;$$- .
accountChange%% 
.%% 
Gender%%  
=%%  !
account%%! (
.%%( )
Gender%%) /
;%%/ 0
accountChange&& 
.&& 
Birthday&& "
=&&" #
account&&# *
.&&* +
Birthday&&+ 3
;&&3 4
_context'' 
.'' 
Account'' 
.'' 
Update'' "
(''" #
accountChange''# 0
)''0 1
;''1 2
_context(( 
.(( 
SaveChanges(( 
(((  
)((  !
;((! "
return)) 
RedirectToAction)) #
())# $
$str))$ +
)))+ ,
;)), -
}** 	
public,, 
IActionResult,, 
ListOfCurriculum,, -
(,,- .
),,. /
{-- 	
var.. 
listCurriculum.. 
=..  
_context..! )
...) *

Curriculum..* 4
...4 5
Include..5 <
(..< =
p..= >
=>..? A
p..B C
...C D
Decision..D L
)..L M
...M N
ToList..N T
(..T U
)..U V
;..V W
return// 
View// 
(// 
listCurriculum// &
)//& '
;//' (
}00 	
public11 
IActionResult11 
ListOfCombo11 (
(11( )
)11) *
{22 	
var33 
	listCombo33 
=33 
_context33 $
.33$ %
Combo33% *
.33* +
Include33+ 2
(332 3
a333 4
=>335 7
a338 9
.339 :

Curriculum33: D
)33D E
.33E F
ToList33F L
(33L M
)33M N
;33N O
return44 
View44 
(44 
	listCombo44 !
)44! "
;44" #
}55 	
public66 
IActionResult66 
ComboSubject66 )
(66) *
)66* +
{77 	
var88 
ComboSubject88 
=88 
_context88 '
.88' (
Combo_Subject88( 5
.885 6
Include886 =
(88= >
a88> ?
=>88@ B
a88C D
.88D E
Subject88E L
)88L M
.88M N
Include88N U
(88U V
p88V W
=>88W Y
p88Z [
.88[ \
Combo88\ a
)88a b
.88b c
ToList88c i
(88i j
)88j k
;88k l
return99 
View99 
(99 
ComboSubject99 $
)99$ %
;99% &
}:: 	
}<< 
}== ™…
DD:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\ADMINCurriculaController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class $
ADMINCurriculaController )
:* +

Controller, 6
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public $
ADMINCurriculaController '
(' (
AppDbContext( 4
context5 <
)< =
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
IEnumerable 
< 

Curriculum "
>" #
appDbContext$ 0
=1 2
_context3 ;
.; <

Curriculum< F
.F G
IncludeG N
(N O
cO P
=>Q S
cT U
.U V
DecisionV ^
)^ _
._ `
ToList` f
(f g
)g h
;h i
return 
View 
( 
appDbContext $
)$ %
;% &
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{ 	
if   
(   
id   
==   
null   
||   
_context   &
.  & '

Curriculum  ' 1
==  2 4
null  5 9
)  9 :
{!! 
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
var%% 

curriculum%% 
=%% 
await%% "
_context%%# +
.%%+ ,

Curriculum%%, 6
.&& 
Include&& 
(&& 
c&& 
=>&& 
c&& 
.&&  
Decision&&  (
)&&( )
.'' 
FirstOrDefaultAsync'' $
(''$ %
m''% &
=>''' )
m''* +
.''+ ,
CurriculumId'', 8
==''9 ;
id''< >
)''> ?
;''? @
var(( 
	curri_sub(( 
=(( 
_context(( #
.((# $
Curriculum_Subject(($ 6
.((6 7
Include((7 >
(((> ?
p((? @
=>((A C
p((D E
.((E F
Subject((F M
)((M N
.((N O
Where((O T
(((T U
pro((U X
=>((Y [
pro((\ _
.((_ `
CurriculumId((` l
==((l n
id((n p
)((p q
.((q r
OrderBy((r y
(((y z
p((z {
=>(({ }
p((} ~
.((~ 
Semester	(( á
)
((á à
.
((à â
ToList
((â è
(
((è ê
)
((ê ë
;
((ë í
ViewBag)) 
.)) 
	Curri_sub)) 
=)) 
	curri_sub)) '
;))' (
if** 
(** 

curriculum** 
==** 
null** "
)**" #
{++ 
return,, 
NotFound,, 
(,,  
),,  !
;,,! "
}-- 
return// 
View// 
(// 

curriculum// "
)//" #
;//# $
}00 	
public33 
IActionResult33 
Create33 #
(33# $
)33$ %
{44 	
ViewData55 
[55 
$str55 !
]55! "
=55# $
new55% (

SelectList55) 3
(553 4
_context554 <
.55< =
Decision55= E
,55E F
$str55G S
,55S T
$str55U a
)55a b
;55b c
return66 
View66 
(66 
)66 
;66 
}77 	
[<< 	
HttpPost<<	 
]<< 
[== 	$
ValidateAntiForgeryToken==	 !
]==! "
public>> 
async>> 
Task>> 
<>> 
IActionResult>> '
>>>' (
Create>>) /
(>>/ 0
[>>0 1
Bind>>1 5
(>>5 6
$str	>>6 å
)
>>å ç
]
>>ç é

Curriculum
>>è ô

curriculum
>>ö §
)
>>§ •
{?? 	
ifAA 
(AA 

ModelStateAA 
.AA 
IsValidAA "
)AA" #
{BB 

CurriculumCC 
	checkCodeCC $
=CC$ %
awaitCC& +
_contextCC, 4
.CC4 5

CurriculumCC5 ?
.CC? @
IncludeCC@ G
(CCG H
pCCH I
=>CCJ L
pCCM N
.CCN O
DecisionCCO W
)CCW X
.CCX Y
FirstOrDefaultAsyncCCY l
(CCl m
proCCm p
=>CCq s
proCCt w
.CCw x
CurriculumCode	CCx Ü
.
CCÜ á
Equals
CCá ç
(
CCç é

curriculum
CCé ò
.
CCò ô
CurriculumCode
CCô ß
)
CCß ®
)
CC® ©
;
CC© ™
ifDD 
(DD 
	checkCodeDD 
==DD  
nullDD! %
)DD% &
{EE 
_contextFF 
.FF 
AddFF  
(FF  !

curriculumFF! +
)FF+ ,
;FF, -
awaitGG 
_contextGG "
.GG" #
SaveChangesAsyncGG# 3
(GG3 4
)GG4 5
;GG5 6
returnHH 
RedirectToActionHH +
(HH+ ,
nameofHH, 2
(HH2 3
IndexHH3 8
)HH8 9
)HH9 :
;HH: ;
}II 
elseJJ 
{KK 
TempDataLL 
[LL 
$strLL $
]LL$ %
=LL& '
$strLL( N
;LLN O
}MM 
}NN 
ViewDataOO 
[OO 
$strOO !
]OO! "
=OO# $
newOO% (

SelectListOO) 3
(OO3 4
_contextOO4 <
.OO< =
DecisionOO= E
,OOE F
$strOOG S
,OOS T
$strOOU a
,OOa b

curriculumOOc m
.OOm n

DecisionNoOOn x
)OOx y
;OOy z
returnPP 
ViewPP 
(PP 

curriculumPP "
)PP" #
;PP# $
}QQ 	
publicTT 
asyncTT 
TaskTT 
<TT 
IActionResultTT '
>TT' (
EditTT) -
(TT- .
intTT. 1
?TT1 2
idTT3 5
)TT5 6
{UU 	
ifVV 
(VV 
idVV 
==VV 
nullVV 
||VV 
_contextVV &
.VV& '

CurriculumVV' 1
==VV2 4
nullVV5 9
)VV9 :
{WW 
returnXX 
NotFoundXX 
(XX  
)XX  !
;XX! "
}YY 
var[[ 

curriculum[[ 
=[[ 
await[[ "
_context[[# +
.[[+ ,

Curriculum[[, 6
.[[6 7
	FindAsync[[7 @
([[@ A
id[[A C
)[[C D
;[[D E
if\\ 
(\\ 

curriculum\\ 
==\\ 
null\\ "
)\\" #
{]] 
return^^ 
NotFound^^ 
(^^  
)^^  !
;^^! "
}__ 
ViewData`` 
[`` 
$str`` !
]``! "
=``# $
new``% (

SelectList``) 3
(``3 4
_context``4 <
.``< =
Decision``= E
,``E F
$str``G S
,``S T
$str``U a
,``a b

curriculum``c m
.``m n

DecisionNo``n x
)``x y
;``y z
returnaa 
Viewaa 
(aa 

curriculumaa "
)aa" #
;aa# $
}bb 	
[gg 	
HttpPostgg	 
]gg 
[hh 	$
ValidateAntiForgeryTokenhh	 !
]hh! "
publicii 
asyncii 
Taskii 
<ii 
IActionResultii '
>ii' (
Editii) -
(ii- .
intii. 1
idii2 4
,ii4 5
[ii6 7
Bindii7 ;
(ii; <
$str	ii< í
)
iií ì
]
iiì î

Curriculum
iiï ü

curriculum
ii† ™
)
ii™ ´
{jj 	
ifkk 
(kk 
idkk 
!=kk 

curriculumkk  
.kk  !
CurriculumIdkk! -
)kk- .
{ll 
returnmm 
NotFoundmm 
(mm  
)mm  !
;mm! "
}nn 
ifpp 
(pp 

ModelStatepp 
.pp 
IsValidpp "
)pp" #
{qq 
tryrr 
{ss 
_contexttt 
.tt 
Updatett #
(tt# $

curriculumtt$ .
)tt. /
;tt/ 0
awaituu 
_contextuu "
.uu" #
SaveChangesAsyncuu# 3
(uu3 4
)uu4 5
;uu5 6
}vv 
catchww 
(ww (
DbUpdateConcurrencyExceptionww 3
)ww3 4
{xx 
ifyy 
(yy 
!yy 
CurriculumExistsyy )
(yy) *

curriculumyy* 4
.yy4 5
CurriculumIdyy5 A
)yyA B
)yyB C
{zz 
return{{ 
NotFound{{ '
({{' (
){{( )
;{{) *
}|| 
else}} 
{~~ 
throw 
; 
}
ÄÄ 
}
ÅÅ 
return
ÇÇ 
RedirectToAction
ÇÇ '
(
ÇÇ' (
nameof
ÇÇ( .
(
ÇÇ. /
Index
ÇÇ/ 4
)
ÇÇ4 5
)
ÇÇ5 6
;
ÇÇ6 7
}
ÉÉ 
ViewData
ÑÑ 
[
ÑÑ 
$str
ÑÑ !
]
ÑÑ! "
=
ÑÑ# $
new
ÑÑ% (

SelectList
ÑÑ) 3
(
ÑÑ3 4
_context
ÑÑ4 <
.
ÑÑ< =
Decision
ÑÑ= E
,
ÑÑE F
$str
ÑÑG S
,
ÑÑS T
$str
ÑÑU a
,
ÑÑa b

curriculum
ÑÑc m
.
ÑÑm n

DecisionNo
ÑÑn x
)
ÑÑx y
;
ÑÑy z
return
ÖÖ 
View
ÖÖ 
(
ÖÖ 

curriculum
ÖÖ "
)
ÖÖ" #
;
ÖÖ# $
}
ÜÜ 	
public
ââ 
async
ââ 
Task
ââ 
<
ââ 
IActionResult
ââ '
>
ââ' (
Delete
ââ) /
(
ââ/ 0
int
ââ0 3
?
ââ3 4
id
ââ5 7
)
ââ7 8
{
ää 	
if
ãã 
(
ãã 
id
ãã 
==
ãã 
null
ãã 
||
ãã 
_context
ãã &
.
ãã& '

Curriculum
ãã' 1
==
ãã2 4
null
ãã5 9
)
ãã9 :
{
åå 
return
çç 
NotFound
çç 
(
çç  
)
çç  !
;
çç! "
}
éé 
var
êê 

curriculum
êê 
=
êê 
await
êê "
_context
êê# +
.
êê+ ,

Curriculum
êê, 6
.
ëë 
Include
ëë 
(
ëë 
c
ëë 
=>
ëë 
c
ëë 
.
ëë  
Decision
ëë  (
)
ëë( )
.
íí !
FirstOrDefaultAsync
íí $
(
íí$ %
m
íí% &
=>
íí' )
m
íí* +
.
íí+ ,
CurriculumId
íí, 8
==
íí9 ;
id
íí< >
)
íí> ?
;
íí? @
if
ìì 
(
ìì 

curriculum
ìì 
==
ìì 
null
ìì "
)
ìì" #
{
îî 
return
ïï 
NotFound
ïï 
(
ïï  
)
ïï  !
;
ïï! "
}
ññ 
return
óó 
View
óó 
(
óó 

curriculum
óó "
)
óó" #
;
óó# $
}
òò 	
[
õõ 	
HttpPost
õõ	 
,
õõ 

ActionName
õõ 
(
õõ 
$str
õõ &
)
õõ& '
]
õõ' (
[
úú 	&
ValidateAntiForgeryToken
úú	 !
]
úú! "
public
ùù 
async
ùù 
Task
ùù 
<
ùù 
IActionResult
ùù '
>
ùù' (
DeleteConfirmed
ùù) 8
(
ùù8 9
int
ùù9 <
id
ùù= ?
)
ùù? @
{
ûû 	
if
üü 
(
üü 
_context
üü 
.
üü 

Curriculum
üü #
==
üü$ &
null
üü' +
)
üü+ ,
{
†† 
return
°° 
Problem
°° 
(
°° 
$str
°° O
)
°°O P
;
°°P Q
}
¢¢ 
var
§§ 

curriculum
§§ 
=
§§ 
await
§§ "
_context
§§# +
.
§§+ ,

Curriculum
§§, 6
.
§§6 7
	FindAsync
§§7 @
(
§§@ A
id
§§A C
)
§§C D
;
§§D E
var
•• 
check
•• 
=
•• 
_context
••  
.
••  ! 
Curriculum_Subject
••! 3
.
••3 4
Where
••4 9
(
••9 :
p
••: ;
=>
••< >
p
••? @
.
••@ A
CurriculumId
••A M
==
••N P
id
••Q S
)
••S T
.
••T U
ToList
••U [
(
••[ \
)
••\ ]
;
••] ^
var
¶¶ 
combo
¶¶ 
=
¶¶ 
_context
¶¶  
.
¶¶  !
Combo
¶¶! &
.
¶¶& '
Where
¶¶' ,
(
¶¶, -
p
¶¶- .
=>
¶¶/ 1
p
¶¶2 3
.
¶¶3 4
CurriculumId
¶¶4 @
==
¶¶A C
id
¶¶D F
)
¶¶F G
.
¶¶G H
ToList
¶¶H N
(
¶¶N O
)
¶¶O P
;
¶¶P Q
foreach
ßß 
(
ßß 
var
ßß 
item
ßß 
in
ßß  
combo
ßß! &
)
ßß& '
{
®® 
var
©© 
com_sub
©© 
=
©© 
_context
©© &
.
©©& '
Combo_Subject
©©' 4
.
©©4 5
Where
©©5 :
(
©©: ;
p
©©; <
=>
©©= ?
p
©©@ A
.
©©A B
ComboId
©©B I
==
©©J L
item
©©M Q
.
©©Q R
ComboId
©©R Y
)
©©Y Z
.
©©Z [
ToList
©©[ a
(
©©a b
)
©©b c
;
©©c d
_context
™™ 
.
™™ 
Combo_Subject
™™ &
.
™™& '
RemoveRange
™™' 2
(
™™2 3
com_sub
™™3 :
)
™™: ;
;
™™; <
}
´´ 
_context
¨¨ 
.
¨¨ 
Combo
¨¨ 
.
¨¨ 
RemoveRange
¨¨ &
(
¨¨& '
combo
¨¨' ,
)
¨¨, -
;
¨¨- .
_context
≠≠ 
.
≠≠  
Curriculum_Subject
≠≠ '
.
≠≠' (
RemoveRange
≠≠( 3
(
≠≠3 4
check
≠≠4 9
)
≠≠9 :
;
≠≠: ;
_context
ÆÆ 
.
ÆÆ 

Curriculum
ÆÆ 
.
ÆÆ  
Remove
ÆÆ  &
(
ÆÆ& '

curriculum
ÆÆ' 1
)
ÆÆ1 2
;
ÆÆ2 3
await
ØØ 
_context
ØØ 
.
ØØ 
SaveChangesAsync
ØØ +
(
ØØ+ ,
)
ØØ, -
;
ØØ- .
return
∞∞ 
RedirectToAction
∞∞ #
(
∞∞# $
nameof
∞∞$ *
(
∞∞* +
Index
∞∞+ 0
)
∞∞0 1
)
∞∞1 2
;
∞∞2 3
}
±± 	
public
¥¥ 
async
¥¥ 
Task
¥¥ 
<
¥¥ 
IActionResult
¥¥ '
>
¥¥' (

AddSubject
¥¥) 3
(
¥¥3 4
string
¥¥4 :
semester
¥¥; C
)
¥¥C D
{
µµ 	
string
∂∂ 
add
∂∂ 
=
∂∂ 
Request
∂∂  
.
∂∂  !
Form
∂∂! %
[
∂∂% &
$str
∂∂& +
]
∂∂+ ,
;
∂∂, -
int
∑∑ 
curriId
∑∑ 
=
∑∑ 
Convert
∑∑ !
.
∑∑! "
ToInt32
∑∑" )
(
∑∑) *
Request
∑∑* 1
.
∑∑1 2
Form
∑∑2 6
[
∑∑6 7
$str
∑∑7 @
]
∑∑@ A
)
∑∑A B
;
∑∑B C
if
ππ 
(
ππ 
add
ππ 
!=
ππ 
null
ππ 
&&
ππ 
!
ππ  
add
ππ  #
.
ππ# $
Trim
ππ$ (
(
ππ( )
)
ππ) *
.
ππ* +
Equals
ππ+ 1
(
ππ1 2
$str
ππ2 4
)
ππ4 5
)
ππ5 6
{
∫∫ 
Subject
ªª 
sj
ªª 
=
ªª 
_context
ªª %
.
ªª% &
Subject
ªª& -
.
ªª- .
Include
ªª. 5
(
ªª5 6
p
ªª6 7
=>
ªª8 :
p
ªª; <
.
ªª< =
Status
ªª= C
)
ªªC D
.
ªªD E
FirstOrDefault
ªªE S
(
ªªS T
pro
ªªT W
=>
ªªX Z
pro
ªª[ ^
.
ªª^ _
SubjectCode
ªª_ j
.
ªªj k
Equals
ªªk q
(
ªªq r
add
ªªr u
.
ªªu v
Trim
ªªv z
(
ªªz {
)
ªª{ |
)
ªª| }
)
ªª} ~
;
ªª~ 
if
ºº 
(
ºº 
sj
ºº 
!=
ºº 
null
ºº 
)
ºº 
{
ΩΩ 
var
øø 
check
øø 
=
øø 
_context
øø  (
.
øø( ) 
Curriculum_Subject
øø) ;
.
øø; <
Where
øø< A
(
øøA B
p
øøB C
=>
øøD F
p
øøG H
.
øøH I
CurriculumId
øøI U
==
øøV X
curriId
øøY `
)
øø` a
.
øøa b
ToList
øøb h
(
øøh i
)
øøi j
;
øøj k
CurriculumSubject
¿¿ %
check_element
¿¿& 3
=
¿¿4 5
(
¿¿6 7
from
¿¿7 ;
element
¿¿< C
in
¿¿D F
check
¿¿G L
where
¡¡( -
element
¡¡. 5
.
¡¡5 6
SubjectCode
¡¡6 A
.
¡¡A B
Trim
¡¡B F
(
¡¡F G
)
¡¡G H
.
¡¡H I
Equals
¡¡I O
(
¡¡O P
sj
¡¡P R
.
¡¡R S
SubjectCode
¡¡S ^
.
¡¡^ _
Trim
¡¡_ c
(
¡¡c d
)
¡¡d e
)
¡¡e f
select
¬¬( .
element
¬¬/ 6
)
¬¬6 7
.
¬¬7 8
FirstOrDefault
¬¬8 F
(
¬¬F G
)
¬¬G H
;
¬¬H I
if
√√ 
(
√√ 
check_element
√√ %
==
√√% '
null
√√' +
)
√√+ ,
{
ƒƒ 
CurriculumSubject
∆∆ )
cu_sub
∆∆* 0
=
∆∆1 2
new
∆∆3 6
CurriculumSubject
∆∆7 H
(
∆∆H I
)
∆∆I J
;
∆∆J K
cu_sub
«« 
.
«« 
SubjectCode
«« *
=
««+ ,
sj
««- /
.
««/ 0
SubjectCode
««0 ;
;
««; <
cu_sub
»» 
.
»» 
CurriculumId
»» +
=
»», -
curriId
»». 5
;
»»5 6
if
…… 
(
…… 
semester
…… $
!=
……% '
null
……( ,
)
……, -
{
   
int
ÀÀ 
semester_int
ÀÀ  ,
=
ÀÀ- .
Convert
ÀÀ/ 6
.
ÀÀ6 7
ToInt32
ÀÀ7 >
(
ÀÀ> ?
semester
ÀÀ? G
)
ÀÀG H
;
ÀÀH I
cu_sub
ÃÃ "
.
ÃÃ" #
Semester
ÃÃ# +
=
ÃÃ, -
semester_int
ÃÃ. :
;
ÃÃ: ;
}
ÕÕ 
_context
ŒŒ  
.
ŒŒ  ! 
Curriculum_Subject
ŒŒ! 3
.
ŒŒ3 4
Add
ŒŒ4 7
(
ŒŒ7 8
cu_sub
ŒŒ8 >
)
ŒŒ> ?
;
ŒŒ? @
_context
œœ  
.
œœ  !
SaveChanges
œœ! ,
(
œœ, -
)
œœ- .
;
œœ. /
return
–– 
new
–– "
RedirectResult
––# 1
(
––1 2
url
––2 5
:
––5 6
$str
––7 Q
+
––R S
curriId
––T [
,
––[ \
	permanent
––] f
:
––f g
true
––h l
,
––l m
preserveMethod
––n |
:
––| }
true––~ Ç
)––Ç É
;––É Ñ
}
—— 
else
““ 
{
”” 
TempData
‘‘  
[
‘‘  !
$str
‘‘! (
]
‘‘( )
=
‘‘* +
$str
‘‘, n
;
‘‘n o
return
’’ 
new
’’ "
RedirectResult
’’# 1
(
’’1 2
url
’’2 5
:
’’5 6
$str
’’7 Q
+
’’R S
curriId
’’T [
,
’’[ \
	permanent
’’] f
:
’’f g
true
’’h l
,
’’l m
preserveMethod
’’n |
:
’’| }
true’’~ Ç
)’’Ç É
;’’É Ñ
}
÷÷ 
}
◊◊ 
else
ÿÿ 
{
ŸŸ 
TempData
⁄⁄ 
[
⁄⁄ 
$str
⁄⁄ $
]
⁄⁄$ %
=
⁄⁄& '
$str
⁄⁄( e
;
⁄⁄e f
return
€€ 
new
€€ 
RedirectResult
€€ -
(
€€- .
url
€€. 1
:
€€1 2
$str
€€3 M
+
€€N O
curriId
€€P W
,
€€W X
	permanent
€€Y b
:
€€b c
true
€€d h
,
€€h i
preserveMethod
€€j x
:
€€x y
true
€€z ~
)
€€~ 
;€€ Ä
}
‹‹ 
}
›› 
TempData
ﬁﬁ 
[
ﬁﬁ 
$str
ﬁﬁ 
]
ﬁﬁ 
=
ﬁﬁ 
$str
ﬁﬁ  ]
;
ﬁﬁ] ^
return
ﬂﬂ 
new
ﬂﬂ 
RedirectResult
ﬂﬂ %
(
ﬂﬂ% &
url
ﬂﬂ& )
:
ﬂﬂ) *
$str
ﬂﬂ+ E
+
ﬂﬂF G
curriId
ﬂﬂH O
,
ﬂﬂO P
	permanent
ﬂﬂQ Z
:
ﬂﬂZ [
true
ﬂﬂ\ `
,
ﬂﬂ` a
preserveMethod
ﬂﬂb p
:
ﬂﬂp q
true
ﬂﬂr v
)
ﬂﬂv w
;
ﬂﬂw x
}
‡‡ 	
public
„„ 
async
„„ 
Task
„„ 
<
„„ 
IActionResult
„„ '
>
„„' (
DeleteSubject
„„) 6
(
„„6 7
int
„„7 :
id
„„; =
,
„„= >
int
„„? B
	cu_sub_ID
„„C L
)
„„L M
{
‰‰ 	
CurriculumSubject
ËË 
cu_sub
ËË $
=
ËË$ %
_context
ËË& .
.
ËË. / 
Curriculum_Subject
ËË/ A
.
ËËA B
Find
ËËB F
(
ËËF G
	cu_sub_ID
ËËG P
)
ËËP Q
;
ËËQ R
var
ÈÈ 
combo
ÈÈ 
=
ÈÈ 
_context
ÈÈ  
.
ÈÈ  !
Combo
ÈÈ! &
.
ÈÈ& '
Where
ÈÈ' ,
(
ÈÈ, -
p
ÈÈ- .
=>
ÈÈ/ 1
p
ÈÈ2 3
.
ÈÈ3 4
CurriculumId
ÈÈ4 @
==
ÈÈ@ B
id
ÈÈB D
)
ÈÈD E
.
ÈÈE F
ToList
ÈÈF L
(
ÈÈL M
)
ÈÈM N
;
ÈÈN O
foreach
ÍÍ 
(
ÍÍ 
var
ÍÍ 
item
ÍÍ 
in
ÍÍ 
combo
ÍÍ  %
)
ÍÍ% &
{
ÎÎ 
var
ÏÏ 
com_sub
ÏÏ 
=
ÏÏ 
_context
ÏÏ &
.
ÏÏ& '
Combo_Subject
ÏÏ' 4
.
ÏÏ4 5
Where
ÏÏ5 :
(
ÏÏ: ;
p
ÏÏ; <
=>
ÏÏ= ?
p
ÏÏ@ A
.
ÏÏA B
ComboId
ÏÏB I
==
ÏÏI K
item
ÏÏK O
.
ÏÏO P
ComboId
ÏÏP W
)
ÏÏW X
.
ÏÏX Y
ToList
ÏÏY _
(
ÏÏ_ `
)
ÏÏ` a
;
ÏÏa b
foreach
ÌÌ 
(
ÌÌ 
var
ÌÌ 
com
ÌÌ 
in
ÌÌ  "
com_sub
ÌÌ# *
)
ÌÌ* +
{
ÓÓ 
if
ÔÔ 
(
ÔÔ 
com
ÔÔ 
.
ÔÔ 
SubjectCode
ÔÔ %
.
ÔÔ% &
Equals
ÔÔ& ,
(
ÔÔ, -
cu_sub
ÔÔ- 3
.
ÔÔ3 4
SubjectCode
ÔÔ4 ?
)
ÔÔ? @
)
ÔÔ@ A
{
 
_context
ÒÒ  
.
ÒÒ  !
Combo_Subject
ÒÒ! .
.
ÒÒ. /
Remove
ÒÒ/ 5
(
ÒÒ5 6
com
ÒÒ6 9
)
ÒÒ9 :
;
ÒÒ: ;
_context
ÚÚ  
.
ÚÚ  !
SaveChanges
ÚÚ! ,
(
ÚÚ, -
)
ÚÚ- .
;
ÚÚ. /
}
ÛÛ 
}
ÙÙ 
}
ıı 
_context
ˆˆ 
.
ˆˆ  
Curriculum_Subject
ˆˆ '
.
ˆˆ' (
Remove
ˆˆ( .
(
ˆˆ. /
cu_sub
ˆˆ/ 5
)
ˆˆ5 6
;
ˆˆ6 7
_context
˜˜ 
.
˜˜ 
SaveChanges
˜˜  
(
˜˜  !
)
˜˜! "
;
˜˜" #
return
¯¯ 
new
¯¯ 
RedirectResult
¯¯ %
(
¯¯% &
url
¯¯& )
:
¯¯) *
$str
¯¯+ E
+
¯¯F G
id
¯¯H J
,
¯¯J K
	permanent
¯¯L U
:
¯¯U V
true
¯¯W [
,
¯¯[ \
preserveMethod
¯¯] k
:
¯¯k l
true
¯¯m q
)
¯¯q r
;
¯¯r s
}
˘˘ 	
private
˚˚ 
bool
˚˚ 
CurriculumExists
˚˚ %
(
˚˚% &
int
˚˚& )
id
˚˚* ,
)
˚˚, -
{
¸¸ 	
return
˝˝
 
(
˝˝ 
_context
˝˝ 
.
˝˝ 

Curriculum
˝˝ %
?
˝˝% &
.
˝˝& '
Any
˝˝' *
(
˝˝* +
e
˝˝+ ,
=>
˝˝- /
e
˝˝0 1
.
˝˝1 2
CurriculumId
˝˝2 >
==
˝˝? A
id
˝˝B D
)
˝˝D E
)
˝˝E F
.
˝˝F G
GetValueOrDefault
˝˝G X
(
˝˝X Y
)
˝˝Y Z
;
˝˝Z [
}
˛˛ 	
}
ˇˇ 
}ÄÄ ãg
DD:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\ADMINDecisionsController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class $
ADMINDecisionsController )
:* +

Controller, 6
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public $
ADMINDecisionsController '
(' (
AppDbContext( 4
context5 <
)< =
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
return 
_context 
. 
Decision &
!=' )
null* .
?/ 0
View 
( 
await $
_context% -
.- .
Decision. 6
.6 7
ToListAsync7 B
(B C
)C D
)D E
:F G
Problem !
(! "
$str" P
)P Q
;Q R
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
string1 7
id8 :
): ;
{   	
if!! 
(!! 
id!! 
==!! 
null!! 
||!! 
_context!! &
.!!& '
Decision!!' /
==!!0 2
null!!3 7
)!!7 8
{"" 
return## 
NotFound## 
(##  
)##  !
;##! "
}$$ 
var&& 
decision&& 
=&& 
await&&  
_context&&! )
.&&) *
Decision&&* 2
.'' 
FirstOrDefaultAsync'' $
(''$ %
m''% &
=>''' )
m''* +
.''+ ,

DecisionNo'', 6
.''6 7
Equals''7 =
(''= >
id''> @
)''@ A
)''A B
;''B C
if(( 
((( 
decision(( 
==(( 
null((  
)((  !
{)) 
return** 
NotFound** 
(**  
)**  !
;**! "
}++ 
return-- 
View-- 
(-- 
decision--  
)--  !
;--! "
}.. 	
public11 
IActionResult11 
Create11 #
(11# $
)11$ %
{22 	
return33 
View33 
(33 
)33 
;33 
}44 	
[99 	
HttpPost99	 
]99 
[:: 	$
ValidateAntiForgeryToken::	 !
]::! "
public;; 
async;; 
Task;; 
<;; 
IActionResult;; '
>;;' (
Create;;) /
(;;/ 0
[;;0 1
Bind;;1 5
(;;5 6
$str;;6 _
);;_ `
];;` a
Decision;;b j
decision;;k s
);;s t
{<< 	
var== 
check== 
=== 
_context==  
.==  !
Decision==! )
.==) *
FirstOrDefault==* 8
(==8 9
p==9 :
=>==: <
p==< =
.=== >

DecisionNo==> H
.==H I
Equals==I O
(==O P
decision==P X
.==X Y

DecisionNo==Y c
)==c d
)==d e
;==e f
if>> 
(>> 
check>> 
==>> 
null>> 
)>> 
{?? 
if@@ 
(@@ 

ModelState@@ 
.@@ 
IsValid@@ &
)@@& '
{AA 
_contextBB 
.BB 
AddBB  
(BB  !
decisionBB! )
)BB) *
;BB* +
awaitCC 
_contextCC "
.CC" #
SaveChangesAsyncCC# 3
(CC3 4
)CC4 5
;CC5 6
returnDD 
RedirectToActionDD +
(DD+ ,
nameofDD, 2
(DD2 3
IndexDD3 8
)DD8 9
)DD9 :
;DD: ;
}EE 
}FF 
TempDataGG 
[GG 
$strGG 
]GG 
=GG 
$strGG  D
;GGD E
returnHH 
ViewHH 
(HH 
decisionHH  
)HH  !
;HH! "
}II 	
publicLL 
asyncLL 
TaskLL 
<LL 
IActionResultLL '
>LL' (
EditLL) -
(LL- .
stringLL. 4
idLL5 7
)LL7 8
{MM 	
ifNN 
(NN 
idNN 
==NN 
nullNN 
||NN 
_contextNN &
.NN& '
DecisionNN' /
==NN0 2
nullNN3 7
)NN7 8
{OO 
returnPP 
NotFoundPP 
(PP  
)PP  !
;PP! "
}QQ 
varSS 
decisionSS 
=SS 
awaitSS  
_contextSS! )
.SS) *
DecisionSS* 2
.SS2 3
	FindAsyncSS3 <
(SS< =
idSS= ?
)SS? @
;SS@ A
ifTT 
(TT 
decisionTT 
==TT 
nullTT  
)TT  !
{UU 
returnVV 
NotFoundVV 
(VV  
)VV  !
;VV! "
}WW 
returnXX 
ViewXX 
(XX 
decisionXX  
)XX  !
;XX! "
}YY 	
[^^ 	
HttpPost^^	 
]^^ 
[__ 	$
ValidateAntiForgeryToken__	 !
]__! "
public`` 
async`` 
Task`` 
<`` 
IActionResult`` '
>``' (
Edit``) -
(``- .
string``. 4
id``5 7
,``7 8
[``9 :
Bind``: >
(``> ?
$str``? h
)``h i
]``i j
Decision``k s
decision``t |
)``| }
{aa 	
ifbb 
(bb 
idbb 
!=bb 
decisionbb 
.bb 

DecisionNobb )
)bb) *
{cc 
returndd 
NotFounddd 
(dd  
)dd  !
;dd! "
}ee 
ifgg 
(gg 

ModelStategg 
.gg 
IsValidgg "
)gg" #
{hh 
tryii 
{jj 
_contextkk 
.kk 
Updatekk #
(kk# $
decisionkk$ ,
)kk, -
;kk- .
awaitll 
_contextll "
.ll" #
SaveChangesAsyncll# 3
(ll3 4
)ll4 5
;ll5 6
}mm 
catchnn 
(nn (
DbUpdateConcurrencyExceptionnn 3
)nn3 4
{oo 
ifpp 
(pp 
!pp 
DecisionExistspp '
(pp' (
decisionpp( 0
.pp0 1

DecisionNopp1 ;
)pp; <
)pp< =
{qq 
returnrr 
NotFoundrr '
(rr' (
)rr( )
;rr) *
}ss 
elsett 
{uu 
throwvv 
;vv 
}ww 
}xx 
returnyy 
RedirectToActionyy '
(yy' (
nameofyy( .
(yy. /
Indexyy/ 4
)yy4 5
)yy5 6
;yy6 7
}zz 
return{{ 
View{{ 
({{ 
decision{{  
){{  !
;{{! "
}|| 	
public 
async 
Task 
< 
IActionResult '
>' (
Delete) /
(/ 0
string0 6
id7 9
)9 :
{
ÄÄ 	
if
ÅÅ 
(
ÅÅ 
id
ÅÅ 
==
ÅÅ 
null
ÅÅ 
||
ÅÅ 
_context
ÅÅ &
.
ÅÅ& '
Decision
ÅÅ' /
==
ÅÅ0 2
null
ÅÅ3 7
)
ÅÅ7 8
{
ÇÇ 
return
ÉÉ 
NotFound
ÉÉ 
(
ÉÉ  
)
ÉÉ  !
;
ÉÉ! "
}
ÑÑ 
var
ÜÜ 
decision
ÜÜ 
=
ÜÜ 
await
ÜÜ  
_context
ÜÜ! )
.
ÜÜ) *
Decision
ÜÜ* 2
.
áá !
FirstOrDefaultAsync
áá $
(
áá$ %
m
áá% &
=>
áá' )
m
áá* +
.
áá+ ,

DecisionNo
áá, 6
.
áá6 7
Equals
áá7 =
(
áá= >
id
áá> @
)
áá@ A
)
ááA B
;
ááB C
if
àà 
(
àà 
decision
àà 
==
àà 
null
àà  
)
àà  !
{
ââ 
return
ää 
NotFound
ää 
(
ää  
)
ää  !
;
ää! "
}
ãã 
return
çç 
View
çç 
(
çç 
decision
çç  
)
çç  !
;
çç! "
}
éé 	
[
ëë 	
HttpPost
ëë	 
,
ëë 

ActionName
ëë 
(
ëë 
$str
ëë &
)
ëë& '
]
ëë' (
[
íí 	&
ValidateAntiForgeryToken
íí	 !
]
íí! "
public
ìì 
async
ìì 
Task
ìì 
<
ìì 
IActionResult
ìì '
>
ìì' (
DeleteConfirmed
ìì) 8
(
ìì8 9
string
ìì9 ?
id
ìì@ B
)
ììB C
{
îî 	
if
ïï 
(
ïï 
_context
ïï 
.
ïï 
Decision
ïï !
==
ïï" $
null
ïï% )
)
ïï) *
{
ññ 
return
óó 
Problem
óó 
(
óó 
$str
óó M
)
óóM N
;
óóN O
}
òò 
var
ôô 
decision
ôô 
=
ôô 
await
ôô  
_context
ôô! )
.
ôô) *
Decision
ôô* 2
.
ôô2 3
	FindAsync
ôô3 <
(
ôô< =
id
ôô= ?
)
ôô? @
;
ôô@ A
if
öö 
(
öö 
decision
öö 
!=
öö 
null
öö  
)
öö  !
{
õõ 
var
úú 
curri
úú 
=
úú 
_context
úú $
.
úú$ %

Curriculum
úú% /
.
úú/ 0
Where
úú0 5
(
úú5 6
p
úú6 7
=>
úú7 9
p
úú9 :
.
úú: ;

DecisionNo
úú; E
.
úúE F
Equals
úúF L
(
úúL M
id
úúM O
)
úúO P
)
úúP Q
.
úúQ R
ToList
úúR X
(
úúX Y
)
úúY Z
;
úúZ [
var
ùù 
syllabus
ùù 
=
ùù 
_context
ùù '
.
ùù' (
Syllabus
ùù( 0
.
ùù0 1
Where
ùù1 6
(
ùù6 7
p
ùù7 8
=>
ùù9 ;
p
ùù< =
.
ùù= >

DecisionNo
ùù> H
.
ùùH I
Equals
ùùI O
(
ùùO P
id
ùùP R
)
ùùR S
)
ùùS T
.
ùùT U
ToList
ùùU [
(
ùù[ \
)
ùù\ ]
;
ùù] ^
foreach
ûû 
(
ûû 
var
ûû 
cur
ûû 
in
ûû  "
curri
ûû# (
)
ûû( )
{
üü 
cur
†† 
.
†† 

DecisionNo
†† "
=
††# $
null
††% )
;
††) *
_context
°° 
.
°° 

Curriculum
°° '
.
°°' (
Update
°°( .
(
°°. /
cur
°°/ 2
)
°°2 3
;
°°3 4
}
¢¢ 
foreach
££ 
(
££ 
var
££ 
syl
££  
in
££! #
syllabus
££$ ,
)
££, -
{
§§ 
syl
•• 
.
•• 

DecisionNo
•• "
=
••# $
null
••% )
;
••) *
_context
¶¶ 
.
¶¶ 
Syllabus
¶¶ %
.
¶¶% &
Update
¶¶& ,
(
¶¶, -
syl
¶¶- 0
)
¶¶0 1
;
¶¶1 2
}
ßß 
_context
®® 
.
®® 
Decision
®® !
.
®®! "
Remove
®®" (
(
®®( )
decision
®®) 1
)
®®1 2
;
®®2 3
}
©© 
await
´´ 
_context
´´ 
.
´´ 
SaveChangesAsync
´´ +
(
´´+ ,
)
´´, -
;
´´- .
return
¨¨ 
RedirectToAction
¨¨ #
(
¨¨# $
nameof
¨¨$ *
(
¨¨* +
Index
¨¨+ 0
)
¨¨0 1
)
¨¨1 2
;
¨¨2 3
}
≠≠ 	
private
ØØ 
bool
ØØ 
DecisionExists
ØØ #
(
ØØ# $
string
ØØ$ *
id
ØØ+ -
)
ØØ- .
{
∞∞ 	
return
±±
 
(
±± 
_context
±± 
.
±± 
Decision
±± #
?
±±# $
.
±±$ %
Any
±±% (
(
±±( )
e
±±) *
=>
±±+ -
e
±±. /
.
±±/ 0

DecisionNo
±±0 :
==
±±; =
id
±±> @
)
±±@ A
)
±±A B
.
±±B C
GetValueOrDefault
±±C T
(
±±T U
)
±±U V
;
±±V W
}
≤≤ 	
}
≥≥ 
}¥¥ Ä[
LD:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\ADMINMaterialOfTeacherController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class ,
 ADMINMaterialOfTeacherController 1
:2 3

Controller4 >
{ 
private 
int 
count_Index 
;  
private 
readonly 
AppDbContext %
_context& .
;. /
public ,
 ADMINMaterialOfTeacherController /
(/ 0
AppDbContext0 <
context= D
)D E
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
string/ 5
status6 <
,< =
string> D
sub_codeE M
)M N
{ 	
List 
< 
MaterialOfTeacher "
>" #
list$ (
=) *
await, 1
_context2 :
.: ;
MaterialOfTeacher; L
.L M
IncludeM T
(T U
mU V
=>W Y
mZ [
.[ \
Account\ c
)c d
.d e
Includee l
(l m
mm n
=>o q
mr s
.s t
Subjectt {
){ |
.| }
ToListAsync	} à
(
à â
)
â ä
;
ä ã
if 
( 
! 
string 
. 
IsNullOrEmpty )
() *
status* 0
)0 1
)1 2
{ 
if 
( 
! 
status 
. 
Equals "
(" #
$str# %
)% &
&&' )
!* +
status+ 1
.1 2
Equals2 8
(8 9
$str9 >
)> ?
)? @
{   
if!! 
(!! 
!!! 
string!! 
.!!  
IsNullOrEmpty!!  -
(!!- .
sub_code!!. 6
)!!6 7
)!!7 8
{"" 
list## 
=## 
await## $
_context##% -
.##- .
MaterialOfTeacher##. ?
.##? @
Include##@ G
(##G H
m##H I
=>##J L
m##M N
.##N O
Account##O V
)##V W
.##W X
Include##X _
(##_ `
m##` a
=>##b d
m##e f
.##f g
Subject##g n
)##n o
.##o p
Where##p u
(##u v
m##v w
=>##x z
m##{ |
.##| }
Status	##} É
.
##É Ñ
Equals
##Ñ ä
(
##ä ã
status
##ã ë
)
##ë í
)
##í ì
.
##ì î
Where
##î ô
(
##ô ö
m
##ö õ
=>
##ú û
m
##ü †
.
##† °
SubjectCode
##° ¨
.
##¨ ≠
Contains
##≠ µ
(
##µ ∂
sub_code
##∂ æ
)
##æ ø
)
##ø ¿
.
##¿ ¡
ToListAsync
##¡ Ã
(
##Ã Õ
)
##Õ Œ
;
##Œ œ
}$$ 
else%% 
{&& 
list'' 
='' 
await'' $
_context''% -
.''- .
MaterialOfTeacher''. ?
.''? @
Include''@ G
(''G H
m''H I
=>''J L
m''M N
.''N O
Account''O V
)''V W
.''W X
Include''X _
(''_ `
m''` a
=>''b d
m''e f
.''f g
Subject''g n
)''n o
.''o p
Where''p u
(''u v
m''v w
=>''x z
m''{ |
.''| }
Status	''} É
.
''É Ñ
Equals
''Ñ ä
(
''ä ã
status
''ã ë
)
''ë í
)
''í ì
.
''ì î
ToListAsync
''î ü
(
''ü †
)
''† °
;
''° ¢
}(( 
})) 
else** 
{++ 
if,, 
(,, 
!,, 
string,, 
.,,  
IsNullOrEmpty,,  -
(,,- .
sub_code,,. 6
),,6 7
),,7 8
{-- 
list.. 
=.. 
await.. $
_context..% -
...- .
MaterialOfTeacher... ?
...? @
Include..@ G
(..G H
m..H I
=>..J L
m..M N
...N O
Account..O V
)..V W
...W X
Include..X _
(.._ `
m..` a
=>..b d
m..e f
...f g
Subject..g n
)..n o
...o p
Where..p u
(..u v
m..v w
=>..x z
m..{ |
...| }
SubjectCode	..} à
.
..à â
Contains
..â ë
(
..ë í
sub_code
..í ö
)
..ö õ
)
..õ ú
.
..ú ù
ToListAsync
..ù ®
(
..® ©
)
..© ™
;
..™ ´
}// 
}00 
}11 
else22 
{33 
if44 
(44 
!44 
string44 
.44 
IsNullOrEmpty44 )
(44) *
sub_code44* 2
)442 3
)443 4
{55 
list66 
=66 
await66  
_context66! )
.66) *
MaterialOfTeacher66* ;
.66; <
Include66< C
(66C D
m66D E
=>66F H
m66I J
.66J K
Account66K R
)66R S
.66S T
Include66T [
(66[ \
m66\ ]
=>66^ `
m66a b
.66b c
Subject66c j
)66j k
.66k l
Where66l q
(66q r
m66r s
=>66t v
m66w x
.66x y
SubjectCode	66y Ñ
.
66Ñ Ö
Contains
66Ö ç
(
66ç é
sub_code
66é ñ
)
66ñ ó
)
66ó ò
.
66ò ô
ToListAsync
66ô §
(
66§ •
)
66• ¶
;
66¶ ß
}77 
}88 
return99 
View99 
(99 
list99 
)99 
;99 
}:: 	
public== 
async== 
Task== 
<== 
IActionResult== '
>==' (
Edit==) -
(==- .
int==. 1
?==1 2
id==3 5
)==5 6
{>> 	
if?? 
(?? 
id?? 
==?? 
null?? 
||?? 
_context?? &
.??& '
MaterialOfTeacher??' 8
==??9 ;
null??< @
)??@ A
{@@ 
returnAA 
NotFoundAA 
(AA  
)AA  !
;AA! "
}BB 
varDD 
materialOfTeacherDD !
=DD" #
awaitDD$ )
_contextDD* 2
.DD2 3
MaterialOfTeacherDD3 D
.DDD E
	FindAsyncDDE N
(DDN O
idDDO Q
)DDQ R
;DDR S
ifEE 
(EE 
materialOfTeacherEE !
==EE" $
nullEE% )
)EE) *
{FF 
returnGG 
NotFoundGG 
(GG  
)GG  !
;GG! "
}HH 
materialOfTeacherII 
.II 
StatusII $
=II% &
$strII' 1
;II1 2
_contextJJ 
.JJ 
UpdateJJ 
(JJ 
materialOfTeacherJJ -
)JJ- .
;JJ. /
awaitKK 
_contextKK 
.KK 
SaveChangesAsyncKK +
(KK+ ,
)KK, -
;KK- .
returnLL 
RedirectToActionLL #
(LL# $
nameofLL$ *
(LL* +
IndexLL+ 0
)LL0 1
)LL1 2
;LL2 3
}MM 	
publicPP 
asyncPP 
TaskPP 
<PP 
IActionResultPP '
>PP' (
DeletePP) /
(PP/ 0
intPP0 3
?PP3 4
idPP5 7
)PP7 8
{QQ 	
ifRR 
(RR 
idRR 
==RR 
nullRR 
||RR 
_contextRR &
.RR& '
MaterialOfTeacherRR' 8
==RR9 ;
nullRR< @
)RR@ A
{SS 
returnTT 
NotFoundTT 
(TT  
)TT  !
;TT! "
}UU 
varWW 
materialOfTeacherWW !
=WW" #
awaitWW$ )
_contextWW* 2
.WW2 3
MaterialOfTeacherWW3 D
.XX 
IncludeXX 
(XX 
mXX 
=>XX 
mXX 
.XX  
AccountXX  '
)XX' (
.YY 
IncludeYY 
(YY 
mYY 
=>YY 
mYY 
.YY  
SubjectYY  '
)YY' (
.ZZ 
FirstOrDefaultAsyncZZ $
(ZZ$ %
mZZ% &
=>ZZ' )
mZZ* +
.ZZ+ ,
IdZZ, .
==ZZ/ 1
idZZ2 4
)ZZ4 5
;ZZ5 6
if[[ 
([[ 
materialOfTeacher[[ !
==[[" $
null[[% )
)[[) *
{\\ 
return]] 
NotFound]] 
(]]  
)]]  !
;]]! "
}^^ 
return`` 
View`` 
(`` 
materialOfTeacher`` )
)``) *
;``* +
}aa 	
[dd 	
HttpPostdd	 
,dd 

ActionNamedd 
(dd 
$strdd &
)dd& '
]dd' (
[ee 	$
ValidateAntiForgeryTokenee	 !
]ee! "
publicff 
asyncff 
Taskff 
<ff 
IActionResultff '
>ff' (
DeleteConfirmedff) 8
(ff8 9
intff9 <
idff= ?
)ff? @
{gg 	
ifhh 
(hh 
_contexthh 
.hh 
MaterialOfTeacherhh *
==hh+ -
nullhh. 2
)hh2 3
{ii 
returnjj 
Problemjj 
(jj 
$strjj V
)jjV W
;jjW X
}kk 
varll 
materialOfTeacherll !
=ll" #
awaitll$ )
_contextll* 2
.ll2 3
MaterialOfTeacherll3 D
.llD E
	FindAsyncllE N
(llN O
idllO Q
)llQ R
;llR S
ifmm 
(mm 
materialOfTeachermm !
!=mm" $
nullmm% )
)mm) *
{nn 
_contextoo 
.oo 
MaterialOfTeacheroo *
.oo* +
Removeoo+ 1
(oo1 2
materialOfTeacheroo2 C
)ooC D
;ooD E
}pp 
awaitrr 
_contextrr 
.rr 
SaveChangesAsyncrr +
(rr+ ,
)rr, -
;rr- .
returnss 
RedirectToActionss #
(ss# $
nameofss$ *
(ss* +
Indexss+ 0
)ss0 1
)ss1 2
;ss2 3
}tt 	
privatevv 
boolvv #
MaterialOfTeacherExistsvv ,
(vv, -
intvv- 0
idvv1 3
)vv3 4
{ww 	
returnxx
 
(xx 
_contextxx 
.xx 
MaterialOfTeacherxx ,
?xx, -
.xx- .
Anyxx. 1
(xx1 2
exx2 3
=>xx4 6
exx7 8
.xx8 9
Idxx9 ;
==xx< >
idxx? A
)xxA B
)xxB C
.xxC D
GetValueOrDefaultxxD U
(xxU V
)xxV W
;xxW X
}yy 	
}zz 
}{{ Ì=
CD:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\ADMINMetarialController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public		 

class		 #
ADMINMetarialController		 (
:		) *

Controller		+ 5
{

 
private 
readonly 
AppDbContext %
_context& .
;. /
public #
ADMINMetarialController &
(& '
AppDbContext' 3
context4 ;
); <
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
	materials 
= 
await !
_context" *
.* +
Material+ 3
.3 4
Include4 ;
(; <
s< =
=>> @
sA B
.B C
SubjectC J
)J K
.K L
OrderByDescendingL ]
(] ^
s^ _
=>` b
sc d
.d e

MaterialIde o
)o p
.p q
ToListAsyncq |
(| }
)} ~
;~ 
return 
View 
( 
	materials !
)! "
;" #
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Create) /
(/ 0
)0 1
{ 	
var 
subjects 
= 
await  
_context! )
.) *
Subject* 1
.1 2
Include2 9
(9 :
s: ;
=>< >
s? @
.@ A
StatusA G
)G H
.H I
ToListAsyncI T
(T U
)U V
;V W
return 
View 
( 
subjects  
)  !
;! "
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
SubmitCreate) 5
(5 6
Material6 >
model? D
)D E
{ 	
_context   
.   
Material   
.   
Add   !
(  ! "
model  " '
)  ' (
;  ( )
await!! 
_context!! 
.!! 
SaveChangesAsync!! +
(!!+ ,
)!!, -
;!!- .
return"" 
RedirectToAction"" #
(""# $
nameof""$ *
(""* +
Index""+ 0
)""0 1
)""1 2
;""2 3
}## 	
public%% 
async%% 
Task%% 
<%% 
IActionResult%% '
>%%' (
Edit%%) -
(%%- .
int%%. 1
id%%2 4
)%%4 5
{&& 	
var'' 
material'' 
='' 
await''  
_context''! )
.'') *
Material''* 2
.''2 3
FirstOrDefaultAsync''3 F
(''F G
m''G H
=>''I K
m''L M
.''M N

MaterialId''N X
==''Y [
id''\ ^
)''^ _
;''_ `
if)) 
()) 
material)) 
==)) 
null))  
)))  !
{** 
return++ 
NotFound++ 
(++  
)++  !
;++! "
},, 
var.. 
subjects.. 
=.. 
await..  
_context..! )
...) *
Subject..* 1
...1 2
Include..2 9
(..9 :
s..: ;
=>..< >
s..? @
...@ A
Status..A G
)..G H
...H I
ToListAsync..I T
(..T U
)..U V
;..V W
return00 
View00 
(00 
new00 
MaterialFilterModel00 /
(00/ 0
)000 1
{11 
Material22 
=22 
material22 #
,22# $
Subjects33 
=33 
subjects33 #
}44 
)44 
;44 
}55 	
[77 	
HttpGet77	 
]77 
public88 
async88 
Task88 
<88 
IActionResult88 '
>88' (
Delete88) /
(88/ 0
int880 3
id884 6
)886 7
{99 	
var:: 
material:: 
=:: 
await::  
_context::! )
.::) *
Material::* 2
.::2 3
FirstOrDefaultAsync::3 F
(::F G
m::G H
=>::I K
m::L M
.::M N

MaterialId::N X
==::Y [
id::\ ^
)::^ _
;::_ `
if<< 
(<< 
material<< 
==<< 
null<<  
)<<  !
{== 
return>> 
NotFound>> 
(>>  
)>>  !
;>>! "
}?? 
_contextAA 
.AA 
MaterialAA 
.AA 
RemoveAA $
(AA$ %
materialAA% -
)AA- .
;AA. /
awaitCC 
_contextCC 
.CC 
SaveChangesAsyncCC +
(CC+ ,
)CC, -
;CC- .
returnEE 
RedirectToActionEE #
(EE# $
nameofEE$ *
(EE* +
IndexEE+ 0
)EE0 1
)EE1 2
;EE2 3
}FF 	
[HH 	
HttpPostHH	 
]HH 
publicII 
asyncII 
TaskII 
<II 
IActionResultII '
>II' (
SubmitUpdateII) 5
(II5 6
MaterialII6 >
modelII? D
)IID E
{JJ 	
varKK 
materialKK 
=KK 
awaitKK  
_contextKK! )
.KK) *
MaterialKK* 2
.KK2 3
FirstOrDefaultAsyncKK3 F
(KKF G
mKKG H
=>KKI K
mKKL M
.KKM N

MaterialIdKKN X
==KKY [
modelKK\ a
.KKa b

MaterialIdKKb l
)KKl m
;KKm n
ifMM 
(MM 
materialMM 
==MM 
nullMM  
)MM  !
{NN 
returnOO 
NotFoundOO 
(OO  
)OO  !
;OO! "
}PP 
materialRR 
.RR 
MaterialDescriptionRR (
=RR) *
modelRR+ 0
.RR0 1
MaterialDescriptionRR1 D
;RRD E
materialSS 
.SS 
AuthorSS 
=SS 
modelSS #
.SS# $
AuthorSS$ *
;SS* +
materialTT 
.TT 
	PublisherTT 
=TT  
modelTT! &
.TT& '
	PublisherTT' 0
;TT0 1
materialUU 
.UU 
PublishedDateUU "
=UU# $
modelUU% *
.UU* +
PublishedDateUU+ 8
;UU8 9
materialVV 
.VV 
UrlVV 
=VV 
modelVV  
.VV  !
UrlVV! $
;VV$ %
materialWW 
.WW 
SubjectCodeWW  
=WW! "
modelWW# (
.WW( )
SubjectCodeWW) 4
;WW4 5
_contextYY 
.YY 
MaterialYY 
.YY 
UpdateYY $
(YY$ %
materialYY% -
)YY- .
;YY. /
awaitZZ 
_contextZZ 
.ZZ 
SaveChangesAsyncZZ +
(ZZ+ ,
)ZZ, -
;ZZ- .
return\\ 
RedirectToAction\\ #
(\\# $
nameof\\$ *
(\\* +
Index\\+ 0
)\\0 1
)\\1 2
;\\2 3
}]] 	
}^^ 
}__ ˝i
BD:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\ADMINSessionController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class "
ADMINSessionController '
:( )

Controller* 4
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public "
ADMINSessionController %
(% &
AppDbContext& 2
context3 :
): ;
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
string/ 5
?5 6
id7 9
)9 :
{ 	
Subject 
sub 
= 
_context "
." #
Subject# *
.* +
FirstOrDefault+ 9
(9 :
s: ;
=>< >
s? @
.@ A
SubjectCodeA L
==M O
idP R
)R S
;S T
ViewBag 
. 
SubjectCode 
=  !
sub" %
;% &
var 
listSession 
= 
_context &
.& '
Session' .
.. /
Include/ 6
(6 7
s7 8
=>9 ;
s< =
.= >
Subject> E
)E F
.F G
WhereG L
(L M
susM P
=>Q S
susT W
.W X
SubjectCodeX c
==d f
idg i
)i j
.j k
ToListk q
(q r
)r s
;s t
return 
View 
( 
listSession #
)# $
;$ %
} 	
public   
IActionResult   
Create   #
(  # $
)  $ %
{!! 	
ViewData"" 
["" 
$str"" "
]""" #
=""$ %
new""& )

SelectList""* 4
(""4 5
_context""5 =
.""= >
Subject""> E
,""E F
$str""G T
,""T U
$str""V c
)""c d
;""d e
return## 
View## 
(## 
)## 
;## 
}$$ 	
[)) 	
HttpPost))	 
])) 
[** 	$
ValidateAntiForgeryToken**	 !
]**! "
public++ 
async++ 
Task++ 
<++ 
IActionResult++ '
>++' (
Create++) /
(++/ 0
[++0 1
Bind++1 5
(++5 6
$str	++6 é
)
++é è
]
++è ê

LMMProject
++ë õ
.
++õ ú
Models
++ú ¢
.
++¢ £
Session
++£ ™
session
++´ ≤
)
++≤ ≥
{,, 	
try-- 
{.. 
if// 
(// 
SessionExists// !
(//! "
session//" )
.//) *
	SessionId//* 3
)//3 4
)//4 5
{00 
return11 
View11 
(11  
session11  '
)11' (
;11( )
}22 
Models33 
.33 
Session33 
ses33 "
=33# $
new33% (
Models33) /
.33/ 0
Session330 7
(337 8
)338 9
;339 :
ses44 
.44 
	SessionId44 
=44 
session44  '
.44' (
	SessionId44( 1
;441 2
ses55 
.55 
Topic55 
=55 
session55 #
.55# $
Topic55$ )
;55) *
ses66 
.66  
LearningTeachingType66 (
=66) *
session66+ 2
.662 3 
LearningTeachingType663 G
;66G H
ses77 
.77 
StudentMaterials77 $
=77% &
session77' .
.77. /
StudentMaterials77/ ?
;77? @
ses88 
.88  
Constructivequestion88 (
=88) *
session88+ 2
.882 3 
Constructivequestion883 G
;88G H
ses99 
.99 
SubjectCode99 
=99  !
session99" )
.99) *
SubjectCode99* 5
;995 6
_context:: 
.:: 
Session::  
.::  !
AddAsync::! )
(::) *
ses::* -
)::- .
;::. /
await;; 
_context;; 
.;; 
SaveChangesAsync;; /
(;;/ 0
);;0 1
;;;1 2
}<< 
catch== 
(== 
	Exception== 
ex== 
)== 
{>> 
throw?? 
ex?? 
;?? 
}@@ 
ViewDataAA 
[AA 
$strAA "
]AA" #
=AA$ %
newAA& )

SelectListAA* 4
(AA4 5
_contextAA5 =
.AA= >
SubjectAA> E
,AAE F
$strAAG T
,AAT U
$strAAV c
,AAc d
sessionAAe l
.AAl m
SubjectCodeAAm x
)AAx y
;AAy z
returnBB 
newBB 
RedirectResultBB %
(BB% &
urlBB& )
:BB) *
$strBB+ A
+BBB C
sessionBBD K
.BBK L
SubjectCodeBBL W
,BBW X
	permanentBBY b
:BBb c
trueBBd h
,BBh i
preserveMethodBBj x
:BBx y
trueBBz ~
)BB~ 
;	BB Ä
}CC 	
publicFF 
asyncFF 
TaskFF 
<FF 
IActionResultFF '
>FF' (
EditFF) -
(FF- .
intFF. 1
?FF1 2
idFF3 5
)FF5 6
{GG 	
ifHH 
(HH 
idHH 
==HH 
nullHH 
||HH 
_contextHH &
.HH& '
SessionHH' .
==HH/ 1
nullHH2 6
)HH6 7
{II 
returnJJ 
NotFoundJJ 
(JJ  
)JJ  !
;JJ! "
}KK 
varMM 
sessionMM 
=MM 
awaitMM 
_contextMM  (
.MM( )
SessionMM) 0
.MM0 1
	FindAsyncMM1 :
(MM: ;
idMM; =
)MM= >
;MM> ?
ifNN 
(NN 
sessionNN 
==NN 
nullNN 
)NN  
{OO 
returnPP 
NotFoundPP 
(PP  
)PP  !
;PP! "
}QQ 
ViewDataRR 
[RR 
$strRR "
]RR" #
=RR$ %
newRR& )

SelectListRR* 4
(RR4 5
_contextRR5 =
.RR= >
SubjectRR> E
,RRE F
$strRRG T
,RRT U
$strRRV c
,RRc d
sessionRRe l
.RRl m
SubjectCodeRRm x
)RRx y
;RRy z
returnSS 
ViewSS 
(SS 
sessionSS 
)SS  
;SS  !
}TT 	
[YY 	
HttpPostYY	 
]YY 
[ZZ 	$
ValidateAntiForgeryTokenZZ	 !
]ZZ! "
public[[ 
async[[ 
Task[[ 
<[[ 
IActionResult[[ '
>[[' (
Edit[[) -
([[- .
[[[/ 0
Bind[[0 4
([[4 5
$str	[[5 ç
)
[[ç é
]
[[é è
Models
[[ê ñ
.
[[ñ ó
Session
[[ó û
session
[[ü ¶
)
[[¶ ß
{\\ 	
if^^ 
(^^ 

ModelState^^ 
.^^ 
IsValid^^ "
)^^" #
{__ 
try`` 
{aa 
_contextbb 
.bb 
Updatebb #
(bb# $
sessionbb$ +
)bb+ ,
;bb, -
awaitcc 
_contextcc "
.cc" #
SaveChangesAsynccc# 3
(cc3 4
)cc4 5
;cc5 6
}dd 
catchee 
(ee (
DbUpdateConcurrencyExceptionee 3
)ee3 4
{ff 
ifgg 
(gg 
!gg 
SessionExistsgg &
(gg& '
sessiongg' .
.gg. /
	SessionIdgg/ 8
)gg8 9
)gg9 :
{hh 
returnii 
NotFoundii '
(ii' (
)ii( )
;ii) *
}jj 
elsekk 
{ll 
throwmm 
;mm 
}nn 
}oo 
returnpp 
newpp 
RedirectResultpp )
(pp) *
urlpp* -
:pp- .
$strpp/ E
+ppF G
sessionppH O
.ppO P
SubjectCodeppP [
,pp[ \
	permanentpp] f
:ppf g
truepph l
,ppl m
preserveMethodppn |
:pp| }
true	pp~ Ç
)
ppÇ É
;
ppÉ Ñ
}qq 
ViewDatarr 
[rr 
$strrr "
]rr" #
=rr$ %
newrr& )

SelectListrr* 4
(rr4 5
_contextrr5 =
.rr= >
Subjectrr> E
,rrE F
$strrrG T
,rrT U
$strrrV c
,rrc d
sessionrre l
.rrl m
SubjectCoderrm x
)rrx y
;rry z
returnss 
Viewss 
(ss 
sessionss 
)ss  
;ss  !
}tt 	
publicww 
asyncww 
Taskww 
<ww 
IActionResultww '
>ww' (
Deleteww) /
(ww/ 0
intww0 3
?ww3 4
idww5 7
)ww7 8
{xx 	
ifyy 
(yy 
idyy 
==yy 
nullyy 
||yy 
_contextyy &
.yy& '
Sessionyy' .
==yy/ 1
nullyy2 6
)yy6 7
{zz 
return{{ 
NotFound{{ 
({{  
){{  !
;{{! "
}|| 
var~~ 
session~~ 
=~~ 
await~~ 
_context~~  (
.~~( )
Session~~) 0
. 
Include 
( 
s 
=> 
s 
.  
Subject  '
)' (
.
ÄÄ !
FirstOrDefaultAsync
ÄÄ $
(
ÄÄ$ %
m
ÄÄ% &
=>
ÄÄ' )
m
ÄÄ* +
.
ÄÄ+ ,
	SessionId
ÄÄ, 5
==
ÄÄ6 8
id
ÄÄ9 ;
)
ÄÄ; <
;
ÄÄ< =
if
ÅÅ 
(
ÅÅ 
session
ÅÅ 
==
ÅÅ 
null
ÅÅ 
)
ÅÅ  
{
ÇÇ 
return
ÉÉ 
NotFound
ÉÉ 
(
ÉÉ  
)
ÉÉ  !
;
ÉÉ! "
}
ÑÑ 
return
ÜÜ 
View
ÜÜ 
(
ÜÜ 
session
ÜÜ 
)
ÜÜ  
;
ÜÜ  !
}
áá 	
[
ää 	
HttpPost
ää	 
,
ää 

ActionName
ää 
(
ää 
$str
ää &
)
ää& '
]
ää' (
[
ãã 	&
ValidateAntiForgeryToken
ãã	 !
]
ãã! "
public
åå 
async
åå 
Task
åå 
<
åå 
IActionResult
åå '
>
åå' (
DeleteConfirmed
åå) 8
(
åå8 9
int
åå9 <
id
åå= ?
)
åå? @
{
çç 	
var
éé 
session
éé 
=
éé 
await
éé 
_context
éé  (
.
éé( )
Session
éé) 0
.
éé0 1
Include
éé1 8
(
éé8 9
s
éé9 :
=>
éé; =
s
éé> ?
.
éé? @
Subject
éé@ G
)
ééG H
.
ééH I!
FirstOrDefaultAsync
ééI \
(
éé\ ]
s
éé] ^
=>
éé_ a
s
ééb c
.
ééc d
	SessionId
ééd m
==
één p
id
ééq s
)
éés t
;
éét u
if
èè 
(
èè 
session
èè 
==
èè 
null
èè 
)
èè 
{
êê 
return
ëë 
NotFound
ëë 
(
ëë  
)
ëë  !
;
ëë! "
}
íí 
_context
ìì 
.
ìì 
Session
ìì 
.
ìì 
RemoveRange
ìì (
(
ìì( )
session
ìì) 0
)
ìì0 1
;
ìì1 2
await
îî 
_context
îî 
.
îî 
SaveChangesAsync
îî +
(
îî+ ,
)
îî, -
;
îî- .
return
ïï 
new
ïï 
RedirectResult
ïï %
(
ïï% &
url
ïï& )
:
ïï) *
$str
ïï+ A
+
ïïB C
session
ïïD K
.
ïïK L
SubjectCode
ïïL W
,
ïïW X
	permanent
ïïY b
:
ïïb c
true
ïïd h
,
ïïh i
preserveMethod
ïïj x
:
ïïx y
true
ïïz ~
)
ïï~ 
;ïï Ä
}
ññ 	
private
òò 
bool
òò 
SessionExists
òò "
(
òò" #
int
òò# &
id
òò' )
)
òò) *
{
ôô 	
return
öö
 
(
öö 
_context
öö 
.
öö 
Session
öö "
?
öö" #
.
öö# $
Any
öö$ '
(
öö' (
e
öö( )
=>
öö* ,
e
öö- .
.
öö. /
	SessionId
öö/ 8
==
öö9 ;
id
öö< >
)
öö> ?
)
öö? @
.
öö@ A
GetValueOrDefault
ööA R
(
ööR S
)
ööS T
;
ööT U
}
õõ 	
}
úú 
}ùù ‹|
BD:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\ADMINSubjectController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class "
ADMINSubjectController '
:( )

Controller* 4
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public "
ADMINSubjectController %
(% &
AppDbContext& 2
context3 :
): ;
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
IEnumerable 
< 
Subject 
>  
appDbContext! -
=. /
await0 5
_context6 >
.> ?
Subject? F
.F G
IncludeG N
(N O
sO P
=>Q S
sT U
.U V
StatusV \
)\ ]
.] ^
ToListAsync^ i
(i j
)j k
;k l
return 
View 
( 
appDbContext $
)$ %
;% &
} 	
public   
IActionResult   
Create   #
(  # $
)  $ %
{!! 	
ViewData"" 
["" 
$str"" "
]""" #
=""$ %
new""& )

SelectList""* 4
(""4 5
_context""5 =
.""= >
Status""> D
,""D E
$str""F S
,""S T
$str""U b
)""b c
;""c d
return## 
View## 
(## 
)## 
;## 
}$$ 	
[&& 	
HttpPost&&	 
]&& 
['' 	$
ValidateAntiForgeryToken''	 !
]''! "
public(( 
async(( 
Task(( 
<(( 
IActionResult(( '
>((' (
Create(() /
(((/ 0
[((0 1
Bind((1 5
(((5 6
$str((6 u
)((u v
]((v w
Subject((x 
subject
((Ä á
)
((á à
{)) 	
try** 
{++ 
if,, 
(,, 
SubjectExists,, !
(,,! "
subject,," )
.,,) *
SubjectCode,,* 5
),,5 6
),,6 7
{-- 
return.. 
View.. 
(..  
subject..  '
)..' (
;..( )
}// 
Subject00 
sub00 
=00 
new00 !
Subject00" )
(00) *
)00* +
;00+ ,
sub11 
.11 
SubjectCode11 
=11  !
subject11" )
.11) *
SubjectCode11* 5
;115 6
sub22 
.22 
SubjectNameVn22 !
=22" #
subject22$ +
.22+ ,
SubjectNameVn22, 9
;229 :
sub33 
.33 
SubjectNameEn33 !
=33" #
subject33$ +
.33+ ,
SubjectNameEn33, 9
;339 :
sub44 
.44 
PreRequisite44  
=44! "
subject44# *
.44* +
PreRequisite44+ 7
;447 8
sub55 
.55 
StatusId55 
=55 
subject55 &
.55& '
StatusId55' /
;55/ 0
_context66 
.66 
Subject66  
.66  !
AddAsync66! )
(66) *
sub66* -
)66- .
;66. /
await77 
_context77 
.77 
SaveChangesAsync77 /
(77/ 0
)770 1
;771 2
}:: 
catch;; 
(;; 
	Exception;; 
ex;; 
);;  
{<< 
throw== 
ex== 
;== 
}>> 
ViewData?? 
[?? 
$str?? 
]??  
=??! "
new??# &

SelectList??' 1
(??1 2
_context??2 :
.??: ;
Status??; A
,??A B
$str??C M
,??M N
$str??O Y
,??Y Z
subject??[ b
.??b c
StatusId??c k
)??k l
;??l m
return@@ 
RedirectToAction@@ #
(@@# $
nameof@@$ *
(@@* +
Index@@+ 0
)@@0 1
)@@1 2
;@@2 3
}BB 	
publicEE 
asyncEE 
TaskEE 
<EE 
IActionResultEE '
>EE' (
EditEE) -
(EE- .
stringEE. 4
?EE4 5
idEE6 8
)EE8 9
{FF 	
ifGG 
(GG 
idGG 
==GG 
nullGG 
||GG 
_contextGG &
.GG& '
SubjectGG' .
==GG/ 1
nullGG2 6
)GG6 7
{HH 
returnII 
NotFoundII 
(II  
)II  !
;II! "
}JJ 
varLL 
subjectLL 
=LL 
awaitLL 
_contextLL  (
.LL( )
SubjectLL) 0
.LL0 1
	FindAsyncLL1 :
(LL: ;
idLL; =
)LL= >
;LL> ?
ifMM 
(MM 
subjectMM 
==MM 
nullMM 
)MM  
{NN 
returnOO 
NotFoundOO 
(OO  
)OO  !
;OO! "
}PP 
ViewDataQQ 
[QQ 
$strQQ 
]QQ  
=QQ! "
newQQ# &

SelectListQQ' 1
(QQ1 2
_contextQQ2 :
.QQ: ;
StatusQQ; A
,QQA B
$strQQC M
,QQM N
$strQQO [
,QQ[ \
subjectQQ] d
.QQd e
StatusIdQQe m
)QQm n
;QQn o
returnRR 
ViewRR 
(RR 
subjectRR 
)RR  
;RR  !
}SS 	
[VV 	
HttpPostVV	 
]VV 
[WW 	$
ValidateAntiForgeryTokenWW	 !
]WW! "
publicXX 
asyncXX 
TaskXX 
<XX 
IActionResultXX '
>XX' (
EditXX) -
(XX- .
[XX. /
BindXX/ 3
(XX3 4
$strXX4 s
)XXs t
]XXt u
SubjectXXv }
subject	XX~ Ö
)
XXÖ Ü
{YY 	
try\\ 
{]] 
var^^ 
sub^^ 
=^^ 
await^^ 
_context^^  (
.^^( )
Subject^^) 0
.^^0 1 
SingleOrDefaultAsync^^1 E
(^^E F
s^^F G
=>^^H J
s^^K L
.^^L M
SubjectCode^^M X
.^^X Y
Equals^^Y _
(^^_ `
subject^^` g
.^^g h
SubjectCode^^h s
)^^s t
)^^t u
;^^u v
if__ 
(__ 
sub__ 
==__ 
null__ 
)__  
{`` 
returnaa 
NotFoundaa #
(aa# $
)aa$ %
;aa% &
}bb 
subcc 
.cc 
SubjectNameVncc !
=cc" #
subjectcc$ +
.cc+ ,
SubjectNameVncc, 9
;cc9 :
subdd 
.dd 
SubjectNameEndd !
=dd" #
subjectdd$ +
.dd+ ,
SubjectNameEndd, 9
;dd9 :
subee 
.ee 
PreRequisiteee  
=ee! "
subjectee# *
.ee* +
PreRequisiteee+ 7
;ee7 8
subff 
.ff 
StatusIdff 
=ff 
subjectff &
.ff& '
StatusIdff' /
;ff/ 0
awaitgg 
_contextgg 
.gg 
SaveChangesAsyncgg /
(gg/ 0
)gg0 1
;gg1 2
}hh 
catchii 
(ii 
	Exceptionii 
exii 
)ii  
{jj 
ifkk 
(kk 
!kk 
SubjectExistskk "
(kk" #
subjectkk# *
.kk* +
SubjectCodekk+ 6
)kk6 7
)kk7 8
{ll 
returnmm 
NotFoundmm #
(mm# $
)mm$ %
;mm% &
}nn 
elseoo 
{pp 
throwqq 
;qq 
}rr 
}ss 
ViewDatatt 
[tt 
$strtt 
]tt  
=tt! "
newtt# &

SelectListtt' 1
(tt1 2
_contexttt2 :
.tt: ;
Statustt; A
,ttA B
$strttC M
,ttM N
$strttO Y
,ttY Z
subjecttt[ b
.ttb c
StatusIdttc k
)ttk l
;ttl m
returnuu 
RedirectToActionuu #
(uu# $
nameofuu$ *
(uu* +
Indexuu+ 0
)uu0 1
)uu1 2
;uu2 3
}vv 	
publiczz 
asynczz 
Taskzz 
<zz 
IActionResultzz '
>zz' (
Deletezz) /
(zz/ 0
stringzz0 6
?zz6 7
idzz8 :
)zz: ;
{{{ 	
if|| 
(|| 
id|| 
==|| 
null|| 
|||| 
_context|| &
.||& '
Subject||' .
==||/ 1
null||2 6
)||6 7
{}} 
return~~ 
NotFound~~ 
(~~  
)~~  !
;~~! "
} 
var
ÅÅ 
subject
ÅÅ 
=
ÅÅ 
await
ÅÅ 
_context
ÅÅ  (
.
ÅÅ( )
Subject
ÅÅ) 0
.
ÇÇ 
Include
ÇÇ 
(
ÇÇ 
s
ÇÇ 
=>
ÇÇ 
s
ÇÇ 
.
ÇÇ  
Status
ÇÇ  &
)
ÇÇ& '
.
ÉÉ !
FirstOrDefaultAsync
ÉÉ $
(
ÉÉ$ %
m
ÉÉ% &
=>
ÉÉ' )
m
ÉÉ* +
.
ÉÉ+ ,
SubjectCode
ÉÉ, 7
==
ÉÉ8 :
id
ÉÉ; =
)
ÉÉ= >
;
ÉÉ> ?
if
ÑÑ 
(
ÑÑ 
subject
ÑÑ 
==
ÑÑ 
null
ÑÑ 
)
ÑÑ  
{
ÖÖ 
return
ÜÜ 
NotFound
ÜÜ 
(
ÜÜ  
)
ÜÜ  !
;
ÜÜ! "
}
áá 
return
ââ 
View
ââ 
(
ââ 
subject
ââ 
)
ââ  
;
ââ  !
}
ää 	
[
çç 	
HttpPost
çç	 
,
çç 

ActionName
çç 
(
çç 
$str
çç &
)
çç& '
]
çç' (
[
éé 	&
ValidateAntiForgeryToken
éé	 !
]
éé! "
public
èè 
async
èè 
Task
èè 
<
èè 
IActionResult
èè '
>
èè' (
DeleteConfirmed
èè) 8
(
èè8 9
String
èè9 ?
?
èè? @
id
èèA C
)
èèC D
{
êê 	
if
ëë 
(
ëë 
_context
ëë 
.
ëë 
Subject
ëë 
==
ëë  "
null
ëë# '
)
ëë' (
{
íí 
return
ìì 
Problem
ìì 
(
ìì 
$str
ìì K
)
ììK L
;
ììL M
}
îî 
var
ïï 
subject
ïï 
=
ïï 
await
ïï 
_context
ïï  (
.
ïï( )
Subject
ïï) 0
.
ïï0 1
	FindAsync
ïï1 :
(
ïï: ;
id
ïï; =
)
ïï= >
;
ïï> ?
var
ññ 
sys
ññ 
=
ññ 
_context
ññ 
.
ññ 
Syllabus
ññ '
.
ññ' (
Where
ññ( -
(
ññ- .
s
ññ. /
=>
ññ0 2
s
ññ3 4
.
ññ4 5
SubjectCode
ññ5 @
==
ññA C
id
ññD F
)
ññF G
.
ññG H
ToList
ññH N
(
ññN O
)
ññO P
;
ññP Q
var
óó 
ses
óó 
=
óó 
_context
óó 
.
óó 
Session
óó &
.
óó& '
Where
óó' ,
(
óó, -
s
óó- .
=>
óó/ 1
s
óó1 2
.
óó2 3
SubjectCode
óó3 >
==
óó? A
id
óóB D
)
óóD E
.
óóE F
ToList
óóF L
(
óóL M
)
óóM N
;
óóN O
var
òò 
ma
òò 
=
òò 
_context
òò 
.
òò 
Material
òò &
.
òò& '
Where
òò' ,
(
òò, -
s
òò- .
=>
òò/ 1
s
òò2 3
.
òò3 4
SubjectCode
òò4 ?
!=
òò@ B
id
òòC E
)
òòE F
.
òòF G
ToList
òòG M
(
òòM N
)
òòN O
;
òòO P
var
ôô 
mot
ôô 
=
ôô 
_context
ôô 
.
ôô 
MaterialOfTeacher
ôô 0
.
ôô0 1
Where
ôô1 6
(
ôô6 7
s
ôô7 8
=>
ôô9 ;
s
ôô< =
.
ôô= >
SubjectCode
ôô> I
==
ôôJ L
id
ôôM O
)
ôôO P
.
ôôP Q
ToList
ôôQ W
(
ôôW X
)
ôôX Y
;
ôôY Z
foreach
öö 
(
öö 
var
öö 
syllabus
öö !
in
öö" $
sys
öö% (
)
öö( )
{
õõ 
var
úú 

assessment
úú 
=
úú  
await
úú! &
_context
úú' /
.
úú/ 0

Assessment
úú0 :
.
úú: ;
Where
úú; @
(
úú@ A
a
úúA B
=>
úúC E
a
úúF G
.
úúG H

SyllabusId
úúH R
==
úúS U
syllabus
úúV ^
.
úú^ _

SyllabusId
úú_ i
)
úúi j
.
úúj k
ToListAsync
úúk v
(
úúv w
)
úúw x
;
úúx y
_context
ùù 
.
ùù 

Assessment
ùù #
.
ùù# $
RemoveRange
ùù$ /
(
ùù/ 0

assessment
ùù0 :
)
ùù: ;
;
ùù; <
}
ûû 
_context
üü 
.
üü 
Syllabus
üü 
.
üü 
RemoveRange
üü )
(
üü) *
sys
üü* -
)
üü- .
;
üü. /
_context
†† 
.
†† 
Session
†† 
.
†† 
RemoveRange
†† (
(
††( )
ses
††) ,
)
††, -
;
††- .
_context
°° 
.
°° 
Material
°° 
.
°° 
RemoveRange
°° )
(
°°) *
ma
°°* ,
)
°°, -
;
°°- .
_context
¢¢ 
.
¢¢ 
Subject
¢¢ 
.
¢¢ 
RemoveRange
¢¢ (
(
¢¢( )
subject
¢¢) 0
)
¢¢0 1
;
¢¢1 2
_context
££ 
.
££ 
MaterialOfTeacher
££ &
.
££& '
RemoveRange
££' 2
(
££2 3
mot
££3 6
)
££6 7
;
££7 8
await
§§ 
_context
§§ 
.
§§ 
SaveChangesAsync
§§ +
(
§§+ ,
)
§§, -
;
§§- .
return
•• 
RedirectToAction
•• #
(
••# $
nameof
••$ *
(
••* +
Index
••+ 0
)
••0 1
)
••1 2
;
••2 3
}
¶¶ 	
private
™™ 
bool
™™ 
SubjectExists
™™ "
(
™™" #
string
™™# )
id
™™* ,
)
™™, -
{
´´ 	
bool
¨¨ 
isExist
¨¨ 
=
¨¨ 
(
¨¨ 
_context
¨¨ $
.
¨¨$ %
Subject
¨¨% ,
?
¨¨, -
.
¨¨- .
Any
¨¨. 1
(
¨¨1 2
e
¨¨2 3
=>
¨¨4 6
e
¨¨7 8
.
¨¨8 9
SubjectCode
¨¨9 D
==
¨¨E G
id
¨¨H J
)
¨¨J K
)
¨¨K L
.
¨¨L M
GetValueOrDefault
¨¨M ^
(
¨¨^ _
)
¨¨_ `
;
¨¨` a
return
≠≠ 
isExist
≠≠ 
;
≠≠ 
}
ÆÆ 	
}
±± 
}≤≤ ô`
CD:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\ADMINSubjectsController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class #
ADMINSubjectsController (
:) *

Controller+ 5
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public #
ADMINSubjectsController &
(& '
AppDbContext' 3
context4 ;
); <
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
appDbContext 
= 
_context '
.' (
Subject( /
./ 0
Include0 7
(7 8
s8 9
=>: <
s= >
.> ?
Status? E
)E F
;F G
return 
View 
( 
await 
appDbContext *
.* +
ToListAsync+ 6
(6 7
)7 8
)8 9
;9 :
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
string1 7
id8 :
): ;
{ 	
if   
(   
id   
==   
null   
||   
_context   &
.  & '
Subject  ' .
==  / 1
null  2 6
)  6 7
{!! 
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
var%% 
subject%% 
=%% 
await%% 
_context%%  (
.%%( )
Subject%%) 0
.&& 
Include&& 
(&& 
s&& 
=>&& 
s&& 
.&&  
Status&&  &
)&&& '
.'' 
FirstOrDefaultAsync'' $
(''$ %
m''% &
=>''' )
m''* +
.''+ ,
SubjectCode'', 7
==''8 :
id''; =
)''= >
;''> ?
if(( 
((( 
subject(( 
==(( 
null(( 
)((  
{)) 
return** 
NotFound** 
(**  
)**  !
;**! "
}++ 
return-- 
View-- 
(-- 
subject-- 
)--  
;--  !
}.. 	
public11 
IActionResult11 
Create11 #
(11# $
)11$ %
{22 	
ViewData33 
[33 
$str33 
]33  
=33! "
new33# &

SelectList33' 1
(331 2
_context332 :
.33: ;
Status33; A
,33A B
$str33C M
,33M N
$str33O Y
)33Y Z
;33Z [
return44 
View44 
(44 
)44 
;44 
}55 	
[:: 	
HttpPost::	 
]:: 
[;; 	$
ValidateAntiForgeryToken;;	 !
];;! "
public<< 
async<< 
Task<< 
<<< 
IActionResult<< '
><<' (
Create<<) /
(<</ 0
[<<0 1
Bind<<1 5
(<<5 6
$str<<6 ~
)<<~ 
]	<< Ä
Subject
<<Å à
subject
<<â ê
)
<<ê ë
{== 	
if>> 
(>> 

ModelState>> 
.>> 
IsValid>> "
)>>" #
{?? 
_context@@ 
.@@ 
Add@@ 
(@@ 
subject@@ $
)@@$ %
;@@% &
awaitAA 
_contextAA 
.AA 
SaveChangesAsyncAA /
(AA/ 0
)AA0 1
;AA1 2
returnBB 
RedirectToActionBB '
(BB' (
nameofBB( .
(BB. /
IndexBB/ 4
)BB4 5
)BB5 6
;BB6 7
}CC 
ViewDataDD 
[DD 
$strDD 
]DD  
=DD! "
newDD# &

SelectListDD' 1
(DD1 2
_contextDD2 :
.DD: ;
StatusDD; A
,DDA B
$strDDC M
,DDM N
$strDDO Y
,DDY Z
subjectDD[ b
.DDb c
StatusIdDDc k
)DDk l
;DDl m
returnEE 
ViewEE 
(EE 
subjectEE 
)EE  
;EE  !
}FF 	
publicII 
asyncII 
TaskII 
<II 
IActionResultII '
>II' (
EditII) -
(II- .
stringII. 4
idII5 7
)II7 8
{JJ 	
ifKK 
(KK 
idKK 
==KK 
nullKK 
||KK 
_contextKK &
.KK& '
SubjectKK' .
==KK/ 1
nullKK2 6
)KK6 7
{LL 
returnMM 
NotFoundMM 
(MM  
)MM  !
;MM! "
}NN 
varPP 
subjectPP 
=PP 
awaitPP 
_contextPP  (
.PP( )
SubjectPP) 0
.PP0 1
	FindAsyncPP1 :
(PP: ;
idPP; =
)PP= >
;PP> ?
ifQQ 
(QQ 
subjectQQ 
==QQ 
nullQQ 
)QQ  
{RR 
returnSS 
NotFoundSS 
(SS  
)SS  !
;SS! "
}TT 
ViewDataUU 
[UU 
$strUU 
]UU  
=UU! "
newUU# &

SelectListUU' 1
(UU1 2
_contextUU2 :
.UU: ;
StatusUU; A
,UUA B
$strUUC M
,UUM N
$strUUO Y
,UUY Z
subjectUU[ b
.UUb c
StatusIdUUc k
)UUk l
;UUl m
returnVV 
ViewVV 
(VV 
subjectVV 
)VV  
;VV  !
}WW 	
[\\ 	
HttpPost\\	 
]\\ 
[]] 	$
ValidateAntiForgeryToken]]	 !
]]]! "
public^^ 
async^^ 
Task^^ 
<^^ 
IActionResult^^ '
>^^' (
Edit^^) -
(^^- .
string^^. 4
id^^5 7
,^^7 8
[^^9 :
Bind^^: >
(^^> ?
$str	^^? á
)
^^á à
]
^^à â
Subject
^^ä ë
subject
^^í ô
)
^^ô ö
{__ 	
if`` 
(`` 
id`` 
!=`` 
subject`` 
.`` 
SubjectCode`` )
)``) *
{aa 
returnbb 
NotFoundbb 
(bb  
)bb  !
;bb! "
}cc 
ifee 
(ee 

ModelStateee 
.ee 
IsValidee "
)ee" #
{ff 
trygg 
{hh 
_contextii 
.ii 
Updateii #
(ii# $
subjectii$ +
)ii+ ,
;ii, -
awaitjj 
_contextjj "
.jj" #
SaveChangesAsyncjj# 3
(jj3 4
)jj4 5
;jj5 6
}kk 
catchll 
(ll (
DbUpdateConcurrencyExceptionll 3
)ll3 4
{mm 
ifnn 
(nn 
!nn 
SubjectExistsnn &
(nn& '
subjectnn' .
.nn. /
SubjectCodenn/ :
)nn: ;
)nn; <
{oo 
returnpp 
NotFoundpp '
(pp' (
)pp( )
;pp) *
}qq 
elserr 
{ss 
throwtt 
;tt 
}uu 
}vv 
returnww 
RedirectToActionww '
(ww' (
nameofww( .
(ww. /
Indexww/ 4
)ww4 5
)ww5 6
;ww6 7
}xx 
ViewDatayy 
[yy 
$stryy 
]yy  
=yy! "
newyy# &

SelectListyy' 1
(yy1 2
_contextyy2 :
.yy: ;
Statusyy; A
,yyA B
$stryyC M
,yyM N
$stryyO Y
,yyY Z
subjectyy[ b
.yyb c
StatusIdyyc k
)yyk l
;yyl m
returnzz 
Viewzz 
(zz 
subjectzz 
)zz  
;zz  !
}{{ 	
public~~ 
async~~ 
Task~~ 
<~~ 
IActionResult~~ '
>~~' (
Delete~~) /
(~~/ 0
string~~0 6
id~~7 9
)~~9 :
{ 	
if
ÄÄ 
(
ÄÄ 
id
ÄÄ 
==
ÄÄ 
null
ÄÄ 
||
ÄÄ 
_context
ÄÄ &
.
ÄÄ& '
Subject
ÄÄ' .
==
ÄÄ/ 1
null
ÄÄ2 6
)
ÄÄ6 7
{
ÅÅ 
return
ÇÇ 
NotFound
ÇÇ 
(
ÇÇ  
)
ÇÇ  !
;
ÇÇ! "
}
ÉÉ 
var
ÖÖ 
subject
ÖÖ 
=
ÖÖ 
await
ÖÖ 
_context
ÖÖ  (
.
ÖÖ( )
Subject
ÖÖ) 0
.
ÜÜ 
Include
ÜÜ 
(
ÜÜ 
s
ÜÜ 
=>
ÜÜ 
s
ÜÜ 
.
ÜÜ  
Status
ÜÜ  &
)
ÜÜ& '
.
áá !
FirstOrDefaultAsync
áá $
(
áá$ %
m
áá% &
=>
áá' )
m
áá* +
.
áá+ ,
SubjectCode
áá, 7
==
áá8 :
id
áá; =
)
áá= >
;
áá> ?
if
àà 
(
àà 
subject
àà 
==
àà 
null
àà 
)
àà  
{
ââ 
return
ää 
NotFound
ää 
(
ää  
)
ää  !
;
ää! "
}
ãã 
return
çç 
View
çç 
(
çç 
subject
çç 
)
çç  
;
çç  !
}
éé 	
[
ëë 	
HttpPost
ëë	 
,
ëë 

ActionName
ëë 
(
ëë 
$str
ëë &
)
ëë& '
]
ëë' (
[
íí 	&
ValidateAntiForgeryToken
íí	 !
]
íí! "
public
ìì 
async
ìì 
Task
ìì 
<
ìì 
IActionResult
ìì '
>
ìì' (
DeleteConfirmed
ìì) 8
(
ìì8 9
string
ìì9 ?
id
ìì@ B
)
ììB C
{
îî 	
if
ïï 
(
ïï 
_context
ïï 
.
ïï 
Subject
ïï  
==
ïï! #
null
ïï$ (
)
ïï( )
{
ññ 
return
óó 
Problem
óó 
(
óó 
$str
óó L
)
óóL M
;
óóM N
}
òò 
var
ôô 
subject
ôô 
=
ôô 
await
ôô 
_context
ôô  (
.
ôô( )
Subject
ôô) 0
.
ôô0 1
	FindAsync
ôô1 :
(
ôô: ;
id
ôô; =
)
ôô= >
;
ôô> ?
if
öö 
(
öö 
subject
öö 
!=
öö 
null
öö 
)
öö  
{
õõ 
_context
úú 
.
úú 
Subject
úú  
.
úú  !
Remove
úú! '
(
úú' (
subject
úú( /
)
úú/ 0
;
úú0 1
}
ùù 
await
üü 
_context
üü 
.
üü 
SaveChangesAsync
üü +
(
üü+ ,
)
üü, -
;
üü- .
return
†† 
RedirectToAction
†† #
(
††# $
nameof
††$ *
(
††* +
Index
††+ 0
)
††0 1
)
††1 2
;
††2 3
}
°° 	
private
££ 
bool
££ 
SubjectExists
££ "
(
££" #
string
££# )
id
££* ,
)
££, -
{
§§ 	
return
•• 
(
•• 
_context
•• 
.
•• 
Subject
•• $
?
••$ %
.
••% &
Any
••& )
(
••) *
e
••* +
=>
••, .
e
••/ 0
.
••0 1
SubjectCode
••1 <
==
••= ?
id
••@ B
)
••B C
)
••C D
.
••D E
GetValueOrDefault
••E V
(
••V W
)
••W X
;
••X Y
}
¶¶ 	
}
ßß 
}®® ∞î
CD:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\ADMINSyllabusController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class #
ADMINSyllabusController (
:) *

Controller+ 5
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public #
ADMINSyllabusController &
(& '
AppDbContext' 3
context4 ;
); <
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
appDbContext 
= 
_context '
.' (
Syllabus( 0
.0 1
Include1 8
(8 9
s9 :
=>; =
s> ?
.? @
Decision@ H
)H I
;I J
return 
View 
( 
await 
appDbContext *
.* +
ToListAsync+ 6
(6 7
)7 8
)8 9
;9 :
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{ 	
if   
(   
id   
==   
null   
)   
{!! 
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
var%% 
syllabus%% 
=%% 
await%%  
_context%%! )
.%%) *
Syllabus%%* 2
.&& 
Include&& 
(&& 
s&& 
=>&& 
s&& 
.&&  
Decision&&  (
)&&( )
.'' 
Include'' 
('' 
s'' 
=>'' 
s'' 
.''  
Assessments''  +
)''+ ,
.(( 
FirstOrDefaultAsync(( $
((($ %
m((% &
=>((' )
m((* +
.((+ ,

SyllabusId((, 6
==((7 9
id((: <
)((< =
;((= >
if)) 
()) 
syllabus)) 
==)) 
null))  
)))  !
{** 
return++ 
NotFound++ 
(++  
)++  !
;++! "
},, 
return.. 
View.. 
(.. 
syllabus..  
)..  !
;..! "
}// 	
public22 
IActionResult22 
Create22 #
(22# $
)22$ %
{33 	
ViewBag44 
.44 
Sub44 
=44 
_context44 "
.44" #
Subject44# *
.44* +
ToList44+ 1
(441 2
)442 3
;443 4
ViewData55 
[55 
$str55 !
]55! "
=55# $
new55% (

SelectList55) 3
(553 4
_context554 <
.55< =
Decision55= E
,55E F
$str55G S
,55S T
$str55U a
)55a b
;55b c
return66 
View66 
(66 
)66 
;66 
}77 	
[<< 	
HttpPost<<	 
]<< 
[== 	$
ValidateAntiForgeryToken==	 !
]==! "
public>> 
async>> 
Task>> 
<>> 
IActionResult>> '
>>>' (
Create>>) /
(>>/ 0
[>>0 1
Bind>>1 5
(>>5 6
$str	>>6 ¸
)
>>¸ ˝
]
>>˝ ˛
Syllabus
>>ˇ á
syllabus
>>à ê
)
>>ê ë
{?? 	
tryBB 
{CC 
ifDD 
(DD 
SyllabusExistsDD "
(DD" #
syllabusDD# +
.DD+ ,

SyllabusIdDD, 6
)DD6 7
)DD7 8
{EE 
returnFF 
ViewFF 
(FF  
syllabusFF  (
)FF( )
;FF) *
}GG 
SyllabusII 
sylII 
=II 
newII "
SyllabusII# +
(II+ ,
)II, -
;II- .
sylJJ 
.JJ 
SyllabusNameVnJJ "
=JJ# $
syllabusJJ% -
.JJ- .
SyllabusNameVnJJ. <
;JJ< =
sylKK 
.KK 
SyllabusNameEnKK "
=KK# $
syllabusKK% -
.KK- .
SyllabusNameEnKK. <
;KK< =
sylLL 
.LL 
SubjectCodeLL 
=LL  !
syllabusLL" *
.LL* +
SubjectCodeLL+ 6
;LL6 7
sylMM 
.MM 
NoCreditMM 
=MM 
syllabusMM '
.MM' (
NoCreditMM( 0
;MM0 1
sylOO 
.OO 
DegreeLevelOO 
=OO  !
syllabusOO" *
.OO* +
DegreeLevelOO+ 6
;OO6 7
sylPP 
.PP 
TimeAllocationPP "
=PP# $
syllabusPP% -
.PP- .
TimeAllocationPP. <
;PP< =
sylQQ 
.QQ 
PreRequisiteQQ  
=QQ! "
syllabusQQ# +
.QQ+ ,
PreRequisiteQQ, 8
;QQ8 9
sylRR 
.RR 
DescriptionRR 
=RR  !
syllabusRR" *
.RR* +
DescriptionRR+ 6
;RR6 7
sylSS 
.SS 
StudentTaskSS 
=SS  !
syllabusSS" *
.SS* +
StudentTaskSS+ 6
;SS6 7
sylTT 
.TT 
ToolTT 
=TT 
syllabusTT #
.TT# $
ToolTT$ (
;TT( )
sylUU 
.UU 
ScoringScaleUU  
=UU! "
syllabusUU# +
.UU+ ,
ScoringScaleUU, 8
;UU8 9
sylVV 
.VV 

DecisionNoVV 
=VV  
syllabusVV! )
.VV) *

DecisionNoVV* 4
;VV4 5
sylWW 
.WW 

IsApprovedWW 
=WW  
syllabusWW! )
.WW) *

IsApprovedWW* 4
;WW4 5
sylXX 
.XX 
NoteXX 
=XX 
syllabusXX #
.XX# $
NoteXX$ (
;XX( )
sylYY 
.YY 
MinAvgMarkToPassYY $
=YY% &
syllabusYY' /
.YY/ 0
MinAvgMarkToPassYY0 @
;YY@ A
sylZZ 
.ZZ 
IsActiveZZ 
=ZZ 
syllabusZZ '
.ZZ' (
IsActiveZZ( 0
;ZZ0 1
_context[[ 
.[[ 
Syllabus[[ !
.[[! "
AddAsync[[" *
([[* +
syl[[+ .
)[[. /
;[[/ 0
await\\ 
_context\\ 
.\\ 
SaveChangesAsync\\ /
(\\/ 0
)\\0 1
;\\1 2
}]] 
catch^^ 
(^^ 
	Exception^^ 
ex^^ 
)^^  
{__ 
throwaa 
exaa 
;aa 
}cc 
ViewDataff 
[ff 
$strff !
]ff! "
=ff# $
newff% (

SelectListff) 3
(ff3 4
_contextff4 <
.ff< =
Decisionff= E
,ffE F
$strffG S
,ffS T
$strffU a
,ffa b
syllabusffc k
.ffk l

DecisionNoffl v
)ffv w
;ffw x
returngg 
RedirectToActiongg #
(gg# $
nameofgg$ *
(gg* +
Indexgg+ 0
)gg0 1
)gg1 2
;gg2 3
}jj 	
publicmm 
asyncmm 
Taskmm 
<mm 
IActionResultmm '
>mm' (
Editmm) -
(mm- .
intmm. 1
?mm1 2
idmm3 5
)mm5 6
{nn 	
ifoo 
(oo 
idoo 
==oo 
nulloo 
||oo 
_contextoo &
.oo& '
Syllabusoo' /
==oo0 2
nulloo3 7
)oo7 8
{pp 
returnqq 
NotFoundqq 
(qq  
)qq  !
;qq! "
}rr 
vartt 
syllabustt 
=tt 
awaittt  
_contexttt! )
.tt) *
Syllabustt* 2
.tt2 3
	FindAsynctt3 <
(tt< =
idtt= ?
)tt? @
;tt@ A
ifuu 
(uu 
syllabusuu 
==uu 
nulluu  
)uu  !
{vv 
returnww 
NotFoundww 
(ww  
)ww  !
;ww! "
}xx 
ViewBagyy 
.yy 
Subyy 
=yy 
_contextyy "
.yy" #
Subjectyy# *
.yy* +
ToListyy+ 1
(yy1 2
)yy2 3
;yy3 4
ViewDatazz 
[zz 
$strzz !
]zz! "
=zz# $
newzz% (

SelectListzz) 3
(zz3 4
_contextzz4 <
.zz< =
Decisionzz= E
,zzE F
$strzzG S
,zzS T
$strzzU a
,zza b
syllabuszzc k
.zzk l

DecisionNozzl v
)zzv w
;zzw x
return{{ 
View{{ 
({{ 
syllabus{{  
){{  !
;{{! "
}|| 	
[
ÅÅ 	
HttpPost
ÅÅ	 
]
ÅÅ 
[
ÇÇ 	&
ValidateAntiForgeryToken
ÇÇ	 !
]
ÇÇ! "
public
ÉÉ 
async
ÉÉ 
Task
ÉÉ 
<
ÉÉ 
IActionResult
ÉÉ '
>
ÉÉ' (
Edit
ÉÉ) -
(
ÉÉ- .
int
ÉÉ. 1
id
ÉÉ2 4
,
ÉÉ4 5
[
ÉÉ6 7
Bind
ÉÉ7 ;
(
ÉÉ; <
$strÉÉ< Ç
)ÉÉÇ É
]ÉÉÉ Ñ
SyllabusÉÉÖ ç
syllabusÉÉé ñ
)ÉÉñ ó
{
ÑÑ 	
if
ÖÖ 
(
ÖÖ 
id
ÖÖ 
!=
ÖÖ 
syllabus
ÖÖ 
.
ÖÖ 

SyllabusId
ÖÖ )
)
ÖÖ) *
{
ÜÜ 
return
áá 
NotFound
áá 
(
áá  
)
áá  !
;
áá! "
}
àà 
try
ãã 
{
åå 
var
çç 
syl
çç 
=
çç 
await
çç 
_context
çç  (
.
çç( )
Syllabus
çç) 1
.
çç1 2"
SingleOrDefaultAsync
çç2 F
(
ççF G
s
ççG H
=>
ççI K
s
ççL M
.
ççM N

SyllabusId
ççN X
==
ççY [
id
çç\ ^
)
çç^ _
;
çç_ `
syl
éé 
.
éé 
SyllabusNameVn
éé "
=
éé# $
syllabus
éé% -
.
éé- .
SyllabusNameVn
éé. <
;
éé< =
syl
èè 
.
èè 
SyllabusNameEn
èè "
=
èè# $
syllabus
èè% -
.
èè- .
SyllabusNameEn
èè. <
;
èè< =
syl
êê 
.
êê 
SubjectCode
êê 
=
êê  !
syllabus
êê" *
.
êê* +
SubjectCode
êê+ 6
;
êê6 7
syl
ëë 
.
ëë 
NoCredit
ëë 
=
ëë 
syllabus
ëë '
.
ëë' (
NoCredit
ëë( 0
;
ëë0 1
syl
ìì 
.
ìì 
DegreeLevel
ìì 
=
ìì  !
syllabus
ìì" *
.
ìì* +
DegreeLevel
ìì+ 6
;
ìì6 7
syl
îî 
.
îî 
TimeAllocation
îî "
=
îî# $
syllabus
îî% -
.
îî- .
TimeAllocation
îî. <
;
îî< =
syl
ïï 
.
ïï 
PreRequisite
ïï  
=
ïï! "
syllabus
ïï# +
.
ïï+ ,
PreRequisite
ïï, 8
;
ïï8 9
syl
ññ 
.
ññ 
Description
ññ 
=
ññ  !
syllabus
ññ" *
.
ññ* +
Description
ññ+ 6
;
ññ6 7
syl
óó 
.
óó 
StudentTask
óó 
=
óó  !
syllabus
óó" *
.
óó* +
StudentTask
óó+ 6
;
óó6 7
syl
òò 
.
òò 
Tool
òò 
=
òò 
syllabus
òò #
.
òò# $
Tool
òò$ (
;
òò( )
syl
ôô 
.
ôô 
ScoringScale
ôô  
=
ôô! "
syllabus
ôô# +
.
ôô+ ,
ScoringScale
ôô, 8
;
ôô8 9
syl
öö 
.
öö 

DecisionNo
öö 
=
öö  
syllabus
öö! )
.
öö) *

DecisionNo
öö* 4
;
öö4 5
syl
õõ 
.
õõ 

IsApproved
õõ 
=
õõ  
syllabus
õõ! )
.
õõ) *

IsApproved
õõ* 4
;
õõ4 5
syl
úú 
.
úú 
Note
úú 
=
úú 
syllabus
úú #
.
úú# $
Note
úú$ (
;
úú( )
syl
ùù 
.
ùù 
MinAvgMarkToPass
ùù $
=
ùù% &
syllabus
ùù' /
.
ùù/ 0
MinAvgMarkToPass
ùù0 @
;
ùù@ A
syl
ûû 
.
ûû 
IsActive
ûû 
=
ûû 
syllabus
ûû '
.
ûû' (
IsActive
ûû( 0
;
ûû0 1
await
üü 
_context
üü 
.
üü 
SaveChangesAsync
üü /
(
üü/ 0
)
üü0 1
;
üü1 2
}
†† 
catch
°° 
(
°° 
	Exception
°° 
ex
°° 
)
°°  
{
¢¢ 
if
££ 
(
££ 
!
££ 
SyllabusExists
££ #
(
££# $
syllabus
££$ ,
.
££, -

SyllabusId
££- 7
)
££7 8
)
££8 9
{
§§ 
return
•• 
NotFound
•• #
(
••# $
)
••$ %
;
••% &
}
¶¶ 
else
ßß 
{
®® 
throw
©© 
ex
©© 
;
©© 
}
™™ 
}
´´ 
ViewData
ÆÆ 
[
ÆÆ 
$str
ÆÆ !
]
ÆÆ! "
=
ÆÆ# $
new
ÆÆ% (

SelectList
ÆÆ) 3
(
ÆÆ3 4
_context
ÆÆ4 <
.
ÆÆ< =
Decision
ÆÆ= E
,
ÆÆE F
$str
ÆÆG S
,
ÆÆS T
$str
ÆÆU a
,
ÆÆa b
syllabus
ÆÆc k
.
ÆÆk l

DecisionNo
ÆÆl v
)
ÆÆv w
;
ÆÆw x
return
ØØ 
RedirectToAction
ØØ #
(
ØØ# $
nameof
ØØ$ *
(
ØØ* +
Index
ØØ+ 0
)
ØØ0 1
)
ØØ1 2
;
ØØ2 3
}
∞∞ 	
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 
IActionResult
≥≥ '
>
≥≥' (
Delete
≥≥) /
(
≥≥/ 0
int
≥≥0 3
?
≥≥3 4
id
≥≥5 7
)
≥≥7 8
{
¥¥ 	
if
µµ 
(
µµ 
id
µµ 
==
µµ 
null
µµ 
||
µµ 
_context
µµ &
.
µµ& '
Syllabus
µµ' /
==
µµ0 2
null
µµ3 7
)
µµ7 8
{
∂∂ 
return
∑∑ 
NotFound
∑∑ 
(
∑∑  
)
∑∑  !
;
∑∑! "
}
∏∏ 
var
∫∫ 
syllabus
∫∫ 
=
∫∫ 
await
∫∫  
_context
∫∫! )
.
∫∫) *
Syllabus
∫∫* 2
.
ªª 
Include
ªª 
(
ªª 
s
ªª 
=>
ªª 
s
ªª 
.
ªª  
Decision
ªª  (
)
ªª( )
.
ºº !
FirstOrDefaultAsync
ºº $
(
ºº$ %
m
ºº% &
=>
ºº' )
m
ºº* +
.
ºº+ ,

SyllabusId
ºº, 6
==
ºº7 9
id
ºº: <
)
ºº< =
;
ºº= >
if
ΩΩ 
(
ΩΩ 
syllabus
ΩΩ 
==
ΩΩ 
null
ΩΩ  
)
ΩΩ  !
{
ææ 
return
øø 
NotFound
øø 
(
øø  
)
øø  !
;
øø! "
}
¿¿ 
return
¬¬ 
View
¬¬ 
(
¬¬ 
syllabus
¬¬  
)
¬¬  !
;
¬¬! "
}
√√ 	
[
∆∆ 	
HttpPost
∆∆	 
,
∆∆ 

ActionName
∆∆ 
(
∆∆ 
$str
∆∆ &
)
∆∆& '
]
∆∆' (
[
«« 	&
ValidateAntiForgeryToken
««	 !
]
««! "
public
»» 
async
»» 
Task
»» 
<
»» 
IActionResult
»» '
>
»»' (
DeleteConfirmed
»») 8
(
»»8 9
int
»»9 <
id
»»= ?
)
»»? @
{
…… 	
var
   
syllabus
   
=
   
await
    
_context
  ! )
.
  ) *
Syllabus
  * 2
.
  2 3
Include
  3 :
(
  : ;
s
  ; <
=>
  = ?
s
  @ A
.
  A B
Assessments
  B M
)
  M N
.
  N O!
FirstOrDefaultAsync
  O b
(
  b c
s
  c d
=>
  e g
s
  h i
.
  i j

SyllabusId
  j t
==
  u w
id
  x z
)
  z {
;
  { |
if
ÀÀ 
(
ÀÀ 
syllabus
ÀÀ 
==
ÀÀ 
null
ÀÀ  
)
ÀÀ  !
{
ÃÃ 
return
ŒŒ 
NotFound
ŒŒ 
(
ŒŒ  
)
ŒŒ  !
;
ŒŒ! "
}
œœ 
_context
““ 
.
““ 

Assessment
““ 
.
““  
RemoveRange
““  +
(
““+ ,
syllabus
““, 4
.
““4 5
Assessments
““5 @
)
““@ A
;
““A B
_context
’’ 
.
’’ 
Syllabus
’’ 
.
’’ 
Remove
’’ $
(
’’$ %
syllabus
’’% -
)
’’- .
;
’’. /
await
÷÷ 
_context
÷÷ 
.
÷÷ 
SaveChangesAsync
÷÷ +
(
÷÷+ ,
)
÷÷, -
;
÷÷- .
return
ÿÿ 
RedirectToAction
ÿÿ #
(
ÿÿ# $
nameof
ÿÿ$ *
(
ÿÿ* +
Index
ÿÿ+ 0
)
ÿÿ0 1
)
ÿÿ1 2
;
ÿÿ2 3
}
ŸŸ 	
private
‹‹ 
bool
‹‹ 
SyllabusExists
‹‹ #
(
‹‹# $
int
‹‹$ '
id
‹‹( *
)
‹‹* +
{
›› 	
bool
ﬁﬁ 
isExist
ﬁﬁ 
=
ﬁﬁ 
(
ﬁﬁ 
_context
ﬁﬁ $
.
ﬁﬁ$ %
Syllabus
ﬁﬁ% -
?
ﬁﬁ- .
.
ﬁﬁ. /
Any
ﬁﬁ/ 2
(
ﬁﬁ2 3
e
ﬁﬁ3 4
=>
ﬁﬁ5 7
e
ﬁﬁ8 9
.
ﬁﬁ9 :

SyllabusId
ﬁﬁ: D
==
ﬁﬁE G
id
ﬁﬁH J
)
ﬁﬁJ K
)
ﬁﬁK L
.
ﬁﬁL M
GetValueOrDefault
ﬁﬁM ^
(
ﬁﬁ^ _
)
ﬁﬁ_ `
;
ﬁﬁ` a
return
ﬂﬂ 
isExist
ﬂﬂ 
;
ﬂﬂ 
}
‡‡ 	
}
‚‚ 
}„„ ‰_
=D:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\ComboesController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class 
ComboesController "
:# $

Controller% /
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
ComboesController  
(  !
AppDbContext! -
context. 5
)5 6
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
appDbContext 
= 
_context '
.' (
Combo( -
.- .
Include. 5
(5 6
c6 7
=>8 :
c; <
.< =

Curriculum= G
)G H
;H I
return 
View 
( 
await 
appDbContext *
.* +
ToListAsync+ 6
(6 7
)7 8
)8 9
;9 :
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{ 	
if   
(   
id   
==   
null   
||   
_context   &
.  & '
Combo  ' ,
==  - /
null  0 4
)  4 5
{!! 
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
var%% 
combo%% 
=%% 
await%% 
_context%% &
.%%& '
Combo%%' ,
.&& 
Include&& 
(&& 
c&& 
=>&& 
c&& 
.&&  

Curriculum&&  *
)&&* +
.'' 
FirstOrDefaultAsync'' $
(''$ %
m''% &
=>''' )
m''* +
.''+ ,
ComboId'', 3
==''4 6
id''7 9
)''9 :
;'': ;
if(( 
((( 
combo(( 
==(( 
null(( 
)(( 
{)) 
return** 
NotFound** 
(**  
)**  !
;**! "
}++ 
return-- 
View-- 
(-- 
combo-- 
)-- 
;-- 
}.. 	
public11 
IActionResult11 
Create11 #
(11# $
)11$ %
{22 	
ViewData33 
[33 
$str33 #
]33# $
=33% &
new33' *

SelectList33+ 5
(335 6
_context336 >
.33> ?

Curriculum33? I
,33I J
$str33K Y
,33Y Z
$str33[ k
)33k l
;33l m
return44 
View44 
(44 
)44 
;44 
}55 	
[:: 	
HttpPost::	 
]:: 
[;; 	$
ValidateAntiForgeryToken;;	 !
];;! "
public<< 
async<< 
Task<< 
<<< 
IActionResult<< '
><<' (
Create<<) /
(<</ 0
[<<0 1
Bind<<1 5
(<<5 6
$str<<6 m
)<<m n
]<<n o
Combo<<p u
combo<<v {
)<<{ |
{== 	
if>> 
(>> 

ModelState>> 
.>> 
IsValid>> "
)>>" #
{?? 
_context@@ 
.@@ 
Add@@ 
(@@ 
combo@@ "
)@@" #
;@@# $
awaitAA 
_contextAA 
.AA 
SaveChangesAsyncAA /
(AA/ 0
)AA0 1
;AA1 2
returnBB 
RedirectToActionBB '
(BB' (
nameofBB( .
(BB. /
IndexBB/ 4
)BB4 5
)BB5 6
;BB6 7
}CC 
ViewDataDD 
[DD 
$strDD #
]DD# $
=DD% &
newDD' *

SelectListDD+ 5
(DD5 6
_contextDD6 >
.DD> ?

CurriculumDD? I
,DDI J
$strDDK Y
,DDY Z
$strDD[ k
,DDk l
comboDDm r
.DDr s
CurriculumIdDDs 
)	DD Ä
;
DDÄ Å
returnEE 
ViewEE 
(EE 
comboEE 
)EE 
;EE 
}FF 	
publicII 
asyncII 
TaskII 
<II 
IActionResultII '
>II' (
EditII) -
(II- .
intII. 1
?II1 2
idII3 5
)II5 6
{JJ 	
ifKK 
(KK 
idKK 
==KK 
nullKK 
||KK 
_contextKK &
.KK& '
ComboKK' ,
==KK- /
nullKK0 4
)KK4 5
{LL 
returnMM 
NotFoundMM 
(MM  
)MM  !
;MM! "
}NN 
varPP 
comboPP 
=PP 
awaitPP 
_contextPP &
.PP& '
ComboPP' ,
.PP, -
	FindAsyncPP- 6
(PP6 7
idPP7 9
)PP9 :
;PP: ;
ifQQ 
(QQ 
comboQQ 
==QQ 
nullQQ 
)QQ 
{RR 
returnSS 
NotFoundSS 
(SS  
)SS  !
;SS! "
}TT 
ViewDataUU 
[UU 
$strUU #
]UU# $
=UU% &
newUU' *

SelectListUU+ 5
(UU5 6
_contextUU6 >
.UU> ?

CurriculumUU? I
,UUI J
$strUUK Y
,UUY Z
$strUU[ k
,UUk l
comboUUm r
.UUr s
CurriculumIdUUs 
)	UU Ä
;
UUÄ Å
returnVV 
ViewVV 
(VV 
comboVV 
)VV 
;VV 
}WW 	
[\\ 	
HttpPost\\	 
]\\ 
[]] 	$
ValidateAntiForgeryToken]]	 !
]]]! "
public^^ 
async^^ 
Task^^ 
<^^ 
IActionResult^^ '
>^^' (
Edit^^) -
(^^- .
int^^. 1
id^^2 4
,^^4 5
[^^6 7
Bind^^7 ;
(^^; <
$str^^< s
)^^s t
]^^t u
Combo^^v {
combo	^^| Å
)
^^Å Ç
{__ 	
if`` 
(`` 
id`` 
!=`` 
combo`` 
.`` 
ComboId`` #
)``# $
{aa 
returnbb 
NotFoundbb 
(bb  
)bb  !
;bb! "
}cc 
ifee 
(ee 

ModelStateee 
.ee 
IsValidee "
)ee" #
{ff 
trygg 
{hh 
_contextii 
.ii 
Updateii #
(ii# $
comboii$ )
)ii) *
;ii* +
awaitjj 
_contextjj "
.jj" #
SaveChangesAsyncjj# 3
(jj3 4
)jj4 5
;jj5 6
}kk 
catchll 
(ll (
DbUpdateConcurrencyExceptionll 3
)ll3 4
{mm 
ifnn 
(nn 
!nn 
ComboExistsnn $
(nn$ %
combonn% *
.nn* +
ComboIdnn+ 2
)nn2 3
)nn3 4
{oo 
returnpp 
NotFoundpp '
(pp' (
)pp( )
;pp) *
}qq 
elserr 
{ss 
throwtt 
;tt 
}uu 
}vv 
returnww 
RedirectToActionww '
(ww' (
nameofww( .
(ww. /
Indexww/ 4
)ww4 5
)ww5 6
;ww6 7
}xx 
ViewDatayy 
[yy 
$stryy #
]yy# $
=yy% &
newyy' *

SelectListyy+ 5
(yy5 6
_contextyy6 >
.yy> ?

Curriculumyy? I
,yyI J
$stryyK Y
,yyY Z
$stryy[ k
,yyk l
comboyym r
.yyr s
CurriculumIdyys 
)	yy Ä
;
yyÄ Å
returnzz 
Viewzz 
(zz 
combozz 
)zz 
;zz 
}{{ 	
public~~ 
async~~ 
Task~~ 
<~~ 
IActionResult~~ '
>~~' (
Delete~~) /
(~~/ 0
int~~0 3
?~~3 4
id~~5 7
)~~7 8
{ 	
if
ÄÄ 
(
ÄÄ 
id
ÄÄ 
==
ÄÄ 
null
ÄÄ 
||
ÄÄ 
_context
ÄÄ &
.
ÄÄ& '
Combo
ÄÄ' ,
==
ÄÄ- /
null
ÄÄ0 4
)
ÄÄ4 5
{
ÅÅ 
return
ÇÇ 
NotFound
ÇÇ 
(
ÇÇ  
)
ÇÇ  !
;
ÇÇ! "
}
ÉÉ 
var
ÖÖ 
combo
ÖÖ 
=
ÖÖ 
await
ÖÖ 
_context
ÖÖ &
.
ÖÖ& '
Combo
ÖÖ' ,
.
ÜÜ 
Include
ÜÜ 
(
ÜÜ 
c
ÜÜ 
=>
ÜÜ 
c
ÜÜ 
.
ÜÜ  

Curriculum
ÜÜ  *
)
ÜÜ* +
.
áá !
FirstOrDefaultAsync
áá $
(
áá$ %
m
áá% &
=>
áá' )
m
áá* +
.
áá+ ,
ComboId
áá, 3
==
áá4 6
id
áá7 9
)
áá9 :
;
áá: ;
if
àà 
(
àà 
combo
àà 
==
àà 
null
àà 
)
àà 
{
ââ 
return
ää 
NotFound
ää 
(
ää  
)
ää  !
;
ää! "
}
ãã 
return
çç 
View
çç 
(
çç 
combo
çç 
)
çç 
;
çç 
}
éé 	
[
ëë 	
HttpPost
ëë	 
,
ëë 

ActionName
ëë 
(
ëë 
$str
ëë &
)
ëë& '
]
ëë' (
[
íí 	&
ValidateAntiForgeryToken
íí	 !
]
íí! "
public
ìì 
async
ìì 
Task
ìì 
<
ìì 
IActionResult
ìì '
>
ìì' (
DeleteConfirmed
ìì) 8
(
ìì8 9
int
ìì9 <
id
ìì= ?
)
ìì? @
{
îî 	
if
ïï 
(
ïï 
_context
ïï 
.
ïï 
Combo
ïï 
==
ïï !
null
ïï" &
)
ïï& '
{
ññ 
return
óó 
Problem
óó 
(
óó 
$str
óó J
)
óóJ K
;
óóK L
}
òò 
var
ôô 
combo
ôô 
=
ôô 
await
ôô 
_context
ôô &
.
ôô& '
Combo
ôô' ,
.
ôô, -
	FindAsync
ôô- 6
(
ôô6 7
id
ôô7 9
)
ôô9 :
;
ôô: ;
if
öö 
(
öö 
combo
öö 
!=
öö 
null
öö 
)
öö 
{
õõ 
_context
úú 
.
úú 
Combo
úú 
.
úú 
Remove
úú %
(
úú% &
combo
úú& +
)
úú+ ,
;
úú, -
}
ùù 
await
üü 
_context
üü 
.
üü 
SaveChangesAsync
üü +
(
üü+ ,
)
üü, -
;
üü- .
return
†† 
RedirectToAction
†† #
(
††# $
nameof
††$ *
(
††* +
Index
††+ 0
)
††0 1
)
††1 2
;
††2 3
}
°° 	
private
££ 
bool
££ 
ComboExists
££  
(
££  !
int
££! $
id
££% '
)
££' (
{
§§ 	
return
••
 
(
•• 
_context
•• 
.
•• 
Combo
••  
?
••  !
.
••! "
Any
••" %
(
••% &
e
••& '
=>
••( *
e
••+ ,
.
••, -
ComboId
••- 4
==
••5 7
id
••8 :
)
••: ;
)
••; <
.
••< =
GetValueOrDefault
••= N
(
••N O
)
••O P
;
••P Q
}
¶¶ 	
}
ßß 
}®® µR
?D:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\FeedbacksController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class 
FeedbacksController $
:% &

Controller' 1
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
FeedbacksController "
(" #
AppDbContext# /
context0 7
)7 8
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
return 
_context 
. 
feedback &
!=' )
null* .
?/ 0
View 
( 
await $
_context% -
.- .
feedback. 6
.6 7
ToListAsync7 B
(B C
)C D
)D E
:F G
Problem !
(! "
$str" P
)P Q
;Q R
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{   	
if!! 
(!! 
id!! 
==!! 
null!! 
||!! 
_context!! &
.!!& '
feedback!!' /
==!!0 2
null!!3 7
)!!7 8
{"" 
return## 
NotFound## 
(##  
)##  !
;##! "
}$$ 
var&& 
feedback&& 
=&& 
await&&  
_context&&! )
.&&) *
feedback&&* 2
.'' 
FirstOrDefaultAsync'' $
(''$ %
m''% &
=>''' )
m''* +
.''+ ,

FeedbackId'', 6
==''7 9
id'': <
)''< =
;''= >
if(( 
((( 
feedback(( 
==(( 
null((  
)((  !
{)) 
return** 
NotFound** 
(**  
)**  !
;**! "
}++ 
return-- 
View-- 
(-- 
feedback--  
)--  !
;--! "
}.. 	
public11 
IActionResult11 
Create11 #
(11# $
)11$ %
{22 	
return33 
View33 
(33 
)33 
;33 
}44 	
[99 	
HttpPost99	 
]99 
[:: 	$
ValidateAntiForgeryToken::	 !
]::! "
public;; 
async;; 
Task;; 
<;; 
IActionResult;; '
>;;' (
Create;;) /
(;;/ 0
[;;0 1
Bind;;1 5
(;;5 6
$str;;6 s
);;s t
];;t u
Feedback;;v ~
feedback	;; á
)
;;á à
{<< 	
if== 
(== 

ModelState== 
.== 
IsValid== "
)==" #
{>> 
_context?? 
.?? 
Add?? 
(?? 
feedback?? %
)??% &
;??& '
await@@ 
_context@@ 
.@@ 
SaveChangesAsync@@ /
(@@/ 0
)@@0 1
;@@1 2
returnAA 
RedirectToActionAA '
(AA' (
nameofAA( .
(AA. /
IndexAA/ 4
)AA4 5
)AA5 6
;AA6 7
}BB 
returnCC 
ViewCC 
(CC 
feedbackCC  
)CC  !
;CC! "
}DD 	
publicGG 
asyncGG 
TaskGG 
<GG 
IActionResultGG '
>GG' (
EditGG) -
(GG- .
intGG. 1
?GG1 2
idGG3 5
)GG5 6
{HH 	
ifII 
(II 
idII 
==II 
nullII 
||II 
_contextII &
.II& '
feedbackII' /
==II0 2
nullII3 7
)II7 8
{JJ 
returnKK 
NotFoundKK 
(KK  
)KK  !
;KK! "
}LL 
varNN 
feedbackNN 
=NN 
awaitNN  
_contextNN! )
.NN) *
feedbackNN* 2
.NN2 3
	FindAsyncNN3 <
(NN< =
idNN= ?
)NN? @
;NN@ A
ifOO 
(OO 
feedbackOO 
==OO 
nullOO  
)OO  !
{PP 
returnQQ 
NotFoundQQ 
(QQ  
)QQ  !
;QQ! "
}RR 
returnSS 
ViewSS 
(SS 
feedbackSS  
)SS  !
;SS! "
}TT 	
[YY 	
HttpPostYY	 
]YY 
[ZZ 	$
ValidateAntiForgeryTokenZZ	 !
]ZZ! "
public[[ 
async[[ 
Task[[ 
<[[ 
IActionResult[[ '
>[[' (
Edit[[) -
([[- .
int[[. 1
id[[2 4
,[[4 5
[[[6 7
Bind[[7 ;
([[; <
$str[[< y
)[[y z
][[z {
Feedback	[[| Ñ
feedback
[[Ö ç
)
[[ç é
{\\ 	
if]] 
(]] 
id]] 
!=]] 
feedback]] 
.]] 

FeedbackId]] )
)]]) *
{^^ 
return__ 
NotFound__ 
(__  
)__  !
;__! "
}`` 
ifbb 
(bb 

ModelStatebb 
.bb 
IsValidbb "
)bb" #
{cc 
trydd 
{ee 
_contextff 
.ff 
Updateff #
(ff# $
feedbackff$ ,
)ff, -
;ff- .
awaitgg 
_contextgg "
.gg" #
SaveChangesAsyncgg# 3
(gg3 4
)gg4 5
;gg5 6
}hh 
catchii 
(ii (
DbUpdateConcurrencyExceptionii 3
)ii3 4
{jj 
ifkk 
(kk 
!kk 
FeedbackExistskk '
(kk' (
feedbackkk( 0
.kk0 1

FeedbackIdkk1 ;
)kk; <
)kk< =
{ll 
returnmm 
NotFoundmm '
(mm' (
)mm( )
;mm) *
}nn 
elseoo 
{pp 
throwqq 
;qq 
}rr 
}ss 
returntt 
RedirectToActiontt '
(tt' (
nameoftt( .
(tt. /
Indextt/ 4
)tt4 5
)tt5 6
;tt6 7
}uu 
returnvv 
Viewvv 
(vv 
feedbackvv  
)vv  !
;vv! "
}ww 	
publiczz 
asynczz 
Taskzz 
<zz 
IActionResultzz '
>zz' (
Deletezz) /
(zz/ 0
intzz0 3
?zz3 4
idzz5 7
)zz7 8
{{{ 	
if|| 
(|| 
id|| 
==|| 
null|| 
|||| 
_context|| &
.||& '
feedback||' /
==||0 2
null||3 7
)||7 8
{}} 
return~~ 
NotFound~~ 
(~~  
)~~  !
;~~! "
} 
var
ÅÅ 
feedback
ÅÅ 
=
ÅÅ 
await
ÅÅ  
_context
ÅÅ! )
.
ÅÅ) *
feedback
ÅÅ* 2
.
ÇÇ !
FirstOrDefaultAsync
ÇÇ $
(
ÇÇ$ %
m
ÇÇ% &
=>
ÇÇ' )
m
ÇÇ* +
.
ÇÇ+ ,

FeedbackId
ÇÇ, 6
==
ÇÇ7 9
id
ÇÇ: <
)
ÇÇ< =
;
ÇÇ= >
if
ÉÉ 
(
ÉÉ 
feedback
ÉÉ 
==
ÉÉ 
null
ÉÉ  
)
ÉÉ  !
{
ÑÑ 
return
ÖÖ 
NotFound
ÖÖ 
(
ÖÖ  
)
ÖÖ  !
;
ÖÖ! "
}
ÜÜ 
return
àà 
View
àà 
(
àà 
feedback
àà  
)
àà  !
;
àà! "
}
ââ 	
[
åå 	
HttpPost
åå	 
,
åå 

ActionName
åå 
(
åå 
$str
åå &
)
åå& '
]
åå' (
[
çç 	&
ValidateAntiForgeryToken
çç	 !
]
çç! "
public
éé 
async
éé 
Task
éé 
<
éé 
IActionResult
éé '
>
éé' (
DeleteConfirmed
éé) 8
(
éé8 9
int
éé9 <
id
éé= ?
)
éé? @
{
èè 	
if
êê 
(
êê 
_context
êê 
.
êê 
feedback
êê !
==
êê" $
null
êê% )
)
êê) *
{
ëë 
return
íí 
Problem
íí 
(
íí 
$str
íí M
)
ííM N
;
ííN O
}
ìì 
var
îî 
feedback
îî 
=
îî 
await
îî  
_context
îî! )
.
îî) *
feedback
îî* 2
.
îî2 3
	FindAsync
îî3 <
(
îî< =
id
îî= ?
)
îî? @
;
îî@ A
if
ïï 
(
ïï 
feedback
ïï 
!=
ïï 
null
ïï  
)
ïï  !
{
ññ 
_context
óó 
.
óó 
feedback
óó !
.
óó! "
Remove
óó" (
(
óó( )
feedback
óó) 1
)
óó1 2
;
óó2 3
}
òò 
await
öö 
_context
öö 
.
öö 
SaveChangesAsync
öö +
(
öö+ ,
)
öö, -
;
öö- .
return
õõ 
RedirectToAction
õõ #
(
õõ# $
nameof
õõ$ *
(
õõ* +
Index
õõ+ 0
)
õõ0 1
)
õõ1 2
;
õõ2 3
}
úú 	
private
ûû 
bool
ûû 
FeedbackExists
ûû #
(
ûû# $
int
ûû$ '
id
ûû( *
)
ûû* +
{
üü 	
return
††
 
(
†† 
_context
†† 
.
†† 
feedback
†† #
?
††# $
.
††$ %
Any
††% (
(
††( )
e
††) *
=>
††+ -
e
††. /
.
††/ 0

FeedbackId
††0 :
==
††; =
id
††> @
)
††@ A
)
††A B
.
††B C
GetValueOrDefault
††C T
(
††T U
)
††U V
;
††V W
}
°° 	
}
¢¢ 
}££ á
;D:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\LoginController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{		 
public

 

class

 
LoginController

  
:

! "

Controller

# -
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
LoginController 
( 
AppDbContext +
context, 3
)3 4
{ 	
_context 
= 
context 
; 
} 	
public 
IActionResult 
Index "
(" #
)# $
{ 	
var 
account 
= 
new 
Account %
(% &
)& '
;' (
return 
View 
( 
account 
)  
;  !
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
Account/ 6
account7 >
)> ?
{ 	
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{ 
return 
View 
( 
account #
)# $
;$ %
} 
Account 
user 
= 
await  
_context! )
.) *
Account* 1
.1 2
Include2 9
(9 :
p: ;
=>< >
p? @
.@ A
RoleA E
)E F
.F G
FirstOrDefaultAsyncG Z
(Z [
pro[ ^
=>_ a
prob e
.e f
UserNamef n
.n o
Equalso u
(u v
accountv }
.} ~
UserName	~ Ü
)
Ü á
)
á à
;
à â
if 
( 
user 
!= 
null 
) 
{   
if!! 
(!! 
user!! 
.!! 
Password!! !
.!!! "
Equals!!" (
(!!( )
account!!) 0
.!!0 1
Password!!1 9
)!!9 :
)!!: ;
{"" 
HttpContext## 
.##  
Session##  '
.##' (
	SetString##( 1
(##1 2
$str##2 <
,##< =
user##> B
.##B C
UserName##C K
)##K L
;##L M
HttpContext$$ 
.$$  
Session$$  '
.$$' (
SetInt32$$( 0
($$0 1
$str$$1 7
,$$7 8
($$9 :
int$$: =
)$$= >
user$$> B
.$$B C
RoleId$$C I
)$$I J
;$$J K
if&& 
(&& 
user&& 
.&& 
RoleId&& #
==&&$ &
$num&&' (
)&&( )
{'' 
return(( 
RedirectToAction(( /
(((/ 0
$str((0 ;
,((; <
$str((= D
)((D E
;((E F
})) 
else** 
{++ 
return,, 
RedirectToAction,, /
(,,/ 0
$str,,0 7
,,,7 8
$str,,9 C
),,C D
;,,D E
}-- 
}// 
TempData00 
[00 
$str00  
]00  !
=00" #
$str00$ >
;00> ?
return11 
View11 
(11 
account11 #
)11# $
;11$ %
}22 
TempData33 
[33 
$str33 
]33 
=33 
$str33  :
;33: ;
return44 
View44 
(44 
account44 
)44  
;44  !
}66 	
}77 
}88 óR
>D:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\SessionsController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class 
SessionsController #
:$ %

Controller& 0
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
SessionsController !
(! "
AppDbContext" .
context/ 6
)6 7
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
return 
_context 
. 
Session %
!=& (
null) -
?. /
View 
( 
await $
_context% -
.- .
Session. 5
.5 6
ToListAsync6 A
(A B
)B C
)C D
:E F
Problem !
(! "
$str" O
)O P
;P Q
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
int1 4
?4 5
id6 8
)8 9
{   	
if!! 
(!! 
id!! 
==!! 
null!! 
||!! 
_context!! &
.!!& '
Session!!' .
==!!/ 1
null!!2 6
)!!6 7
{"" 
return## 
NotFound## 
(##  
)##  !
;##! "
}$$ 
var&& 
session&& 
=&& 
await&& 
_context&&  (
.&&( )
Session&&) 0
.'' 
FirstOrDefaultAsync'' $
(''$ %
m''% &
=>''' )
m''* +
.''+ ,
	SessionId'', 5
==''6 8
id''9 ;
)''; <
;''< =
if(( 
((( 
session(( 
==(( 
null(( 
)((  
{)) 
return** 
NotFound** 
(**  
)**  !
;**! "
}++ 
return-- 
View-- 
(-- 
session-- 
)--  
;--  !
}.. 	
public11 
IActionResult11 
Create11 #
(11# $
)11$ %
{22 	
return33 
View33 
(33 
)33 
;33 
}44 	
[99 	
HttpPost99	 
]99 
[:: 	$
ValidateAntiForgeryToken::	 !
]::! "
public;; 
async;; 
Task;; 
<;; 
IActionResult;; '
>;;' (
Create;;) /
(;;/ 0
[;;0 1
Bind;;1 5
(;;5 6
$str	;;6 é
)
;;é è
]
;;è ê
Session
;;ë ò
session
;;ô †
)
;;† °
{<< 	
if== 
(== 

ModelState== 
.== 
IsValid== "
)==" #
{>> 
_context?? 
.?? 
Add?? 
(?? 
session?? $
)??$ %
;??% &
await@@ 
_context@@ 
.@@ 
SaveChangesAsync@@ /
(@@/ 0
)@@0 1
;@@1 2
returnAA 
RedirectToActionAA '
(AA' (
nameofAA( .
(AA. /
IndexAA/ 4
)AA4 5
)AA5 6
;AA6 7
}BB 
returnCC 
ViewCC 
(CC 
sessionCC 
)CC  
;CC  !
}DD 	
publicGG 
asyncGG 
TaskGG 
<GG 
IActionResultGG '
>GG' (
EditGG) -
(GG- .
intGG. 1
?GG1 2
idGG3 5
)GG5 6
{HH 	
ifII 
(II 
idII 
==II 
nullII 
||II 
_contextII &
.II& '
SessionII' .
==II/ 1
nullII2 6
)II6 7
{JJ 
returnKK 
NotFoundKK 
(KK  
)KK  !
;KK! "
}LL 
varNN 
sessionNN 
=NN 
awaitNN 
_contextNN  (
.NN( )
SessionNN) 0
.NN0 1
	FindAsyncNN1 :
(NN: ;
idNN; =
)NN= >
;NN> ?
ifOO 
(OO 
sessionOO 
==OO 
nullOO 
)OO  
{PP 
returnQQ 
NotFoundQQ 
(QQ  
)QQ  !
;QQ! "
}RR 
returnSS 
ViewSS 
(SS 
sessionSS 
)SS  
;SS  !
}TT 	
[YY 	
HttpPostYY	 
]YY 
[ZZ 	$
ValidateAntiForgeryTokenZZ	 !
]ZZ! "
public[[ 
async[[ 
Task[[ 
<[[ 
IActionResult[[ '
>[[' (
Edit[[) -
([[- .
int[[. 1
id[[2 4
,[[4 5
[[[6 7
Bind[[7 ;
([[; <
$str	[[< î
)
[[î ï
]
[[ï ñ
Session
[[ó û
session
[[ü ¶
)
[[¶ ß
{\\ 	
if]] 
(]] 
id]] 
!=]] 
session]] 
.]] 
	SessionId]] '
)]]' (
{^^ 
return__ 
NotFound__ 
(__  
)__  !
;__! "
}`` 
ifbb 
(bb 

ModelStatebb 
.bb 
IsValidbb "
)bb" #
{cc 
trydd 
{ee 
_contextff 
.ff 
Updateff #
(ff# $
sessionff$ +
)ff+ ,
;ff, -
awaitgg 
_contextgg "
.gg" #
SaveChangesAsyncgg# 3
(gg3 4
)gg4 5
;gg5 6
}hh 
catchii 
(ii (
DbUpdateConcurrencyExceptionii 3
)ii3 4
{jj 
ifkk 
(kk 
!kk 
SessionExistskk &
(kk& '
sessionkk' .
.kk. /
	SessionIdkk/ 8
)kk8 9
)kk9 :
{ll 
returnmm 
NotFoundmm '
(mm' (
)mm( )
;mm) *
}nn 
elseoo 
{pp 
throwqq 
;qq 
}rr 
}ss 
returntt 
RedirectToActiontt '
(tt' (
nameoftt( .
(tt. /
Indextt/ 4
)tt4 5
)tt5 6
;tt6 7
}uu 
returnvv 
Viewvv 
(vv 
sessionvv 
)vv  
;vv  !
}ww 	
publiczz 
asynczz 
Taskzz 
<zz 
IActionResultzz '
>zz' (
Deletezz) /
(zz/ 0
intzz0 3
?zz3 4
idzz5 7
)zz7 8
{{{ 	
if|| 
(|| 
id|| 
==|| 
null|| 
|||| 
_context|| &
.||& '
Session||' .
==||/ 1
null||2 6
)||6 7
{}} 
return~~ 
NotFound~~ 
(~~  
)~~  !
;~~! "
} 
var
ÅÅ 
session
ÅÅ 
=
ÅÅ 
await
ÅÅ 
_context
ÅÅ  (
.
ÅÅ( )
Session
ÅÅ) 0
.
ÇÇ !
FirstOrDefaultAsync
ÇÇ $
(
ÇÇ$ %
m
ÇÇ% &
=>
ÇÇ' )
m
ÇÇ* +
.
ÇÇ+ ,
	SessionId
ÇÇ, 5
==
ÇÇ6 8
id
ÇÇ9 ;
)
ÇÇ; <
;
ÇÇ< =
if
ÉÉ 
(
ÉÉ 
session
ÉÉ 
==
ÉÉ 
null
ÉÉ 
)
ÉÉ  
{
ÑÑ 
return
ÖÖ 
NotFound
ÖÖ 
(
ÖÖ  
)
ÖÖ  !
;
ÖÖ! "
}
ÜÜ 
return
àà 
View
àà 
(
àà 
session
àà 
)
àà  
;
àà  !
}
ââ 	
[
åå 	
HttpPost
åå	 
,
åå 

ActionName
åå 
(
åå 
$str
åå &
)
åå& '
]
åå' (
[
çç 	&
ValidateAntiForgeryToken
çç	 !
]
çç! "
public
éé 
async
éé 
Task
éé 
<
éé 
IActionResult
éé '
>
éé' (
DeleteConfirmed
éé) 8
(
éé8 9
int
éé9 <
id
éé= ?
)
éé? @
{
èè 	
if
êê 
(
êê 
_context
êê 
.
êê 
Session
êê  
==
êê! #
null
êê$ (
)
êê( )
{
ëë 
return
íí 
Problem
íí 
(
íí 
$str
íí L
)
ííL M
;
ííM N
}
ìì 
var
îî 
session
îî 
=
îî 
await
îî 
_context
îî  (
.
îî( )
Session
îî) 0
.
îî0 1
	FindAsync
îî1 :
(
îî: ;
id
îî; =
)
îî= >
;
îî> ?
if
ïï 
(
ïï 
session
ïï 
!=
ïï 
null
ïï 
)
ïï  
{
ññ 
_context
óó 
.
óó 
Session
óó  
.
óó  !
Remove
óó! '
(
óó' (
session
óó( /
)
óó/ 0
;
óó0 1
}
òò 
await
öö 
_context
öö 
.
öö 
SaveChangesAsync
öö +
(
öö+ ,
)
öö, -
;
öö- .
return
õõ 
RedirectToAction
õõ #
(
õõ# $
nameof
õõ$ *
(
õõ* +
Index
õõ+ 0
)
õõ0 1
)
õõ1 2
;
õõ2 3
}
úú 	
private
ûû 
bool
ûû 
SessionExists
ûû "
(
ûû" #
int
ûû# &
id
ûû' )
)
ûû) *
{
üü 	
return
††
 
(
†† 
_context
†† 
.
†† 
Session
†† "
?
††" #
.
††# $
Any
††$ '
(
††' (
e
††( )
=>
††* ,
e
††- .
.
††. /
	SessionId
††/ 8
==
††9 ;
id
††< >
)
††> ?
)
††? @
.
††@ A
GetValueOrDefault
††A R
(
††R S
)
††S T
;
††T U
}
°° 	
}
¢¢ 
}££ á`
=D:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\SubjectController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class 
SubjectController "
:# $

Controller% /
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public 
SubjectController  
(  !
AppDbContext! -
context. 5
)5 6
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
appDbContext 
= 
_context '
.' (
Subject( /
./ 0
Include0 7
(7 8
s8 9
=>: <
s= >
.> ?
Status? E
)E F
;F G
return 
View 
( 
await 
appDbContext *
.* +
ToListAsync+ 6
(6 7
)7 8
)8 9
;9 :
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Details) 0
(0 1
string1 7
id8 :
): ;
{ 	
if   
(   
id   
==   
null   
||   
_context   &
.  & '
Subject  ' .
==  / 1
null  2 6
)  6 7
{!! 
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
var%% 
subject%% 
=%% 
await%% 
_context%%  (
.%%( )
Subject%%) 0
.&& 
Include&& 
(&& 
s&& 
=>&& 
s&& 
.&&  
Status&&  &
)&&& '
.'' 
FirstOrDefaultAsync'' $
(''$ %
m''% &
=>''' )
m''* +
.''+ ,
SubjectCode'', 7
==''8 :
id''; =
)''= >
;''> ?
if(( 
((( 
subject(( 
==(( 
null(( 
)((  
{)) 
return** 
NotFound** 
(**  
)**  !
;**! "
}++ 
return-- 
View-- 
(-- 
subject-- 
)--  
;--  !
}.. 	
public11 
IActionResult11 
Create11 #
(11# $
)11$ %
{22 	
ViewData33 
[33 
$str33 
]33  
=33! "
new33# &

SelectList33' 1
(331 2
_context332 :
.33: ;
Status33; A
,33A B
$str33C M
,33M N
$str33O Y
)33Y Z
;33Z [
return44 
View44 
(44 
)44 
;44 
}55 	
[:: 	
HttpPost::	 
]:: 
[;; 	$
ValidateAntiForgeryToken;;	 !
];;! "
public<< 
async<< 
Task<< 
<<< 
IActionResult<< '
><<' (
Create<<) /
(<</ 0
[<<0 1
Bind<<1 5
(<<5 6
$str<<6 ~
)<<~ 
]	<< Ä
Subject
<<Å à
subject
<<â ê
)
<<ê ë
{== 	
if>> 
(>> 

ModelState>> 
.>> 
IsValid>> "
)>>" #
{?? 
_context@@ 
.@@ 
Add@@ 
(@@ 
subject@@ $
)@@$ %
;@@% &
awaitAA 
_contextAA 
.AA 
SaveChangesAsyncAA /
(AA/ 0
)AA0 1
;AA1 2
returnBB 
RedirectToActionBB '
(BB' (
nameofBB( .
(BB. /
IndexBB/ 4
)BB4 5
)BB5 6
;BB6 7
}CC 
ViewDataDD 
[DD 
$strDD 
]DD  
=DD! "
newDD# &

SelectListDD' 1
(DD1 2
_contextDD2 :
.DD: ;
StatusDD; A
,DDA B
$strDDC M
,DDM N
$strDDO Y
,DDY Z
subjectDD[ b
.DDb c
StatusIdDDc k
)DDk l
;DDl m
returnEE 
ViewEE 
(EE 
subjectEE 
)EE  
;EE  !
}FF 	
publicII 
asyncII 
TaskII 
<II 
IActionResultII '
>II' (
EditII) -
(II- .
stringII. 4
idII5 7
)II7 8
{JJ 	
ifKK 
(KK 
idKK 
==KK 
nullKK 
||KK 
_contextKK &
.KK& '
SubjectKK' .
==KK/ 1
nullKK2 6
)KK6 7
{LL 
returnMM 
NotFoundMM 
(MM  
)MM  !
;MM! "
}NN 
varPP 
subjectPP 
=PP 
awaitPP 
_contextPP  (
.PP( )
SubjectPP) 0
.PP0 1
	FindAsyncPP1 :
(PP: ;
idPP; =
)PP= >
;PP> ?
ifQQ 
(QQ 
subjectQQ 
==QQ 
nullQQ 
)QQ  
{RR 
returnSS 
NotFoundSS 
(SS  
)SS  !
;SS! "
}TT 
ViewDataUU 
[UU 
$strUU 
]UU  
=UU! "
newUU# &

SelectListUU' 1
(UU1 2
_contextUU2 :
.UU: ;
StatusUU; A
,UUA B
$strUUC M
,UUM N
$strUUO Y
,UUY Z
subjectUU[ b
.UUb c
StatusIdUUc k
)UUk l
;UUl m
returnVV 
ViewVV 
(VV 
subjectVV 
)VV  
;VV  !
}WW 	
[\\ 	
HttpPost\\	 
]\\ 
[]] 	$
ValidateAntiForgeryToken]]	 !
]]]! "
public^^ 
async^^ 
Task^^ 
<^^ 
IActionResult^^ '
>^^' (
Edit^^) -
(^^- .
string^^. 4
id^^5 7
,^^7 8
[^^9 :
Bind^^: >
(^^> ?
$str	^^? á
)
^^á à
]
^^à â
Subject
^^ä ë
subject
^^í ô
)
^^ô ö
{__ 	
if`` 
(`` 
id`` 
!=`` 
subject`` 
.`` 
SubjectCode`` )
)``) *
{aa 
returnbb 
NotFoundbb 
(bb  
)bb  !
;bb! "
}cc 
ifee 
(ee 

ModelStateee 
.ee 
IsValidee "
)ee" #
{ff 
trygg 
{hh 
_contextii 
.ii 
Updateii #
(ii# $
subjectii$ +
)ii+ ,
;ii, -
awaitjj 
_contextjj "
.jj" #
SaveChangesAsyncjj# 3
(jj3 4
)jj4 5
;jj5 6
}kk 
catchll 
(ll (
DbUpdateConcurrencyExceptionll 3
)ll3 4
{mm 
ifnn 
(nn 
!nn 
SubjectExistsnn &
(nn& '
subjectnn' .
.nn. /
SubjectCodenn/ :
)nn: ;
)nn; <
{oo 
returnpp 
NotFoundpp '
(pp' (
)pp( )
;pp) *
}qq 
elserr 
{ss 
throwtt 
;tt 
}uu 
}vv 
returnww 
RedirectToActionww '
(ww' (
nameofww( .
(ww. /
Indexww/ 4
)ww4 5
)ww5 6
;ww6 7
}xx 
ViewDatayy 
[yy 
$stryy 
]yy  
=yy! "
newyy# &

SelectListyy' 1
(yy1 2
_contextyy2 :
.yy: ;
Statusyy; A
,yyA B
$stryyC M
,yyM N
$stryyO Y
,yyY Z
subjectyy[ b
.yyb c
StatusIdyyc k
)yyk l
;yyl m
returnzz 
Viewzz 
(zz 
subjectzz 
)zz  
;zz  !
}{{ 	
public~~ 
async~~ 
Task~~ 
<~~ 
IActionResult~~ '
>~~' (
Delete~~) /
(~~/ 0
string~~0 6
id~~7 9
)~~9 :
{ 	
if
ÄÄ 
(
ÄÄ 
id
ÄÄ 
==
ÄÄ 
null
ÄÄ 
||
ÄÄ 
_context
ÄÄ &
.
ÄÄ& '
Subject
ÄÄ' .
==
ÄÄ/ 1
null
ÄÄ2 6
)
ÄÄ6 7
{
ÅÅ 
return
ÇÇ 
NotFound
ÇÇ 
(
ÇÇ  
)
ÇÇ  !
;
ÇÇ! "
}
ÉÉ 
var
ÖÖ 
subject
ÖÖ 
=
ÖÖ 
await
ÖÖ 
_context
ÖÖ  (
.
ÖÖ( )
Subject
ÖÖ) 0
.
ÜÜ 
Include
ÜÜ 
(
ÜÜ 
s
ÜÜ 
=>
ÜÜ 
s
ÜÜ 
.
ÜÜ  
Status
ÜÜ  &
)
ÜÜ& '
.
áá !
FirstOrDefaultAsync
áá $
(
áá$ %
m
áá% &
=>
áá' )
m
áá* +
.
áá+ ,
SubjectCode
áá, 7
==
áá8 :
id
áá; =
)
áá= >
;
áá> ?
if
àà 
(
àà 
subject
àà 
==
àà 
null
àà 
)
àà  
{
ââ 
return
ää 
NotFound
ää 
(
ää  
)
ää  !
;
ää! "
}
ãã 
return
çç 
View
çç 
(
çç 
subject
çç 
)
çç  
;
çç  !
}
éé 	
[
ëë 	
HttpPost
ëë	 
,
ëë 

ActionName
ëë 
(
ëë 
$str
ëë &
)
ëë& '
]
ëë' (
[
íí 	&
ValidateAntiForgeryToken
íí	 !
]
íí! "
public
ìì 
async
ìì 
Task
ìì 
<
ìì 
IActionResult
ìì '
>
ìì' (
DeleteConfirmed
ìì) 8
(
ìì8 9
string
ìì9 ?
id
ìì@ B
)
ììB C
{
îî 	
if
ïï 
(
ïï 
_context
ïï 
.
ïï 
Subject
ïï  
==
ïï! #
null
ïï$ (
)
ïï( )
{
ññ 
return
óó 
Problem
óó 
(
óó 
$str
óó L
)
óóL M
;
óóM N
}
òò 
var
ôô 
subject
ôô 
=
ôô 
await
ôô 
_context
ôô  (
.
ôô( )
Subject
ôô) 0
.
ôô0 1
	FindAsync
ôô1 :
(
ôô: ;
id
ôô; =
)
ôô= >
;
ôô> ?
if
öö 
(
öö 
subject
öö 
!=
öö 
null
öö 
)
öö  
{
õõ 
_context
úú 
.
úú 
Subject
úú  
.
úú  !
Remove
úú! '
(
úú' (
subject
úú( /
)
úú/ 0
;
úú0 1
}
ùù 
await
üü 
_context
üü 
.
üü 
SaveChangesAsync
üü +
(
üü+ ,
)
üü, -
;
üü- .
return
†† 
RedirectToAction
†† #
(
††# $
nameof
††$ *
(
††* +
Index
††+ 0
)
††0 1
)
††1 2
;
††2 3
}
°° 	
private
££ 
bool
££ 
SubjectExists
££ "
(
££" #
string
££# )
id
££* ,
)
££, -
{
§§ 	
return
••
 
(
•• 
_context
•• 
.
•• 
Subject
•• "
?
••" #
.
••# $
Any
••$ '
(
••' (
e
••( )
=>
••* ,
e
••- .
.
••. /
SubjectCode
••/ :
==
••; =
id
••> @
)
••@ A
)
••A B
.
••B C
GetValueOrDefault
••C T
(
••T U
)
••U V
;
••V W
}
¶¶ 	
}
ßß 
}®®  *
DD:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\UserCurriculumController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class $
UserCurriculumController )
:* +

Controller, 6
{		 
private

 
readonly

 
AppDbContext

 %
_context

& .
;

. /
public $
UserCurriculumController '
(' (
AppDbContext( 4
context5 <
)< =
{ 	
_context 
= 
context 
; 
} 	
public 
IActionResult 
Index "
(" #
)# $
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
string/ 5
option6 <
,< =
string> D
searchE K
)K L
{ 	
HttpContext 
. 
Session 
.  
	SetString  )
() *
$str* 2
,2 3
option4 :
): ;
;; <
HttpContext 
. 
Session 
.  
	SetString  )
() *
$str* 2
,2 3
search4 :
): ;
;; <
List 
< 

Curriculum 
> 

curriculum '
;' (
if 
( 
option 
. 
Equals 
( 
$str $
)$ %
)% &
{ 

curriculum 
= 
_context #
.# $

Curriculum$ .
.. /
Include/ 6
(6 7
p7 8
=>8 :
p: ;
.; <
Decision< D
)D E
.E F
WhereF K
(K L
pL M
=>M O
pO P
.P Q
CurriculumCodeQ _
._ `
Contains` h
(h i
searchi o
.o p
Trimp t
(t u
)u v
)v w
)w x
.x y
ToListy 
(	 Ä
)
Ä Å
;
Å Ç
} 
else 
{ 

curriculum   
=   
_context   %
.  % &

Curriculum  & 0
.  0 1
Include  1 8
(  8 9
p  9 :
=>  ; =
p  > ?
.  ? @
Decision  @ H
)  H I
.  I J
Where  J O
(  O P
p  P Q
=>  R T
(  U V
p  V W
.  W X
NameEn  X ^
.  ^ _
Contains  _ g
(  g h
search  h n
)  n o
||  o q
p  q r
.  r s
NameVn  s y
.  y z
Equals	  z Ä
(
  Ä Å
search
  Å á
.
  á à
Trim
  à å
(
  å ç
)
  ç é
)
  é è
)
  è ê
)
  ê ë
.
  ë í
ToList
  í ò
(
  ò ô
)
  ô ö
;
  ö õ
}!! 
if"" 
("" 

curriculum"" 
."" 
Count""  
(""  !
)""! "
==""" $
$num""$ %
)""% &
{## 
TempData$$ 
[$$ 
$str$$  
]$$  !
=$$" #
$str$$$ C
;$$C D
}%% 
return&& 
View&& 
(&& 

curriculum&& "
)&&" #
;&&# $
}'' 	
public)) 
IActionResult)) 
Detail)) #
())# $
int))$ '
id))( *
)))* +
{** 	

Curriculum++ 
curri++ 
=++ 
_context++ '
.++' (

Curriculum++( 2
.++2 3
Include++3 :
(++: ;
p++; <
=>++= ?
p++@ A
.++A B
Decision++B J
)++J K
.++K L
FirstOrDefault++L Z
(++Z [
p++[ \
=>++\ ^
p++^ _
.++_ `
CurriculumId++` l
==++l n
id++n p
)++p q
;++q r
var,, 
	curri_sub,, 
=,, 
_context,, $
.,,$ %
Curriculum_Subject,,% 7
.,,7 8
Include,,8 ?
(,,? @
p,,@ A
=>,,B D
p,,E F
.,,F G
Subject,,G N
),,N O
.,,O P
Where,,P U
(,,U V
pro,,V Y
=>,,Z \
pro,,] `
.,,` a
CurriculumId,,a m
==,,n p
id,,q s
),,s t
.,,t u
ToList,,u {
(,,{ |
),,| }
;,,} ~
ViewBag-- 
.-- 
	Curri_sub-- 
=-- 
	curri_sub--  )
;--) *
if.. 
(.. 
curri.. 
==.. 
null.. 
).. 
{// 
return00 
NotFound00 
(00  
)00  !
;00! "
}11 
return22 
View22 
(22 
curri22 
)22 
;22 
}33 	
}55 
}66 ”

BD:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\UserDecisionController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class "
UserDecisionController '
:( )

Controller* 4
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
public		 "
UserDecisionController		 %
(		% &
AppDbContext		& 2
context		3 :
)		: ;
{

 	
_context 
= 
context 
; 
} 	
public 
IActionResult 
Index "
(" #
string# )
id* ,
), -
{ 	
var 
decision 
= 
_context #
.# $
Decision$ ,
., -
Where- 2
(2 3
p3 4
=>4 6
p6 7
.7 8

DecisionNo8 B
.B C
EqualsC I
(I J
idJ L
)L M
)M N
.N O
FirstOrDefaultO ]
(] ^
)^ _
;_ `
return 
View 
( 
decision  
)  !
;! "
} 	
} 
} Å6
>D:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\UserHomeController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public		 

class		 
UserHomeController		 #
:		$ %

Controller		& 0
{

 
private 
readonly 
AppDbContext %
_context& .
;. /
private 
readonly  
IHttpContextAccessor -
	_Accessor. 7
;7 8
private 
readonly 
ILogger  
<  !
UserHomeController! 3
>3 4
_logger5 <
;< =
public 
UserHomeController !
(! "
ILogger" )
<) *
UserHomeController* <
>< =
logger> D
,D E
AppDbContextF R
contextS Z
,Z [ 
IHttpContextAccessor\ p
accessorq y
)y z
{ 	
_logger 
= 
logger 
; 
_context 
= 
context 
; 
	_Accessor 
= 
accessor  
;  !
} 	
public 
IActionResult 
Index "
(" #
)# $
{ 	
return 
View 
( 
) 
; 
} 	
public 
IActionResult 
Infor "
(" #
)# $
{ 	
string 
userName 
= 
	_Accessor '
.' (
HttpContext( 3
.3 4
Session4 ;
.; <
	GetString< E
(E F
$strF P
)P Q
;Q R
var 
Account 
= 
_context "
." #
Account# *
.* +
Include+ 2
(2 3
p3 4
=>5 7
p8 9
.9 :
Role: >
)> ?
.? @
FirstOrDefault@ N
(N O
proO R
=>S U
proV Y
.Y Z
UserNameZ b
.b c
Equalsc i
(i j
userNamej r
)r s
)s t
;t u
var 
editAccount 
= 
new !
EditAccount" -
(- .
). /
{   
UserName!! 
=!! 
Account!!  
.!!  !
UserName!!! )
,!!) *
Phone"" 
="" 
Account"" 
."" 
Phone"" #
,""# $
Address## 
=## 
Account## 
.##  
Address##  '
,##' (
Gender$$ 
=$$ 
Account$$ 
.$$ 
Gender$$ %
,$$% &
Gmail%% 
=%% 
Account%% 
.%% 
Gmail%% #
,%%# $
Fullname&& 
=&& 
Account&&  
.&&  !
Fullname&&! )
,&&) *
Birthday'' 
='' 
Account''  
.''  !
Birthday''! )
,'') *
RoleId(( 
=(( 
Account(( 
.(( 
RoleId(( %
,((% &
Active)) 
=)) 
Account)) 
.)) 
Active)) %
,))% &
Role** 
=** 
Account** 
.** 
Role** !
,**! "
Url++ 
=++ 
Account++ 
.++ 
Image++ !
},, 
;,, 
return-- 
View-- 
(-- 
editAccount-- #
)--# $
;--$ %
}.. 	
[// 	
HttpPost//	 
]// 
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (
Infor00) .
(00. /
EditAccount00/ :
account00; B
)00B C
{11 	
var22 
accountChange22 
=22 
_context22  (
.22( )
Account22) 0
.220 1
Include221 8
(228 9
p229 :
=>22; =
p22> ?
.22? @
Role22@ D
)22D E
.22E F
FirstOrDefault22F T
(22T U
pro22U X
=>22Y [
pro22\ _
.22_ `
UserName22` h
.22h i
Equals22i o
(22o p
account22p w
.22w x
UserName	22x Ä
)
22Ä Å
)
22Å Ç
;
22Ç É
accountChange== 
.== 
UserName== "
===# $
account==% ,
.==, -
UserName==- 5
;==5 6
accountChange>> 
.>> 
Fullname>> "
=>># $
account>>% ,
.>>, -
Fullname>>- 5
;>>5 6
accountChange?? 
.?? 
Address?? !
=??" #
account??$ +
.??+ ,
Address??, 3
;??3 4
accountChange@@ 
.@@ 
Phone@@ 
=@@  !
account@@" )
.@@) *
Phone@@* /
;@@/ 0
accountChangeAA 
.AA 
GenderAA  
=AA! "
accountAA# *
.AA* +
GenderAA+ 1
;AA1 2
accountChangeBB 
.BB 
BirthdayBB "
=BB# $
accountBB% ,
.BB, -
BirthdayBB- 5
;BB5 6
_contextDD 
.DD 
AccountDD 
.DD 
UpdateDD #
(DD# $
accountChangeDD$ 1
)DD1 2
;DD2 3
_contextEE 
.EE 
SaveChangesEE  
(EE  !
)EE! "
;EE" #
TempDataFF 
[FF 
$strFF 
]FF 
=FF 
$strFF  A
;FFA B
returnGG 
RedirectToActionGG #
(GG# $
$strGG$ +
)GG+ ,
;GG, -
}HH 	
[JJ 	
ResponseCacheJJ	 
(JJ 
DurationJJ 
=JJ  !
$numJJ" #
,JJ# $
LocationJJ% -
=JJ. /!
ResponseCacheLocationJJ0 E
.JJE F
NoneJJF J
,JJJ K
NoStoreJJL S
=JJT U
trueJJV Z
)JJZ [
]JJ[ \
publicKK 
IActionResultKK 
ErrorKK "
(KK" #
)KK# $
{LL 	
returnMM 
ViewMM 
(MM 
newMM 
ErrorViewModelMM *
{MM+ ,
	RequestIdMM- 6
=MM7 8
ActivityMM9 A
.MMA B
CurrentMMB I
?MMI J
.MMJ K
IdMMK M
??MMN P
HttpContextMMQ \
.MM\ ]
TraceIdentifierMM] l
}MMm n
)MMn o
;MMo p
}NN 	
}OO 
}PP Óã
LD:\SWT lab\SWT_Lab2\Lab2_SWT\Controllers\UserMaterialOfTeachersController.cs
	namespace 	

LMMProject
 
. 
Controllers  
{ 
public 

class ,
 UserMaterialOfTeachersController 1
:2 3

Controller4 >
{ 
private 
readonly 
AppDbContext %
_context& .
;. /
private 
readonly  
IHttpContextAccessor -
	_Accessor. 7
;7 8
public ,
 UserMaterialOfTeachersController /
(/ 0
AppDbContext0 <
context= D
,D E 
IHttpContextAccessorF Z
accessor[ c
)c d
{ 	
_context 
= 
context 
; 
	_Accessor 
= 
accessor  
;  !
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
string/ 5
status6 <
,< =
string> D
sub_codeE M
)M N
{ 	
string 
userName 
= 
	_Accessor '
.' (
HttpContext( 3
.3 4
Session4 ;
.; <
	GetString< E
(E F
$strF P
)P Q
;Q R
var 
list 
= 
_context 
.  
MaterialOfTeacher  1
.1 2
Include2 9
(9 :
m: ;
=>< >
m? @
.@ A
AccountA H
)H I
.I J
IncludeJ Q
(Q R
mR S
=>T V
mW X
.X Y
SubjectY `
)` a
.a b
Whereb g
(g h
ph i
=>j l
pm n
.n o
TeacherUsernameo ~
.~ 
Equals	 Ö
(
Ö Ü
userName
Ü é
)
é è
)
è ê
.
ê ë
ToList
ë ó
(
ó ò
)
ò ô
;
ô ö
if 
( 
! 
string 
. 
IsNullOrEmpty %
(% &
status& ,
), -
)- .
{ 
if 
( 
! 
status 
. 
Equals "
(" #
$str# %
)% &
&&' )
!* +
status+ 1
.1 2
Equals2 8
(8 9
$str9 >
)> ?
)? @
{ 
if   
(   
!   
string   
.    
IsNullOrEmpty    -
(  - .
sub_code  . 6
)  6 7
)  7 8
{!! 
list"" 
="" 
await"" $
_context""% -
.""- .
MaterialOfTeacher"". ?
.""? @
Include""@ G
(""G H
m""H I
=>""J L
m""M N
.""N O
Account""O V
)""V W
.""W X
Include""X _
(""_ `
m""` a
=>""b d
m""e f
.""f g
Subject""g n
)""n o
.""o p
Where""p u
(""u v
m""v w
=>""x z
m""{ |
.""| }
Status	""} É
.
""É Ñ
Equals
""Ñ ä
(
""ä ã
status
""ã ë
)
""ë í
)
""í ì
.
""ì î
Where
""î ô
(
""ô ö
m
""ö õ
=>
""ú û
m
""ü †
.
""† °
SubjectCode
""° ¨
.
""¨ ≠
Contains
""≠ µ
(
""µ ∂
sub_code
""∂ æ
)
""æ ø
)
""ø ¿
.
""¿ ¡
ToListAsync
""¡ Ã
(
""Ã Õ
)
""Õ Œ
;
""Œ œ
}## 
else$$ 
{%% 
list&& 
=&& 
await&& $
_context&&% -
.&&- .
MaterialOfTeacher&&. ?
.&&? @
Include&&@ G
(&&G H
m&&H I
=>&&J L
m&&M N
.&&N O
Account&&O V
)&&V W
.&&W X
Include&&X _
(&&_ `
m&&` a
=>&&b d
m&&e f
.&&f g
Subject&&g n
)&&n o
.&&o p
Where&&p u
(&&u v
m&&v w
=>&&x z
m&&{ |
.&&| }
Status	&&} É
.
&&É Ñ
Equals
&&Ñ ä
(
&&ä ã
status
&&ã ë
)
&&ë í
)
&&í ì
.
&&ì î
ToListAsync
&&î ü
(
&&ü †
)
&&† °
;
&&° ¢
}'' 
}(( 
else)) 
{** 
if++ 
(++ 
!++ 
string++ 
.++  
IsNullOrEmpty++  -
(++- .
sub_code++. 6
)++6 7
)++7 8
{,, 
list-- 
=-- 
await-- $
_context--% -
.--- .
MaterialOfTeacher--. ?
.--? @
Include--@ G
(--G H
m--H I
=>--J L
m--M N
.--N O
Account--O V
)--V W
.--W X
Include--X _
(--_ `
m--` a
=>--b d
m--e f
.--f g
Subject--g n
)--n o
.--o p
Where--p u
(--u v
m--v w
=>--x z
m--{ |
.--| }
SubjectCode	--} à
.
--à â
Contains
--â ë
(
--ë í
sub_code
--í ö
)
--ö õ
)
--õ ú
.
--ú ù
ToListAsync
--ù ®
(
--® ©
)
--© ™
;
--™ ´
}.. 
}// 
}00 
else11 
{22 
if33 
(33 
!33 
string33 
.33 
IsNullOrEmpty33 )
(33) *
sub_code33* 2
)332 3
)333 4
{44 
list55 
=55 
await55  
_context55! )
.55) *
MaterialOfTeacher55* ;
.55; <
Include55< C
(55C D
m55D E
=>55F H
m55I J
.55J K
Account55K R
)55R S
.55S T
Include55T [
(55[ \
m55\ ]
=>55^ `
m55a b
.55b c
Subject55c j
)55j k
.55k l
Where55l q
(55q r
m55r s
=>55t v
m55w x
.55x y
SubjectCode	55y Ñ
.
55Ñ Ö
Contains
55Ö ç
(
55ç é
sub_code
55é ñ
)
55ñ ó
)
55ó ò
.
55ò ô
ToListAsync
55ô §
(
55§ •
)
55• ¶
;
55¶ ß
}66 
}77 
return88 
View88 
(88 
list88 
)88 
;88 
}99 	
public<< 
IActionResult<< 
Create<< #
(<<# $
)<<$ %
{== 	
ViewData>> 
[>> 
$str>> &
]>>& '
=>>( )
new>>* -

SelectList>>. 8
(>>8 9
_context>>9 A
.>>A B
Account>>B I
,>>I J
$str>>K U
,>>U V
$str>>W a
)>>a b
;>>b c
ViewData?? 
[?? 
$str?? "
]??" #
=??$ %
new??& )

SelectList??* 4
(??4 5
_context??5 =
.??= >
Subject??> E
,??E F
$str??G T
,??T U
$str??V c
)??c d
;??d e
return@@ 
View@@ 
(@@ 
)@@ 
;@@ 
}AA 	
[FF 	
HttpPostFF	 
]FF 
[GG 	$
ValidateAntiForgeryTokenGG	 !
]GG! "
publicHH 
asyncHH 
TaskHH 
<HH 
IActionResultHH '
>HH' (
CreateHH) /
(HH/ 0
[HH0 1
BindHH1 5
(HH5 6
$strHH6 m
)HHm n
]HHn o
MaterialOfTeacher	HHp Å
materialOfTeacher
HHÇ ì
)
HHì î
{II 	
SubjectJJ 
sjJJ 
=JJ 
_contextJJ !
.JJ! "
SubjectJJ" )
.JJ) *
IncludeJJ* 1
(JJ1 2
pJJ2 3
=>JJ4 6
pJJ7 8
.JJ8 9
StatusJJ9 ?
)JJ? @
.JJ@ A
FirstOrDefaultJJA O
(JJO P
proJJP S
=>JJT V
proJJW Z
.JJZ [
SubjectCodeJJ[ f
.JJf g
EqualsJJg m
(JJm n
materialOfTeacherJJn 
.	JJ Ä
SubjectCode
JJÄ ã
.
JJã å
Trim
JJå ê
(
JJê ë
)
JJë í
)
JJí ì
)
JJì î
;
JJî ï
ifKK 
(KK 
sjKK 
!=KK 
nullKK 
)KK 
{LL 
_contextMM 
.MM 
AddMM  
(MM  !
materialOfTeacherMM! 2
)MM2 3
;MM3 4
awaitNN 
_contextNN "
.NN" #
SaveChangesAsyncNN# 3
(NN3 4
)NN4 5
;NN5 6
returnOO 
RedirectToActionOO +
(OO+ ,
nameofOO, 2
(OO2 3
IndexOO3 8
)OO8 9
)OO9 :
;OO: ;
}PP 
TempDataQQ 
[QQ 
$strQQ 
]QQ 
=QQ 
$strQQ  C
;QQC D
returnRR 
ViewRR 
(RR 
materialOfTeacherRR )
)RR) *
;RR* +
}SS 	
publicVV 
asyncVV 
TaskVV 
<VV 
IActionResultVV '
>VV' (
EditVV) -
(VV- .
intVV. 1
?VV1 2
idVV3 5
)VV5 6
{WW 	
ifXX 
(XX 
idXX 
==XX 
nullXX 
||XX 
_contextXX &
.XX& '
MaterialOfTeacherXX' 8
==XX9 ;
nullXX< @
)XX@ A
{YY 
returnZZ 
NotFoundZZ 
(ZZ  
)ZZ  !
;ZZ! "
}[[ 
var]] 
materialOfTeacher]] !
=]]" #
await]]$ )
_context]]* 2
.]]2 3
MaterialOfTeacher]]3 D
.]]D E
	FindAsync]]E N
(]]N O
id]]O Q
)]]Q R
;]]R S
if^^ 
(^^ 
materialOfTeacher^^ !
==^^" $
null^^% )
)^^) *
{__ 
return`` 
NotFound`` 
(``  
)``  !
;``! "
}aa 
returnbb 
Viewbb 
(bb 
materialOfTeacherbb )
)bb) *
;bb* +
}cc 	
[hh 	
HttpPosthh	 
]hh 
[ii 	$
ValidateAntiForgeryTokenii	 !
]ii! "
publicjj 
asyncjj 
Taskjj 
<jj 
IActionResultjj '
>jj' (
Editjj) -
(jj- .
intjj. 1
idjj2 4
,jj4 5
[jj6 7
Bindjj7 ;
(jj; <
$strjj< s
)jjs t
]jjt u
MaterialOfTeacher	jjv á
materialOfTeacher
jjà ô
)
jjô ö
{kk 	
ifll 
(ll 
idll 
!=ll 
materialOfTeacherll '
.ll' (
Idll( *
)ll* +
{mm 
returnnn 
NotFoundnn 
(nn  
)nn  !
;nn! "
}oo 
Subjectpp 
sjpp 
=pp 
_contextpp !
.pp! "
Subjectpp" )
.pp) *
Includepp* 1
(pp1 2
ppp2 3
=>pp4 6
ppp7 8
.pp8 9
Statuspp9 ?
)pp? @
.pp@ A
FirstOrDefaultppA O
(ppO P
proppP S
=>ppT V
proppW Z
.ppZ [
SubjectCodepp[ f
.ppf g
Equalsppg m
(ppm n
materialOfTeacherppn 
.	pp Ä
SubjectCode
ppÄ ã
.
ppã å
Trim
ppå ê
(
ppê ë
)
ppë í
)
ppí ì
)
ppì î
;
ppî ï
ifqq 
(qq 
sjqq 
!=qq 
nullqq 
)qq 
{rr 
tryss 
{tt 
materialOfTeacheruu )
.uu) *
Statusuu* 0
=uu1 2
$struu3 <
;uu< =
_contextvv  
.vv  !
Updatevv! '
(vv' (
materialOfTeachervv( 9
)vv9 :
;vv: ;
awaitww 
_contextww &
.ww& '
SaveChangesAsyncww' 7
(ww7 8
)ww8 9
;ww9 :
}xx 
catchyy 
(yy (
DbUpdateConcurrencyExceptionyy 7
)yy7 8
{zz 
if{{ 
({{ 
!{{ #
MaterialOfTeacherExists{{ 4
({{4 5
materialOfTeacher{{5 F
.{{F G
Id{{G I
){{I J
){{J K
{|| 
return}} "
NotFound}}# +
(}}+ ,
)}}, -
;}}- .
}~~ 
else 
{
ÄÄ 
throw
ÅÅ !
;
ÅÅ! "
}
ÇÇ 
}
ÉÉ 
return
ÑÑ 
RedirectToAction
ÑÑ +
(
ÑÑ+ ,
nameof
ÑÑ, 2
(
ÑÑ2 3
Index
ÑÑ3 8
)
ÑÑ8 9
)
ÑÑ9 :
;
ÑÑ: ;
}
ÖÖ 
TempData
ÜÜ 
[
ÜÜ 
$str
ÜÜ 
]
ÜÜ 
=
ÜÜ 
$str
ÜÜ  C
;
ÜÜC D
return
áá 
View
áá 
(
áá 
materialOfTeacher
áá )
)
áá) *
;
áá* +
}
àà 	
public
ãã 
async
ãã 
Task
ãã 
<
ãã 
IActionResult
ãã '
>
ãã' (
Delete
ãã) /
(
ãã/ 0
int
ãã0 3
?
ãã3 4
id
ãã5 7
)
ãã7 8
{
åå 	
if
çç 
(
çç 
id
çç 
==
çç 
null
çç 
||
çç 
_context
çç &
.
çç& '
MaterialOfTeacher
çç' 8
==
çç9 ;
null
çç< @
)
çç@ A
{
éé 
return
èè 
NotFound
èè 
(
èè  
)
èè  !
;
èè! "
}
êê 
var
íí 
materialOfTeacher
íí !
=
íí" #
await
íí$ )
_context
íí* 2
.
íí2 3
MaterialOfTeacher
íí3 D
.
ìì 
Include
ìì 
(
ìì 
m
ìì 
=>
ìì 
m
ìì 
.
ìì  
Account
ìì  '
)
ìì' (
.
îî 
Include
îî 
(
îî 
m
îî 
=>
îî 
m
îî 
.
îî  
Subject
îî  '
)
îî' (
.
ïï !
FirstOrDefaultAsync
ïï $
(
ïï$ %
m
ïï% &
=>
ïï' )
m
ïï* +
.
ïï+ ,
Id
ïï, .
==
ïï/ 1
id
ïï2 4
)
ïï4 5
;
ïï5 6
if
ññ 
(
ññ 
materialOfTeacher
ññ !
==
ññ" $
null
ññ% )
)
ññ) *
{
óó 
return
òò 
NotFound
òò 
(
òò  
)
òò  !
;
òò! "
}
ôô 
return
õõ 
View
õõ 
(
õõ 
materialOfTeacher
õõ )
)
õõ) *
;
õõ* +
}
úú 	
[
üü 	
HttpPost
üü	 
,
üü 

ActionName
üü 
(
üü 
$str
üü &
)
üü& '
]
üü' (
[
†† 	&
ValidateAntiForgeryToken
††	 !
]
††! "
public
°° 
async
°° 
Task
°° 
<
°° 
IActionResult
°° '
>
°°' (
DeleteConfirmed
°°) 8
(
°°8 9
int
°°9 <
id
°°= ?
)
°°? @
{
¢¢ 	
if
££ 
(
££ 
_context
££ 
.
££ 
MaterialOfTeacher
££ *
==
££+ -
null
££. 2
)
££2 3
{
§§ 
return
•• 
Problem
•• 
(
•• 
$str
•• V
)
••V W
;
••W X
}
¶¶ 
var
ßß 
materialOfTeacher
ßß !
=
ßß" #
await
ßß$ )
_context
ßß* 2
.
ßß2 3
MaterialOfTeacher
ßß3 D
.
ßßD E
	FindAsync
ßßE N
(
ßßN O
id
ßßO Q
)
ßßQ R
;
ßßR S
if
®® 
(
®® 
materialOfTeacher
®® !
!=
®®" $
null
®®% )
)
®®) *
{
©© 
_context
™™ 
.
™™ 
MaterialOfTeacher
™™ *
.
™™* +
Remove
™™+ 1
(
™™1 2
materialOfTeacher
™™2 C
)
™™C D
;
™™D E
}
´´ 
await
≠≠ 
_context
≠≠ 
.
≠≠ 
SaveChangesAsync
≠≠ +
(
≠≠+ ,
)
≠≠, -
;
≠≠- .
return
ÆÆ 
RedirectToAction
ÆÆ #
(
ÆÆ# $
nameof
ÆÆ$ *
(
ÆÆ* +
Index
ÆÆ+ 0
)
ÆÆ0 1
)
ÆÆ1 2
;
ÆÆ2 3
}
ØØ 	
private
±± 
bool
±± %
MaterialOfTeacherExists
±± ,
(
±±, -
int
±±- 0
id
±±1 3
)
±±3 4
{
≤≤ 	
return
≥≥
 
(
≥≥ 
_context
≥≥ 
.
≥≥ 
MaterialOfTeacher
≥≥ ,
?
≥≥, -
.
≥≥- .
Any
≥≥. 1
(
≥≥1 2
e
≥≥2 3
=>
≥≥4 6
e
≥≥7 8
.
≥≥8 9
Id
≥≥9 ;
==
≥≥< >
id
≥≥? A
)
≥≥A B
)
≥≥B C
.
≥≥C D
GetValueOrDefault
≥≥D U
(
≥≥U V
)
≥≥V W
;
≥≥W X
}
¥¥ 	
}
µµ 
}∂∂ á 
1D:\SWT lab\SWT_Lab2\Lab2_SWT\Data\AppDbContext.cs
	namespace 	

LMMProject
 
. 
Data 
{ 
public 

class 
AppDbContext 
: 
	DbContext  )
{ 
public		 
AppDbContext		 
(		 
DbContextOptions		 ,
<		, -
AppDbContext		- 9
>		9 :
options		; B
)		B C
:		D E
base		F J
(		J K
options		K R
)		R S
{

 	
} 	
public 
virtual 
DbSet 
< 
Account $
>$ %
Account& -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
virtual 
DbSet 
< 
Role !
>! "
Role# '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
virtual 
DbSet 
< 
Combo "
>" #
Combo$ )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
virtual 
DbSet 
< 

Curriculum '
>' (

Curriculum) 3
{4 5
get6 9
;9 :
set; >
;> ?
}@ A
public 
virtual 
DbSet 
< 
CurriculumSubject .
>. /
Curriculum_Subject0 B
{C D
getE H
;H I
setJ M
;M N
}O P
public 
virtual 
DbSet 
< 
Decision %
>% &
Decision' /
{0 1
get2 5
;5 6
set7 :
;: ;
}< =
public 
virtual 
DbSet 
< 
Status #
># $
Status% +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
virtual 
DbSet 
< 
Subject $
>$ %
Subject& -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
public 
virtual 
DbSet 
< 
ComboSubject )
>) *
Combo_Subject+ 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
virtual 
DbSet 
< 
MaterialOfTeacher .
>. /
MaterialOfTeacher0 A
{B C
getD G
;G H
setI L
;L M
}N O
public!! 
virtual!! 
DbSet!! 
<!! 
Syllabus!! %
>!!% &
Syllabus!!' /
{!!0 1
get!!2 5
;!!5 6
set!!7 :
;!!: ;
}!!< =
public"" 
virtual"" 
DbSet"" 
<"" 

Assessment"" '
>""' (

Assessment"") 3
{""4 5
get""6 9
;""9 :
set""; >
;""> ?
}""@ A
public$$ 
virtual$$ 
DbSet$$ 
<$$ 
Feedback$$ %
>$$% &
feedback$$' /
{$$0 1
get$$2 5
;$$5 6
set$$7 :
;$$: ;
}$$< =
public%% 
virtual%% 
DbSet%% 
<%% 
Material%% %
>%%% &
Material%%' /
{%%0 1
get%%2 5
;%%5 6
set%%7 :
;%%: ;
}%%< =
public'' 
DbSet'' 
<'' 

LMMProject'' 
.''  
Models''  &
.''& '
Session''' .
>''. /
?''/ 0
Session''1 8
{''9 :
get''; >
;''> ?
set''@ C
;''C D
}''E F
}(( 
})) Ñ
0D:\SWT lab\SWT_Lab2\Lab2_SWT\Data\EditAccount.cs
	namespace 	

LMMProject
 
. 
Data 
{ 
public 

class 
EditAccount 
{ 
public		 
string		 
UserName		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
=		- .
null		/ 3
!		3 4
;		4 5
public 
	IFormFile 
Image 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
long 
? 
Phone 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
? 
Address 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
? 
Gender 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
? 
Gmail 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
Fullname 
{  !
get" %
;% &
set' *
;* +
}, -
public 
DateTime 
? 
Birthday !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
? 
RoleId 
{ 
get  
;  !
set" %
;% &
}' (
public 
sbyte 
? 
Active 
{ 
get "
;" #
set$ '
;' (
}) *
public 
virtual 
Role 
? 
Role !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Url 
{ 
get 
;  
set! $
;$ %
}& '
}   
}!! ◊
.D:\SWT lab\SWT_Lab2\Lab2_SWT\flm\FlmContext.cs
	namespace 	

LMMProject
 
. 
flm 
; 
public 
partial 
class 

FlmContext 
:  !
	DbContext" +
{ 
public		 


FlmContext		 
(		 
)		 
{

 
} 
public 


FlmContext 
( 
DbContextOptions &
<& '

FlmContext' 1
>1 2
options3 :
): ;
: 	
base
 
( 
options 
) 
{ 
} 
	protected 
override 
void 
OnConfiguring )
() *#
DbContextOptionsBuilder* A
optionsBuilderB P
)P Q
=> 

optionsBuilder 
. 
UseMySQL "
(" #
$str# e
)e f
;f g
	protected 
override 
void 
OnModelCreating +
(+ ,
ModelBuilder, 8
modelBuilder9 E
)E F
{ "
OnModelCreatingPartial 
( 
modelBuilder +
)+ ,
;, -
} 
partial 
void "
OnModelCreatingPartial '
(' (
ModelBuilder( 4
modelBuilder5 A
)A B
;B C
} ≥

+D:\SWT lab\SWT_Lab2\Lab2_SWT\flm\Session.cs
	namespace 	

LMMProject
 
. 
flm 
; 
public 
partial 
class 
Session 
{ 
public 

int 
	SessionId 
{ 
get 
; 
set  #
;# $
}% &
public

 

string

 
?

 
Topic

 
{

 
get

 
;

 
set

  #
;

# $
}

% &
public 

string 
?  
LearningTeachingType '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 

string 
? 
StudentMaterials #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 

string 
?  
ConstructiveQuestion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 

string 
SubjectCode 
{ 
get  #
;# $
set% (
;( )
}* +
=, -
null. 2
!2 3
;3 4
} Æ
.D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\Account.cs
	namespace 	

LMMProject
 
. 
Models 
; 
public 
partial 
class 
Account 
{		 
[

 
Display

 
(

 
Name

 
=

 
$str

 
)

 
]

  
[ 
Required 
( 
ErrorMessage 
= 
$str 0
)0 1
]1 2
[ 
Key 
] 	
public 

string 
UserName 
{ 
get  
;  !
set" %
;% &
}' (
=) *
null+ /
!/ 0
;0 1
[ 
Required 
( 
ErrorMessage 
= 
$str 4
)4 5
]5 6
[ 
DataType 
( 
DataType 
. 
Password 
)  
]  !
public 

string 
Password 
{ 
get  
;  !
set" %
;% &
}' (
=) *
null+ /
!/ 0
;0 1
public 

string 
? 
Image 
{ 
get 
; 
set  #
;# $
}% &
public 

long 
? 
Phone 
{ 
get 
; 
set !
;! "
}# $
public 

string 
? 
Address 
{ 
get  
;  !
set" %
;% &
}' (
public 

int 
? 
Gender 
{ 
get 
; 
set !
;! "
}# $
public 

string 
? 
Gmail 
{ 
get 
; 
set  #
;# $
}% &
public 

string 
? 
Fullname 
{ 
get !
;! "
set# &
;& '
}( )
public 

DateTime 
? 
Birthday 
{ 
get  #
;# $
set% (
;( )
}* +
public!! 

int!! 
?!! 
RoleId!! 
{!! 
get!! 
;!! 
set!! !
;!!! "
}!!# $
public## 

sbyte## 
?## 
Active## 
{## 
get## 
;## 
set##  #
;### $
}##% &
public%% 

virtual%% 
Role%% 
?%% 
Role%% 
{%% 
get%%  #
;%%# $
set%%% (
;%%( )
}%%* +
}'' ‘
1D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\Assessment.cs
	namespace 	

LMMProject
 
. 
Models 
; 
public 
partial 
class 

Assessment 
{		 
[

 
Key

 
]

 	
public 

int 
AssessmentId 
{ 
get !
;! "
set# &
;& '
}( )
public 

string 
? 
Category 
{ 
get !
;! "
set# &
;& '
}( )
public 

string 
? 
Type 
{ 
get 
; 
set "
;" #
}$ %
public 

int 
? 
Part 
{ 
get 
; 
set 
;  
}! "
public 

string 
? 
Weight 
{ 
get 
;  
set! $
;$ %
}& '
public 

string 
? 
CompletionCriteria %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 

string 
? 
Duration 
{ 
get !
;! "
set# &
;& '
}( )
public 

string 
Clo 
{ 
get 
; 
set  
;  !
}" #
=$ %
null& *
!* +
;+ ,
public 

string 
? 
QuestionType 
{  !
get" %
;% &
set' *
;* +
}, -
public 

string 
? 

NoQuestion 
{ 
get  #
;# $
set% (
;( )
}* +
public 

string 
? 
KnowledgeSkill !
{" #
get$ '
;' (
set) ,
;, -
}. /
public!! 

string!! 
?!! 
GradingGuide!! 
{!!  !
get!!" %
;!!% &
set!!' *
;!!* +
}!!, -
public## 

string## 
?## 
Note## 
{## 
get## 
;## 
set## "
;##" #
}##$ %
[$$ 

ForeignKey$$ 
($$ 
$str$$ 
)$$ 
]$$ 
public%% 

int%% 
?%% 

SyllabusId%% 
{%% 
get%%  
;%%  !
set%%" %
;%%% &
}%%' (
public&& 

virtual&& 
Syllabus&& 
?&& 
Syllabus&& %
{&&& '
get&&( +
;&&+ ,
set&&- 0
;&&0 1
}&&2 3
}'' º
,D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\Combo.cs
	namespace 	

LMMProject
 
. 
Models 
; 
public 
partial 
class 
Combo 
{		 
[

 
Key

 
]

 	
public 

int 
ComboId 
{ 
get 
; 
set !
;! "
}# $
public 

string 
? 
ComboNameVn 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

string 
? 
ComboNameEn 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

string 
? 
Note 
{ 
get 
; 
set "
;" #
}$ %
public 

string 
? 
Tag 
{ 
get 
; 
set !
;! "
}# $
[ 

ForeignKey 
( 
$str 
) 
] 
public 

int 
? 
CurriculumId 
{ 
get "
;" #
set$ '
;' (
}) *
public 

virtual 

Curriculum 
? 

Curriculum )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} ˚	
3D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\ComboSubject.cs
	namespace 	

LMMProject
 
. 
Models 
; 
public 
partial 
class 
ComboSubject !
{		 
[

 
Key

 
]

 	
public 

int 
id 
{ 
get 
; 
set 
; 
} 
[ 

ForeignKey 
( 
$str 
) 
] 
public 

int 
ComboId 
{ 
get 
; 
set !
;! "
}# $
public 

Combo 
Combo 
{ 
get 
; 
set !
;! "
}# $
[ 

ForeignKey 
( 
$str 
) 
] 
public 

string 
SubjectCode 
{ 
get  #
;# $
set% (
;( )
}* +
public 

Subject 
Subject 
{ 
get  
;  !
set" %
;% &
}' (
} ¨
1D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\Curriculum.cs
	namespace 	

LMMProject
 
. 
Models 
; 
public 
partial 
class 

Curriculum 
{		 
[

 
Key

 
]

 	
public 

int 
CurriculumId 
{ 
get !
;! "
set# &
;& '
}( )
[ 
Required 
( 
AllowEmptyStrings 
=  !
false" '
,' (
ErrorMessage) 5
=6 7
$str8 O
)O P
]P Q
public 

string 
? 
CurriculumCode !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 

string 
? 
NameVn 
{ 
get 
;  
set! $
;$ %
}& '
public 

string 
? 
NameEn 
{ 
get 
;  
set! $
;$ %
}& '
public 

string 
? 

Decription 
{ 
get  #
;# $
set% (
;( )
}* +
[ 

ForeignKey 
( 
$str 
) 
] 
public 

string 
? 

DecisionNo 
{ 
get  #
;# $
set% (
;( )
}* +
public 

virtual 
Decision 
? 
Decision %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} Ê
8D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\CurriculumSubject.cs
	namespace 	

LMMProject
 
. 
Models 
; 
public 
partial 
class 
CurriculumSubject &
{		 
[

 
Key

 
]

 	
public 

int 
id 
{ 
get 
; 
set 
; 
} 
[ 

ForeignKey 
( 
$str 
) 
] 
public 

int 
CurriculumId 
{ 
get !
;! "
set# &
;& '
}( )
public 

virtual 

Curriculum 

Curriculum (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
[ 

ForeignKey 
( 
$str 
) 
] 
public 

string 
SubjectCode 
{ 
get  #
;# $
set% (
;( )
}* +
public 

virtual 
Subject 
Subject "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 

int 
? 
Semester 
{ 
get 
; 
set  #
;# $
}% &
} Ã
/D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\Decision.cs
	namespace 	

LMMProject
 
. 
Models 
; 
public 
partial 
class 
Decision 
{ 
[		 
Key		 
]		 	
public

 

string

 

DecisionNo

 
{

 
get

 "
;

" #
set

$ '
;

' (
}

) *
public 

string 
? 
DecisionName 
{  !
get" %
;% &
set' *
;* +
}, -
public 

string 
? 
Note 
{ 
get 
; 
set "
;" #
}$ %
public 

DateTime 
? 

CreateDate 
{  !
get" %
;% &
set' *
;* +
}, -
} ê
5D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\ErrorViewModel.cs
	namespace 	

LMMProject
 
. 
Models 
{ 
public 

class 
ErrorViewModel 
{ 
public 
string 
? 
	RequestId  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
bool 
ShowRequestId !
=>" $
!% &
string& ,
., -
IsNullOrEmpty- :
(: ;
	RequestId; D
)D E
;E F
} 
}		 ∏
/D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\Feedback.cs
	namespace 	

LMMProject
 
. 
Models 
{ 
public 

partial 
class 
Feedback !
{		 
[

 	
Key

	 
]

 
public 
int 

FeedbackId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
Content 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	

ForeignKey	 
( 
$str 
) 
] 
public 
string 

UserNameTo  
{! "
get# &
;& '
set( +
;+ ,
}- .
=/ 0
null1 5
!5 6
;6 7
public 
string 
UserNameFrom "
{# $
get% (
;( )
set* -
;- .
}/ 0
=1 2
null3 7
!7 8
;8 9
public 
virtual 
Account 
? 
Account  '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
string 
? 
Title 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime 
? 

CreateDate #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} 
} ›
/D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\Material.cs
	namespace 	

LMMProject
 
. 
Models 
{ 
public 

class 
Material 
{ 
public 
int 

MaterialId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
MaterialDescription )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public		 
string		 
Author		 
{		 
get		 "
;		" #
set		$ '
;		' (
}		) *
public

 
string

 
	Publisher

 
{

  !
get

" %
;

% &
set

' *
;

* +
}

, -
public 
string 
PublishedDate #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
Url 
{ 
get 
;  
set! $
;$ %
}& '
[ 	

ForeignKey	 
( 
$str 
) 
] 
public 
string 
SubjectCode !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
virtual 
Subject 
Subject &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
} ˜
:D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\MaterialFilterModel.cs
	namespace 	

LMMProject
 
. 
Models 
{ 
public 

class 
MaterialFilterModel $
{ 
public 
Material 
Material  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
List 
< 
Subject 
> 
Subjects %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
} ü
8D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\MaterialOfTeacher.cs
	namespace 	

LMMProject
 
. 
Models 
; 
public 
partial 
class 
MaterialOfTeacher &
{		 
[

 
Key

 
]

 	
public 

int 
Id 
{ 
get 
; 
set 
; 
} 
public 

string 
? 
Description 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 
Required 
( 
AllowEmptyStrings 
=  !
false" '
,' (
ErrorMessage) 5
=6 7
$str8 [
)[ \
]\ ]
[ 

ForeignKey 
( 
$str 
) 
] 
public 

string 
TeacherUsername !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 

virtual 
Account 
Account "
{# $
get% (
;( )
set* -
;- .
}/ 0
[ 
Required 
( 
AllowEmptyStrings 
=  !
false" '
,' (
ErrorMessage) 5
=6 7
$str8 R
)R S
]S T
[ 

ForeignKey 
( 
$str 
) 
] 
public 

string 
SubjectCode 
{ 
get  #
;# $
set% (
;( )
}* +
public 

Subject 
Subject 
{ 
get  
;  !
set" %
;% &
}' (
[ 
Required 
( 
AllowEmptyStrings 
=  !
false" '
,' (
ErrorMessage) 5
=6 7
$str8 N
)N O
]O P
public 

string 
URL 
{ 
get 
; 
set  
;  !
}" #
public 

string 
Status 
{ 
get 
; 
set  #
;# $
}% &
} ﬁ
+D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\Role.cs
	namespace 	

LMMProject
 
. 
Models 
; 
public 
partial 
class 
Role 
{ 
[		 
Key		 
]		 	
public

 

int

 
RoleId

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 

string 
? 
RoleName 
{ 
get !
;! "
set# &
;& '
}( )
public 

virtual 
ICollection 
< 
Account &
>& '
Accounts( 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
=? @
newA D
ListE I
<I J
AccountJ Q
>Q R
(R S
)S T
;T U
} œ
.D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\Session.cs
	namespace 	

LMMProject
 
. 
Models 
; 
public 
partial 
class 
Session 
{		 
[

 
Key

 
]

 	
public 

int 
	SessionId 
{ 
get 
; 
set  #
;# $
}% &
public 

string 
Topic 
{ 
get 
; 
set "
;" #
}$ %
public 

string 
?  
LearningTeachingType '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 

string 
? 
StudentMaterials #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 

string 
?  
Constructivequestion '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
[ 

ForeignKey 
( 
$str 
) 
] 
public 

string 
? 
SubjectCode 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

virtual 
Subject 
? 
Subject #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} Ì
-D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\Status.cs
	namespace 	

LMMProject
 
. 
Models 
; 
public 
partial 
class 
Status 
{ 
[		 
Key		 
]		 	
public

 

sbyte

 
StatusId

 
{

 
get

 
;

  
set

! $
;

$ %
}

& '
public 

string 
? 

StatusName 
{ 
get  #
;# $
set% (
;( )
}* +
} Ö
.D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\Subject.cs
	namespace 	

LMMProject
 
. 
Models 
; 
public 
partial 
class 
Subject 
{		 
[

 
Key

 
]

 	
public 

string 
SubjectCode 
{ 
get  #
;# $
set% (
;( )
}* +
public 

string 
? 
SubjectNameVn  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 

string 
? 
SubjectNameEn  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 

string 
? 
PreRequisite 
{  !
get" %
;% &
set' *
;* +
}, -
[ 

ForeignKey 
( 
$str 
) 
] 
public 

sbyte 
StatusId 
{ 
get 
;  
set! $
;$ %
}& '
public 

virtual 
Status 
Status  
{! "
get# &
;& '
set( +
;+ ,
}- .
} ∞!
/D:\SWT lab\SWT_Lab2\Lab2_SWT\Models\Syllabus.cs
	namespace 	

LMMProject
 
. 
Models 
; 
public 
partial 
class 
Syllabus 
{		 
[

 
Key

 
]

 	
public 

int 

SyllabusId 
{ 
get 
;  
set! $
;$ %
}& '
public 

string 
? 
SyllabusNameVn !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 

string 
? 
SyllabusNameEn !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 

ForeignKey 
( 
$str 
) 
] 
public 

string 
? 
SubjectCode 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

virtual 
Subject 
? 
Subject #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 

int 
? 
NoCredit 
{ 
get 
; 
set  #
;# $
}% &
public 

string 
? 
DegreeLevel 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

string 
? 
TimeAllocation !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 

string 
? 
PreRequisite 
{  !
get" %
;% &
set' *
;* +
}, -
public 

string 
? 
Description 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

string 
? 
StudentTask 
{  
get! $
;$ %
set& )
;) *
}+ ,
public!! 

string!! 
?!! 
Tool!! 
{!! 
get!! 
;!! 
set!! "
;!!" #
}!!$ %
public## 

string## 
?## 
ScoringScale## 
{##  !
get##" %
;##% &
set##' *
;##* +
}##, -
[$$ 

ForeignKey$$ 
($$ 
$str$$ 
)$$ 
]$$ 
public%% 

string%% 
?%% 

DecisionNo%% 
{%% 
get%%  #
;%%# $
set%%% (
;%%( )
}%%* +
public'' 

virtual'' 
Decision'' 
?'' 
Decision'' %
{''& '
get''( +
;''+ ,
set''- 0
;''0 1
}''2 3
public)) 

sbyte)) 
?)) 

IsApproved)) 
{)) 
get)) "
;))" #
set))$ '
;))' (
}))) *
public++ 

string++ 
?++ 
Note++ 
{++ 
get++ 
;++ 
set++ "
;++" #
}++$ %
public-- 

int-- 
?-- 
MinAvgMarkToPass--  
{--! "
get--# &
;--& '
set--( +
;--+ ,
}--- .
[// 
Required// 
(// 
AllowEmptyStrings// 
=//  !
false//" '
,//' (
ErrorMessage//) 5
=//6 7
$str//8 Q
)//Q R
]//R S
public00 

sbyte00 
?00 
IsActive00 
{00 
get00  
;00  !
set00" %
;00% &
}00' (
public22 

virtual22 
ICollection22 
<22 

Assessment22 )
>22) *
Assessments22+ 6
{227 8
get229 <
;22< =
set22> A
;22A B
}22C D
}55 ´
'D:\SWT lab\SWT_Lab2\Lab2_SWT\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder		 
.		 
Services		 
.		 #
AddControllersWithViews		 (
(		( )
)		) *
;		* +
builder

 
.

 
Services

 
.

 
AddDbContext

 
<

 
AppDbContext

 *
>

* +
(

+ ,
options

, 3
=>

4 6
options

7 >
.

> ?
UseMySQL

? G
(

G H
builder

H O
.

O P
Configuration

P ]
.

] ^
GetConnectionString

^ q
(

q r
$str	

r Ö
)


Ö Ü
)


Ü á
)


á à
;


à â
builder 
. 
Services 
. %
AddDistributedMemoryCache *
(* +
)+ ,
;, -
builder 
. 
Services 
. 

AddSession 
( 
options #
=>$ &
{' (
options 
. 
IdleTimeout 
= 
TimeSpan "
." #
FromMinutes# .
(. /
$num/ 3
)3 4
;4 5
} 
) 
; 
builder 
. 
Services 
. 
AddMvc 
( 
) 
; 
builder 
. 
Services 
. 
TryAddSingleton  
<  ! 
IHttpContextAccessor! 5
,5 6
HttpContextAccessor7 J
>J K
(K L
)L M
;M N
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
! 
app 
. 	
Environment	 
. 
IsDevelopment "
(" #
)# $
)$ %
{ 
app 
. 
UseExceptionHandler 
( 
$str )
)) *
;* +
app 
. 
UseHsts 
( 
) 
; 
} 
app 
. 
UseHttpsRedirection 
( 
) 
; 
app 
. 
UseStaticFiles 
( 
) 
; 
app 
. 

UseRouting 
( 
) 
; 
app!! 
.!! 

UseSession!! 
(!! 
)!! 
;!! 
app## 
.## 
UseAuthorization## 
(## 
)## 
;## 
app%% 
.%% 
MapControllerRoute%% 
(%% 
name&& 
:&& 	
$str&&
 
,&& 
pattern'' 
:'' 
$str'' 6
)''6 7
;''7 8
app)) 
.)) 
Run)) 
()) 
))) 	
;))	 
